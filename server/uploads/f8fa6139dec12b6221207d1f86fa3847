
# çŸ¥è¯†æ€»ç»“

## å‰ç«¯

### CSS

1. ä¸¤ç§ç›’å­æ¨¡å‹åˆ†è¾¨è¯´ä¸‹
   1. content-boxï¼ˆw3c å IE æçš„ï¼Œæ ‡å‡†ç›’æ¨¡å‹ï¼‰: æœ€ç»ˆå®½é«˜æ˜¯å†…å®¹åŒºå®½é«˜
   2. border-boxï¼ˆIE 5ï¼Œåˆç§°æ€ªå¼‚ç›’æ¨¡å‹ï¼Œå…¶å®è¿™æ‰æ ‡å‡†çš„ï¼Œç”¨çš„æœ€å¤šï¼‰: æœ€ç»ˆå®½é«˜ æ˜¯ å†…å®¹åŒºå®½åº¦ + å†…è¾¹è·ï¼ˆpaddingï¼‰å®½åº¦ + è¾¹æ¡†ï¼ˆborderï¼‰ å®½åº¦ï¼ˆ*{box-sizing:border-box;}ï¼‰
1. css reset å’Œ normalize.css åŒºåˆ«ï¼ˆè€ƒè‹±è¯­ ğŸ˜‚ï¼‰ï¼Ÿ
   - resetï¼šé‡ç½®ï¼ŒæŠ›å¼ƒé»˜è®¤æ ·å¼
   - normalizeï¼ˆæ­£å¸¸åŒ–ï¼‰ï¼šè®©æ‰€æœ‰æµè§ˆå™¨çš„æ ‡ç­¾éƒ½è·Ÿæ ‡å‡†è§„å®šçš„é»˜è®¤æ ·å¼ä¸€è‡´ï¼Œå„æµè§ˆå™¨ä¸Šçš„æ ‡ç­¾é»˜è®¤æ ·å¼åŸºæœ¬ç»Ÿä¸€
1. å¦‚ä½•å‚ç›´å±…ä¸­
   - å¹³æ—¶æ€»ç»“ï¼š
     - æ°´å¹³å±…ä¸­ï¼š
       - å†…è”ï¼šçˆ¶èŠ‚ç‚¹ä¸Šå†™ text-align:center;   ï¼ˆcenterï¼Œc åœ¨e.i.y å‰å‘ /s/ï¼šæ£®ç‰¹ï¼‰
       - å—çº§ï¼šmargin-left: auto; margin-right: auto;
     - å‚ç›´å±…ä¸­ï¼šÂ https://jscode.me/t/topic/1936

     ```css
     <!-- æ–¹æ³•ä¸€ï¼šå‚ç›´å…ƒç´ ç»å¯¹å®šä½ï¼Œtop left right bottom éƒ½è®¾ 0ï¼Œmarginï¼šautoï¼Œç¼ºç‚¹ï¼šå¿…é¡»å®šä¹‰å®½é«˜ -->
     div{
        width:200px;
        height:200px;
        background: red;
        position:absolute;
        top:0;
        right:0;
        bottom:0;
        left:0;
        margin:auto;
     }
     <!-- æ–¹æ³•äºŒï¼šå‰æçŸ¥é“å‚ç›´å…ƒç´ çš„å¤§å°ï¼Œå‚ç›´å…ƒç´  ç›¸å¯¹äºçˆ¶å…ƒç´ å®½é«˜ 50%ï¼Œç›¸å¯¹è‡ªå·± margin-top margin-left å„å‡å»ä¸€åŠ -->
     div{
        width:400px;
        height:400px;
        background: red;
        position:absolute;
        top:50%;
        left:50%;
        margin-top:-200px;
        margin-left:-200px;
     }

      <!-- æ–¹æ³•ä¸‰ï¼šå‚ç›´å…ƒç´ ç›¸å¯¹å®šä½ ç›¸å¯¹äºçˆ¶å…ƒç´ å®½é«˜ 50%ï¼Œç›¸å¯¹è‡ªå·± ä½¿ç”¨ transform çš„ translate ä½ç§»è‡ªå·±å¤§å°è´Ÿä¸€åŠï¼Œä¸éœ€è¦çŸ¥æ™“å®½é«˜ -->
      div{
        width:200px;
        height:200px;
        background: red;
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%,-50%);
      }

      <!-- æ–¹æ³•å››ï¼šflex  -->
      div{
         height:800px;
         display:flex;
         <!-- æ°´å¹³çš„ä¸»è½´ x è½´ å±…ä¸­ï¼Œ justifyï¼šç½‘ç»œè¯‘ï¼šä¸ºâ€¦è¾©æŠ¤ï¼ˆè¯æ˜ï¼‰ï¼›ä½¿æ¯è¡Œä¸¤ç«¯å¯¹é½-->
         justify-content:center;

         <!-- å‚ç›´çš„äº¤å‰è½´ y è½´ å±…ä¸­-->
         align-items:center;
         border:1px #ccc solid;
      }

      <!-- æˆ–è€… flex ä½¿ç”¨ margin:auto -->
      <!-- div{
         height:800px;
         display:flex;
         margin:auto;
         border:1px #ccc solid;
      } -->

      div.child{
         width:200px;
         height:200px;
      }
     ```

1. [flax](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html) æ€ä¹ˆç”¨ï¼Œå¸¸ç”¨å±æ€§
   - å®¹å™¨å±æ€§ï¼š
      - **flex-direction** å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚
        - row (é»˜è®¤) ä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ å·¦åˆ°å³ | row-reverse å³åˆ°å·¦
        - column ä¸»è½´ä¸ºå‚ç›´æ–¹å‘ ä¸Šåˆ°ä¸‹ | column-reverse ä¸‹åˆ°ä¸Š
      - **flex-wrap** å¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚
        - nowrapï¼ˆé»˜è®¤ï¼‰ä¸æ¢
        - wrap æ¢ï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹
        - wrap-reverse æ¢ï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹
      - **flex-flow** æ˜¯ä¸Šé¢ä¸¤ä¸ªå±æ€§ç¼©å†™ ï¼š flex-flowï¼š<flex-direction> || <flex-wrap>;
      - **justify-content** ä¸»è½´å¯¹å…¶æ–¹å¼ï¼šflex-startï¼ˆé»˜è®¤ï¼‰å·¦å¯¹é½ï¼Œflex-endï¼šå³ï¼Œcenterï¼šå±…ä¸­ï¼Œspace-betweenï¼šä¸¤ç«¯å¯¹é½ã€‚ã€‚ã€‚
      - **align-items**  äº¤å‰è½´å¯¹å…¶æ–¹å¼ï¼šflex-start ä¸Šï¼Œflex-endï¼šä¸‹ï¼Œcenterï¼šäº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚stretchï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸º autoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚
   - é¡¹ç›®å±æ€§ï¼š
     - orderï¼šå®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º 0ã€‚
     - flex-growï¼ˆé•¿å¤§ï¼Œæ‰©å¤§ï¼‰ï¼šé¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º 0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚
     - flex-shrinkï¼ˆç¼©å° /ä¸æ¶¦å¯/ï¼‰ï¼šé¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º 1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚
     - flex-basisï¼ˆåŸºç‚¹ï¼Œ/å€å°„æ€/ï¼‰ï¼šåœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚é»˜è®¤å€¼ä¸º autoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°
     - flexï¼šflex-grow, flex-shrink å’Œ flex-basis çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º **0 1 auto**ã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚è¯¥å±æ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼šauto (1 1 auto) å’Œ none (0 0 auto)ã€‚å»ºè®®ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯å•ç‹¬å†™ä¸‰ä¸ªåˆ†ç¦»çš„å±æ€§ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæ¨ç®—ç›¸å…³å€¼ã€‚

1. CSS ä¼˜å…ˆçº§
   - é€‰æ‹©å™¨è¶Šå…·ä½“ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚!important > è¡Œå†… > #id > .class = ä¼ªç±»ï¼ˆ:link :hoveï¼‰= å±æ€§ > å…ƒç´  = ä¼ªå…ƒç´ ï¼ˆ::beforeï¼‰ > é€šé…
   - å¤–éƒ¨æ ·å¼ = å†…éƒ¨æ ·å¼ï¼ŒåŒæ ·ä¼˜å…ˆçº§ï¼Œå†™åœ¨åé¢çš„è¦†ç›–å‰é¢çš„ã€‚
   - !important; ä¼˜å…ˆçº§æœ€é«˜ï¼›ä½†å¦‚æœæ˜¯ `width:100px !important;`  `min-width:200px;` ä¼šè¦†ç›– !important

1. BFC FCï¼ˆFormatting Contextsï¼‰è¯‘ä¸ºï¼šæ ¼å¼ä¸Šä¸‹æ–‡ï¼Œå®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼›BFC å°±æ˜¯ Block Fromattin Contexts å—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼Œè¿˜æœ‰ IFCï¼ˆinline FCï¼‰å†…è”æ ¼å¼ä¸Šä¸‹æ–‡,æ–‡æœ¬æ¸²æŸ“è§„åˆ™ï¼›å¦‚ä¸èƒ½å­˜åœ¨å—çº§å…ƒç´ pï¼ŒFFC(Flex FC) è‡ªé€‚åº”æ ¼å¼åŒ–ä¸Šä¸‹æ–‡,GFCï¼ˆGridLayout FCï¼‰ç½‘æ ¼å¸ƒå±€æ ¼å¼åŒ–ä¸Šä¸‹æ–‡,æ›´åŠ ä¸°å¯Œçš„å±æ€§æ¥æ§åˆ¶è¡Œåˆ—ï¼Œæ§åˆ¶å¯¹é½ä»¥åŠæ›´ä¸ºç²¾ç»†çš„æ¸²æŸ“è¯­ä¹‰å’Œæ§åˆ¶
   - å—çº§æ ¼å¼ä¸Šä¸‹æ–‡ ï¼ˆé€šä¿—è®²å°±æ˜¯ä¸€ä¸ªç»“ç•Œï¼‰ï¼Œä¸»è¦çš„ä½œç”¨ï¼š
      - **æ¸…é™¤æµ®åŠ¨**ï¼šoverflow:hidden .clearfix æ¸…é™¤æµ®åŠ¨
      - é˜²æ­¢åŒä¸€ BFC å®¹å™¨ä¸­çš„ç›¸é‚»å…ƒç´ é—´çš„å¤–è¾¹è·é‡å é—®é¢˜ï¼Œoverflow:hidden [**å–æ¶ˆçˆ¶å­ margin åˆå¹¶**](http://jsbin.com/conulod/1/edit?html,css,js,output) ç”¨ padding-top: 1px;
   - è§¦å‘ BFC ç‰¹æ€§ï¼š
     - body æ ¹å…ƒç´ 
     - æµ®åŠ¨å…ƒç´ ï¼šfloat é™¤ none ä»¥å¤–çš„å€¼
     - ç»å¯¹å®šä½ï¼špostionï¼ˆabsoluteã€fixedï¼‰
     - display ä¸º inline-boxã€table-cellsã€flex
     - overflow é™¤äº† visible ä»¥å¤–çš„å€¼ï¼ˆhiddenã€autoã€scrollï¼‰

1. æ¸…é™¤æµ®åŠ¨
   1. ç›´æ¥è®¾ç½®çˆ¶å…ƒç´ é«˜åº¦ã€‚ä¼˜ç‚¹ç®€å•ï¼Œç¼ºç‚¹å¾—çŸ¥é“çˆ¶å…ƒç´ é«˜åº¦ã€‚
   2. çˆ¶å…ƒç´ ç›´æ¥è®¾ç½® overflow:hidden æˆ– autoã€‚ä¼˜ç‚¹ç®€å•ï¼Œç¼ºç‚¹æœ‰å†…å®¹è¦æº¢å‡ºæ˜¾ç¤º(å¼¹å‡ºèœå•)ï¼Œä¹Ÿä¼šè¢«ä¸€åŒéšè—ã€‚
   3. æŠŠçˆ¶å…ƒç´ ä¹Ÿè®¾ç½®ä¸ºæµ®åŠ¨ã€‚ä¼˜ç‚¹ç®€å•ï¼Œç¼ºç‚¹å¯¹åç»­å…ƒç´ ä¼šæœ‰å½±å“ã€‚
   4. åœ¨çˆ¶å…ƒç´ ä¸­ï¼Œè¿½åŠ ç©ºå­å…ƒç´ ï¼Œå¹¶è®¾ç½®å…¶ clear å±æ€§ä¸º bothã€‚ä¼˜ç‚¹ï¼šclear æ˜¯ css ä¸­ä¸“ç”¨äºæ¸…é™¤æµ®åŠ¨çš„å±æ€§ã€‚ç¼ºç‚¹æ·»åŠ æ— æ„ä¹‰çš„ç©ºæ ‡ç­¾ã€‚
   5. ä½¿ç”¨å†…å®¹ç”Ÿæˆçš„æ–¹å¼æ¸…é™¤æµ®åŠ¨ã€‚ä¼˜ç‚¹ï¼šä¸ç ´åæ–‡æ¡£ç»“æ„ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œè§„èŒƒæ¸…é™¤æµ®åŠ¨ã€‚ç¼ºç‚¹ï¼šä»£ç å¤š

      ```css
      <!-- .clearfix æ¸…é™¤æµ®åŠ¨å†™åœ¨çˆ¶å…ƒç´ ä¸Š -->
      .clearfix ::after{
         content: '';
         display: block;
         clear:both;
      }
      .clearfix{
         zoom: 1; /* IE å…¼å®¹ */
      }
      ```

### HTML

å—å…ƒç´ : å¤§å¤šä¸ºç»“æ„æ€§æ ‡è®°ï¼šç‹¬å ä¸€è¡Œ(ä»ä¸Šåˆ°ä¸‹æ’ç‰ˆ);å¯è®¾ç½®å®½é«˜ï¼Œå¯ä»¥åµŒå¥—å…¶ä»–å…ƒç´  ï¼Œï¼ˆpã€dt å…ƒç´ ä¸èƒ½åµŒå¥—å…¶ä»–å…ƒç´ ï¼‰
è¡Œç±»å…ƒç´ : å¤§å¤šä¸ºæè¿°æ€§æ ‡è®°ï¼Œä»å·¦åˆ°å³ä¸€è¡Œæ˜¾ç¤º;è®¾ç½®å®½é«˜æ— æ•ˆ

1. è¯­ä¹‰åŒ–ï¼š
  åˆé€‚çš„ä½ç½®ç”¨åˆé€‚æ ‡ç­¾ï¼Œæ®µè½ç”¨ `P` æ ‡ç­¾ï¼Œæ ‡é¢˜ç”¨ `H1 ~ H6` æ ‡ç­¾ï¼Œæ–‡ç« ç”¨ `Article` æ ‡ç­¾ç­‰ï¼Œç›®çš„ä½¿ HTML å…·æœ‰æ›´é«˜çš„å¯è¯»æ€§ï¼Œä¹Ÿæœ‰åˆ© SEO æ”¶å½•ã€‚

1. mate viewport æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Œæ€ä¹ˆå†™ï¼Ÿ
  ç§»åŠ¨ç«¯å¼€å‘æ—¶å€™ï¼Œä½¿ç§»åŠ¨è®¾å¤‡è®¾é…é¡µé¢ ä¸€æ¡é…ç½®ï¼Œå¯ä»¥å‚è€ƒæ·˜å® ç§»åŠ¨ç«¯é¡µé¢ï¼›

   `<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1; user-scalable=no;">`

   user-scalableï¼šyes/no | å®šä¹‰æ˜¯å¦å…è®¸ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾é¡µé¢ï¼Œé»˜è®¤å€¼yes

1. [canvas](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API) ç”¨æ¥å¹²å˜›çš„
   `<canvas>`å…ƒç´ å¯è¢«ç”¨æ¥é€šè¿‡ JavaScriptï¼ˆCanvas API æˆ– WebGL APIï¼‰ç»˜åˆ¶å›¾å½¢åŠå›¾å½¢åŠ¨ç”»ã€‚

1. offsetï¼šç›¸å¯¹äºå®¹å™¨è·ç¦»ï¼Œclientï¼šå¯è§†åŒºåŸŸè·ç¦»ï¼Œscrollï¼šæ•´ä¸ªé¡µé¢ï¼ŒåŒ…æ‹¬éšè—åŒºåŸŸï¼ˆæ»šåŠ¨æ¡ï¼‰

### JavaScript

1. åŸºæœ¬ç±»å‹ï¼ˆé€å‘½é¢˜ï¼‰
   - stringï¼Œnumberï¼Œbooleanï¼Œnullï¼Œundefinedï¼Œsymbolï¼ŒBigIntï¼Œobject
   - ä¸€æ—¦å‡ºç° arrayï¼Œfunctionï¼ŒMathï¼ŒReg, Dateï¼ŒNaN... å°± GG
   ![ä¸ºä»€ä¹ˆè¯´ JavaScript å‡½æ•°ä¸€ç­‰å…¬æ°‘](https://cdn.jsdelivr.net/gh/w3ctim/picBed/blog/notes/20200420203645.png)

1. å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œé€šå¸¸ä¼šç»™å‡ºä¸€æ®µä»£ç ï¼Œè®©ä½ ç»™å‡ºè¾“å‡ºç»“æœï¼Œå¹¶è§£é‡Šï¼Ÿ

![event loop](./_media/question/event_loop.jpeg)

1. è§£é‡Š JavaScript çš„å•çº¿ç¨‹æ¨¡å‹ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼ŸsetTimeout çš„å»¶æ—¶ä¸ºä½•åšä¸åˆ°ç²¾ç¡®ï¼Ÿ
  é¿å…`DOM`æ¸²æŸ“å†²çª; æµè§ˆå™¨éœ€è¦æ¸²æŸ“`DOM`, `JS` å¯ä»¥ä¿®æ”¹`DOM`, `JS`æ‰§è¡Œçš„æ—¶å€™,æµè§ˆå™¨`DOM`æ¸²æŸ“ä¼šæš‚åœ, ä¸¤æ®µ`JS`ä¹Ÿä¸èƒ½åŒæ—¶æ‰§è¡Œ(éƒ½ä¿®æ”¹`DOM`å°±å†²çªäº†)

1. Promise

   - Promise å€¼ç©¿é€

      ```js
      Promise.resolve(1)
      .then(2)
      .then(Promise.resolve(3))
      .then(console.log)
      // 1
      ```

      è§£é‡Šï¼š`.then` æˆ–è€… `.catch` çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼ç©¿é€ã€‚

      ```js
      Promise.resolve(1)
      .then(function(){return 2})
      .then(Promise.resolve(3))
      .then(console.log)
      // 2

      Promise.resolve(1)
      .then(function(){return 2})
      .then(function(){return Promise.resolve(3)})
      .then(console.log)
      // 3
      ```

      Promise æ–¹æ³•é“¾é€šè¿‡ `return` ä¼ å€¼ï¼Œæ²¡æœ‰ `return` å°±åªæ˜¯ç›¸äº’ç‹¬ç«‹çš„ä»»åŠ¡è€Œå·²

   - çŠ¶æ€ä¸­è½¬

      ```js
      let p1= new Promise((resolve,reject)=>{
         reject("å¤±è´¥");
      });
      let p2 = new Promise((resolve,reject)=>{
         resolve(p1) // çŠ¶æ€ä¸­è½¬
      }).then(
         (msg) => {console.log(`resolve: ${msg}`)},
         (err) => {console.log(`rejuct: ${err}`)}
      ).then(a=>console.log('æˆåŠŸ'),b=>console.log('å¤±è´¥'))
      // rejuct: å¤±è´¥
      // æˆåŠŸ
      ```

      - **then ä¹Ÿæ˜¯ Promiseï¼Œä¸ç®¡æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›ï¼Œè¿˜æ˜¯ç¬¬äºŒä¸ªå‚æ•°è¿”å›ï¼Œä¼šé»˜è®¤è¿”å› resolvedï¼ˆæˆåŠŸçŠ¶æ€ï¼‰**ï¼ˆthen è‚¯å®šå¾—æ˜¯ä¸ªå¯¹è±¡ï¼Œè¦ä¸ç„¶æ€ä¹ˆé“¾å¼æ“ä½œå‘¢ï¼‰
      - æ­¤æ—¶ p2 æ˜¯ä¸ª Promise, çŠ¶æ€ï¼šresolvedï¼Œæœ€åä¸€ä¸ª `.then` é‡Œé¢æ²¡æœ‰è¿”å›å€¼ï¼Œåªæ‰§è¡Œæ‰“å°äº†`æˆåŠŸ`ï¼Œæ‰€ä»¥è¿”å›æ˜¯ undefined (`Promise {<resolved>: undefined}`)

      ```js
      var p1 = new Promise((resolve, reject) => {
         reject('p1 å¤±è´¥');
      }).then(() => { },() => { });

      var p2 = new Promise((resolve, reject) => {
         resolve(p1);
      }).then(result => {
         console.log('å¾®ä»»åŠ¡2çš„æˆåŠŸ:' + result);
      }, error => {
         console.log('å¾®ä»»åŠ¡2çš„å¤±è´¥:' + error);
      });
      // å¾®ä»»åŠ¡2çš„æˆåŠŸ:undefined
      ```

      p1 æ‰§è¡Œäº† `.then`, ä¸”ä¹Ÿå†™äº†ç¬¬äºŒå‚æ•°ï¼Œæ‰€ä»¥å¤±è´¥çŠ¶æ€è¢«æ‰§è¡Œäº†ï¼Œp1 `.then` æ²¡æœ‰è¿”å›ä»»ä½•æ•°æ®ï¼Œæ‰€ä»¥æœ€ç»ˆ p1 è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ã€çŠ¶æ€ä¸º `resoled` å€¼ä¸º `undefined` çš„ Promiseï¼Œæ³¨æ„ p1 æ„é€ å‡½æ•°é‡Œè¿”å›æ˜¯ `rejected`ï¼Œå¦‚æœ p1 çš„ `.then` çš„ç¬¬äºŒå‚æ•°æ²¡å†™ï¼ˆæ¥æ”¶å¤„ç†ï¼‰ï¼Œè¿˜æ˜¯ä¼šæŠŠ rejected çŠ¶æ€å¾€ p2 ä¼ é€’çš„ï¼Œæ‰“å°ï¼š`å¾®ä»»åŠ¡2çš„å¤±è´¥ï¼šp1 å¤±è´¥`

      ```js
      var p1 = new Promise((resolve, reject) => {
         // resolve('æˆåŠŸ');
         console.log('1');
         reject('å¤±è´¥');//ä¸»çº¿ç¨‹ä»£ç 
      });

      var p2 = p1.then(
          result => { },
          error => { console.log('aaa'); }
      );//then è‚ƒç„¶ä¹Ÿæ˜¯ä¸ª promise ä½†å±äºå¾®ä»»åŠ¡é˜Ÿåˆ—
      console.log('2');
      console.log(p1);//p1 æ‰§è¡Œäº†å—ï¼Ÿç­”æ¡ˆæ˜¯æ‰§è¡Œäº†ï¼ŒçŠ¶æ€æ˜¯ rejected
      console.log(p2);//p2 æ‰§è¡Œäº†å—ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ã€‚çŠ¶æ€æ˜¯ pending

       //æŠŠè¿™ä¸ªä»»åŠ¡ä¸¢åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰ 1 ç§’ï¼Œä»£ç ç»§ç»­åªèƒ½ç»™
        setTimeout(() => {
            console.log(p2);//p2 æ‰§è¡Œäº†å—ï¼Ÿç­”æ¡ˆ-->æ‰§è¡Œäº†
        }, 1000);
      ```

   - catchï¼š`Promise.prototype.catch()` æ–¹æ³•æ˜¯ `.then(null, rejection)` æˆ– `.then(undefined, rejection)`çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ï¼›æ˜¯ä¸ªè¯­æ³•ç³–ï¼Œå…å»é“¾å¼æ“ä½œæ¯ä¸ª `.then` éƒ½è¦å†™ç¬¬äºŒå‚æ•°

     ```js
      var p1 = new Promise((resolve, reject) => {
         // å¦‚æœæˆ‘å…ˆæ‰§è¡Œï¼Œä½ ä»¬éƒ½æ²¡æˆ
         // resolve(1)

         // 1. reject
         reject('å¤±è´¥');
         // 2. è‡ªå®šä¹‰é”™è¯¯
         throw new Error("fail");
         // 3. è¯­æ³•æˆ–è¿è¡Œé”™è¯¯, x æ²¡å£°æ˜
         resolve(x + 1)
         // catch éƒ½ä¼šæ•è·çš„ï¼Œä½†æ˜¯ï¼Œå¦‚æœå…ˆæ‰§è¡Œ resolve çš„è¯ï¼Œé”™è¯¯æ˜¯ä¸ä¼šè¿”å›çš„ï¼Œå›  Promise åªæœ‰ä¸€ä¸ªçŠ¶æ€
      }).then(r=>{
         // è¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåªæœ‰ä¸Šè¿”å›æˆåŠŸçŠ¶æ€ï¼Œæ‰ä¼šæ‰§è¡Œï¼›so è¿™é‡Œä»£ç ä¸ä¼šæ‰§è¡Œ
         console.log(1);
         return Promise.resolve('foo')
      })
      .then(null,
            e => {
               // å¦‚æœæœ‰é“¾å¼æ“ä½œä¸­æœ‰ ç¬¬äºŒå‚æ•°ï¼Œä¼šé”™è¯¯æ‹¦æˆªï¼Œä¸‹é¢çš„ catch ä¸ä¼šæ‰§è¡Œ
               console.log('å¯¹ä¸èµ·ï¼Œæˆ‘æ˜¯å·®äºº! '+e)
            }
      ).catch(e => {
            console.log(e)
      }).then(fucntion(){
        console.log('è¦æ˜¯è¿™é‡Œ then() æ–¹æ³•é‡Œé¢æŠ¥é”™ï¼Œå°±ä¸å‰é¢çš„ catch() æ— å…³äº†ã€‚');
        // æ‰€ä»¥ catch ä¸€èˆ¬æ˜¯å†™åœ¨æœ€åé¢
      })
      ```

   - allï¼šæ–¹æ³•æ˜¯å°†å¤šä¸ª Promise å®ä¾‹ï¼ˆæ•°ç»„å½¢å¼ï¼‰ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚å…¨éƒ¨ Promise `fulfilled` æ‰æˆåŠŸï¼Œæœ‰ä¸€ä¸ª `rejected` å°±æ˜¯å¤±è´¥ã€‚ï¼ˆæ¯”æ…¢æ¨¡å¼ï¼‰ï¼Œå¹¶è¡Œçš„æ¨¡å¼ï¼Œå°†æ‰€æœ‰è¯·æ±‚**ä¸€æ¬¡æ€§å…¨éƒ¨å‘é€å‡ºå»**ï¼Œç„¶åç­‰å¾…æ¥æ”¶åˆ°å…¨éƒ¨ç»“æœåï¼ŒæŒ‰ç…§**é¡ºåº**æ‰“å°å‡ºæ¥è€Œå·²ã€‚

   - raceï¼šå‚æ•° allã€‚åªæœ‰å…¶ä¸­ä¸€ä¸ª**ç‡å…ˆ**æ”¹å˜çŠ¶æ€ï¼Œè¯¥çŠ¶æ€å°±ä¼ é€’ç»™æ–°çš„ Promiseã€‚ï¼ˆæ¯”å¿«æ¨¡å¼ï¼‰

   ```js
    // å®ç° Promise all
    // å†™æ³•ä¸€  é‡ç‚¹å°±æ˜¯è¿”å›ä¸€ä¸ª Promiseï¼Œåœ¨ Promise é‡Œå¤„ç†ï¼ˆåˆ¤æ–­ç»“æœé•¿åº¦ï¼‰å¾ªç¯
    Promise.all2 = function (promises) {
      return new Promise((resolve, reject) => {
        let count = 0, len = promises.length;
        const result = new Array(len);
        for (let i = 0; i < len; i++) {
          promises[i].then(value => {
            count++;
            result[i] = value;
            if (result.length === count) {
              resolve(result);
            }
          }, error => reject(error))
        }
      })
    }
   // å†™æ³•äºŒ
    Promise.all = function (promises) {
      return new Promise((resolve, reject) => {
      let count = promises.length;
      const result = [];
      while (promises.length) {
         promises.shift().then(value => {
            result.push(value);
            if (result.length === count) {
               resolve(result);
            }
         }, error => reject(error))
       }
      })
    }

    let p1 = new Promise((resolve, reject) => {
      setTimeout(function () {
        resolve('1')
      }, 2000)
    })

    let p2 = new Promise((resolve, reject) => {
      setTimeout(function () {
        resolve('2')
      }, 3000)
    })

    let p3 = new Promise((resolve, reject) => {
      setTimeout(function () {
        reject('5')
      }, 3000)
    })

    console.time('cost')
    Promise.all2([p1, p2, p3]).then(data => {
      console.log(data)
      console.timeEnd('cost')
    })

   ```

2. async awaitï¼ˆä½œç”¨ï¼šæŠŠå¼‚æ­¥ä»£ç å†™æˆåŒæ­¥ä»£ç ï¼‰
   async å‡½æ•°è¿”å›ç±»å‹ä¸º Promise å¯¹è±¡ï¼š è¿™æ˜¯å’Œæ™®é€šå‡½æ•°æœ¬è´¨ä¸Šä¸åŒçš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯ä½¿ç”¨æ—¶é‡ç‚¹æ³¨æ„çš„åœ°æ–¹ï¼›

   1. return `new Promise()`;è¿™ä¸ªç¬¦åˆ async å‡½æ•°æœ¬æ„ï¼›
   2. return data;è¿™ä¸ªæ˜¯åŒæ­¥å‡½æ•°çš„å†™æ³•ï¼Œè¿™é‡Œæ˜¯è¦ç‰¹åˆ«æ³¨æ„çš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå…¶å®å°±ç›¸å½“äº `Promise.resolve(data)` ï¼›è¿˜æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä½†æ˜¯åœ¨è°ƒç”¨ async å‡½æ•°çš„åœ°æ–¹é€šè¿‡ç®€å•çš„=æ˜¯æ‹¿ä¸åˆ°è¿™ä¸ª data çš„ï¼Œå› ä¸ºè¿”å›å€¼æ˜¯ä¸€ä¸ªPromise å¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦ç”¨ `.then(data => { })` å‡½æ•°æ‰å¯ä»¥æ‹¿åˆ°è¿™ä¸ª data;
   3. å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œç›¸å½“äºè¿”å›äº† `Promise.resolve(undefined)`;

   await ç­‰åˆ°äº†å®ƒè¦ç­‰çš„ä¸œè¥¿ï¼Œä¸€ä¸ª Promise å¯¹è±¡ï¼Œæˆ–è€…å…¶å®ƒå€¼ï¼Œç„¶åå‘¢ï¼Ÿæˆ‘ä¸å¾—ä¸å…ˆè¯´ï¼Œawait æ˜¯ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºç»„æˆè¡¨è¾¾å¼ï¼Œawait è¡¨è¾¾å¼çš„è¿ç®—ç»“æœå–å†³äºå®ƒç­‰çš„ä¸œè¥¿ã€‚

   å¦‚æœå®ƒç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£ await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿ã€‚

   å¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œawait å°±å¿™èµ·æ¥äº†ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚

   > çœ‹åˆ°ä¸Šé¢çš„é˜»å¡ä¸€è¯ï¼Œå¿ƒæ…Œäº†å§â€¦â€¦æ”¾å¿ƒï¼Œè¿™å°±æ˜¯ await å¿…é¡»ç”¨åœ¨ async å‡½æ•°ä¸­çš„åŸå› ã€‚**async** å‡½æ•°è°ƒç”¨ä¸ä¼šé€ æˆé˜»å¡ï¼Œå®ƒå†…éƒ¨æ‰€æœ‰çš„é˜»å¡éƒ½è¢«å°è£…åœ¨ä¸€ä¸ª Promise å¯¹è±¡ä¸­å¼‚æ­¥æ‰§è¡Œã€‚

   ```js
   (async function(){
      console.log(1)
      const flag = await new Promise(resolve=>{
         console.log(2)
         resolve(3)
         console.log(4)
      })
      console.log(flag)
      // async å†…éƒ¨è¿˜æ˜¯ä¼šé˜»å¡çš„
      // å¾—ç­‰å¾… Promise æ‰§è¡Œåæ‰èƒ½æ‰“å° 5
      console.log(5)
   })() // â†’ 1 2 4 3 5

   // å¤šä¸ª Promise æ€ä¹ˆåŒæ­¥æ‰§è¡Œ
   (async function(){
      // è¿™ç§å†™æ³• ä¼šé€ æˆ é˜»å¡ï¼Œ ç­‰ h1 æ‰§è¡Œå®Œåï¼Œå†æ‰§è¡Œ h2
      // ç¡¬å¯ä»¥è¯´è¿™ä¹Ÿæ˜¯ async await çš„ç¼ºç‚¹å§ã€‚ã€‚ã€‚ å¥½å¤šé¢˜ç›®éƒ½å…¶ä¼˜ç¼ºç‚¹åªèƒ½ç­”è¿™ä¸ªäº†
      let h1 = await p1();
      let h2 = await p2();

      // è¿™ç§å†™æ³• ä¼šåŒæ—¶ æ‰§è¡Œ p1ã€p2
      let h1 = p1();
      let h2 = p2();
      let h1Value= await h1;
      let h2Value= await h2;

      // æˆ–è€… ä¹Ÿæ˜¯ åŒæ—¶ æ‰§è¡Œ p1ã€p2
      let res = await Promise.all([p1,p2]);
   })()
   ```

3. å®ç° trimï¼š `s.replace(/^\s+|\s+$/,'')`

4. JavaScript å¦‚ä½•å®ç°ç»§æ‰¿
   - åŸå‹é“¾ï¼šæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸ªéšå¼åŸå‹ï¼ˆ`__proto__`ï¼‰ï¼ŒæŒ‡å‘å…¶æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆ`prototype`ï¼‰ï¼Œå¹¶ç»§æ‰¿å®ƒå±æ€§ä¸æ–¹æ³•ï¼ŒåŒæ—¶åŸå‹å¯¹è±¡ï¼ˆ`prototype`ï¼‰ä¹Ÿæœ‰éšå¼åŸå‹ï¼Œè¿™æ ·ä¸€å±‚ä¸€å±‚ï¼Œæœ€ç»ˆæŒ‡å‘ nullï¼Œè¿™å°±æ˜¯åŸå‹é“¾ã€‚

      ```js
      function parent(){
         this.PC = 'ç©å®¶å›½åº¦';
      }
      parent.prototype.playDotA= function(){
         console.log('ç¾Šåˆ€èµ›é«˜ï¼');
      }

      function child(name){
         parent.apply(this,arguments);
         this.name =name;
      }

      child.prototype = Object.create(parent.prototype);
      child.prototype.playLOL = function(){
         console.log("7777~");
      }
      const son1 = new child('Tim');
      ```

   - extends å…³é”®å­—

      ```js
         class parent{
            // æ„é€ å‡½æ•°ï¼ˆå®ä¾‹åŒ–å¯¹è±¡æ—¶è°ƒç”¨çš„å‡½æ•°ï¼‰
            constructor(){
               this.PC = 'ç©å®¶å›½åº¦'
            }
            playDotA(){
               console.log('ç¾Šåˆ€èµ›é«˜ï¼')
            }
         }

         class child extends parent{
            constructor(name){
               // super() å°±æ˜¯è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
               super();
               this.name = name;
            }
            playLOL(){
               console.log('777')
            }
         }
         const son2 = new child('Tim');
      ```

5. æ€ä¹ˆå®ç°æ·±æ‹·è´ï¼Œæ·±æµ…æ‹·è´åŒºåˆ«ï¼Ÿ

     - `JSON.parse(JSON.stringify(data))` ç¼ºç‚¹ï¼šdata å¾—ç¬¦åˆ JSON è§„èŒƒï¼›ä¸èƒ½æœ‰ undefinedï¼ˆç›´æ¥åˆ é™¤ï¼‰ï¼Œfunciton(ç›´æ¥åˆ é™¤)ï¼Œå¼•ç”¨ï¼ŒReExpï¼ˆè½¬æ¢æˆäº†ç©ºå¯¹è±¡ï¼‰ï¼ŒDateï¼ˆè½¬æ¢æˆäº†å­—ç¬¦ä¸²ï¼‰ç­‰ï¼Œåªèƒ½å¯¹è±¡ã€æ•°ç»„ã€æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼å’Œ null ã€‚
     - é€’å½’ï¼š
        1. åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯ç›´æ¥è¿”å›å€¼ï¼›
        2. å¦‚æœæ™®é€šå¯¹è±¡åˆ¤æ–­ æ˜¯æ•°ç»„è¿˜æ˜¯æ™®é€šå¯¹è±¡ï¼Œè¿”å›å¯¹è±¡ç»§ç»­é€’å½’

        ```js
        // æ·±
        function deepCopy( value ) {
            // å¤æ‚å¤„ç†
            var target
            //å¦‚æœä¸æ˜¯å¯¹è±¡çš„è¯ç›´æ¥è¿”å›
            if (!typeof value==='object' || value === null) return value;
            switch getType(value){
               case 'Aarry':
                  target=[];
                  break;
               case 'Function':
               // è¿™ç§å†™æ³•åªèƒ½ä¿è¯ ç®­å¤´å‡½æ•° ä¸æŠ¥é”™
                  target = eval(object.toString())
                  break;
               case 'Date':
                  target=new Date(value);
                  break;
               case 'RegExp':
                  target=new RegExp(value)
                  break;
               case 'Object':
                  target = {}
                  break;
               // è¿˜è¦ è€ƒè™‘ Setã€Symbolã€WeakMapã€ç¯ã€‚ã€‚ã€‚
               // ç¯å°±æ˜¯å¯¹è±¡å¾ªç¯å¼•ç”¨ï¼Œå¯¼è‡´è‡ªå·±æˆä¸ºä¸€ä¸ªé—­ç¯ï¼š var a = {}; a.a = a;
               // æ‰€ä»¥ JavaScript çš„æ·±æ‹·è´æ˜¯ä¸ªæ·±å‘ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨ JSON çš„æ–¹æ³•å¤„ç†å°±å·®ä¸å¤šäº†ã€‚
            }

             // ç®€å•å¤„ç†
            if (!typeof value==='object'|| value === null) return value; //å¦‚æœä¸æ˜¯å¯¹è±¡çš„è¯ç›´æ¥è¿”å›
            let target = Array.isArray( value ) ? [] : {} //æ•°ç»„å…¼å®¹
            for (var k in value) {
                 target[k] =deepCopy(value[i]);
            }
            return target;
        }

         function getType(obj){
            return Object.prototype.toString.call(obj).slice(8,-1);
         }

        // æµ…
        function clone(value){
        if (!typeof source==='object') return value;
              let target =  Array.isArray( value ) ? [...value] : {...value};
              return rs;
        }
        ```

   åŒºåˆ«ï¼šæµ…ï¼Œæ”¹å˜åŸå§‹æ•°æ®ä¸€é€šæ”¹å˜ï¼Œæ·±ä¸ä¼š

6. è¿™æ®µä»£ç é‡Œçš„ this æ˜¯ä»€ä¹ˆï¼Ÿ
   - **ç›´æ¥èµ¤è£¸è£¸è°ƒç”¨æ–¹æ³•** `fn()` è¿™ç§æ‰§è¡Œçš„ä»£ç ï¼Œä¸ç®¡æ˜¯åœ¨å…¨å±€è°ƒç”¨ï¼Œè¿˜æ˜¯åœ¨**æ–¹æ³•ä½“å†…**è°ƒç”¨ï¼Œå°±å¯ä»¥ç›´æ¥å½“æˆ `window.fn()`ï¼Œthis å°±æ˜¯ windowï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹å°±æ˜¯ undefinedï¼Œæ€»ç»“å°±æ˜¯ï¼š**ç›´æ¥è°ƒç”¨çš„æ–¹æ³•çš„ this çš„åˆ¤æ–­ï¼Œåœ¨å“ªæ‰§è¡Œå¾ˆé‡è¦ï¼Œè·Ÿä»–åœ¨å“ªå®šä¹‰æ²¡å…³ç³»ï¼**
   - a.b.c.fn() é‡Œé¢çš„ this å°±æ˜¯ a.b.c
   - new F() é‡Œé¢çš„ this å°±æ˜¯æ–°ç”Ÿæˆçš„å®ä¾‹
   - ES6 ç®­å¤´å‡½æ•° this æ˜¯ä¸Šçº§ä½œç”¨åŸŸ this
   - äº‹ä»¶å¯¹è±¡,åœ¨`DOM`äº‹ä»¶ä¸­ä½¿ç”¨`this`ï¼Œ`this`æŒ‡å‘äº†è§¦å‘äº‹ä»¶çš„ `DOM` å…ƒç´ æœ¬èº«

   ```js
    document.addEventListener('xx',function(){
      // this æ˜¯ document
    })
    document.getElementById('div1').addEventListener('xx',function(){
      // this æ˜¯ ID ä¸º div1 å…ƒç´ 
    })

   // é˜¿é‡Œé¢˜
   var a = 4;
   class A{
      a = 10;
      fn(){
         console.log(this.a)
      }
   }
   const b = new A().fn;
   b();

   // è¿™é¢˜çš„æ­£ç¡®ç­”æ¡ˆæ˜¯ æŠ¥é”™ Uncaught TypeError: Cannot read property 'a' of undefined
   // å› ä¸º class é»˜è®¤ç±»ä½“æ˜¯ user strice, ä¸¥æ ¼æ¨¡å¼ã€‚ã€‚ã€‚
   ```

   æ­£ç¡®å‚è€ƒï¼š[https://zhuanlan.zhihu.com/p/23804247](https://zhuanlan.zhihu.com/p/23804247)

7. æœ‰ç‚¹å˜æ€çš„é¢è¯•é¢˜

   ```js
   function Foo(){
      getName = function(){
         console.log(1)
      }
      return this;
   }
   Foo.getName = function(){
      console.log(2);
   }
   Foo.prototype.getName = function(){
      console.log(3);
   }
   Foo.prototype.getAge = () =>{
      console.log(8);
   }
   var getName = function(){
      console.log(4);
   }
   function getName(){
      console.log(5);
   }
   Foo.getName();
   getName();
   Foo().getName();
   getName();
   new Foo.getName();
   new Foo().getName();
   new new Foo().getName();
   new new Foo().getAget();
   ```

   å…ˆå˜é‡æå‡ å‡½æ•°ä½“æå‡
   `Foo = function...;  getName = func â†’ 5`
   å†ä»£ç æ‰§è¡Œ
   `getName â†’ 4` è¦†ç›– `getName â†’ 5`
   æ‰“å°ï¼š
   - `Foo.getName()` â†’ **2**
   - `getName()` â†’ **4**
   - `Foo().getName()` æ˜¯å…ˆæ‰§è¡Œ `Foo()`ï¼ŒFoo å†…éƒ¨ this æ˜¯ windowï¼Œä»£ç å†æ‰§è¡Œï¼Œæ—¢ window ä¸‹çš„ `getName()` â†’ 1ï¼Œæ¥ç€ return thisï¼Œå†`.getName()`ï¼Œå³è¾“å‡º **1**ï¼›
   - `getName()` â†’ **1**
   - `new Foo` æ˜¯æ— å‚æ•°åˆ—è¡¨ newï¼Œ`new Foo()` æ˜¯æœ‰å‚æ•°åˆ—è¡¨ newï¼ŒåŒºåˆ«åœ¨äºæ‰§è¡Œçš„ä¼˜å…ˆçº§
   å‚è€ƒï¼š[https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/**Operator_Precedence**](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)

     - `new Foo.getName()` å…¶ä¸­ `new Foo` çš„ä¼˜å…ˆçº§æ˜¯ 18ï¼Œ`Foo.getName()` ä¼˜å…ˆçº§æ˜¯ 19ï¼Œæ‰€ä»¥å°±ç­‰åŒäº `new function(){ console.log(2) }`ï¼Œæ—¢è¾“å‡º **2**
     - `new Foo().getName()` å…¶ä¸­ `new Foo()` çš„ä¼˜å…ˆçº§æ˜¯ 19ï¼Œ`Foo.getName()` ä¼˜å…ˆçº§ä¹Ÿæ˜¯ 19,ä»å·¦åˆ°å³æ‰§è¡Œï¼Œæ³¨æ„ï¼ŒFoo æ–¹æ³•ä½“å†… getName å‰æ—  `this`ï¼Œæ‰€ä»¥è°ƒç”¨ prototype ä¸Š `getName()` è¾“å‡º **3**
     - `new new Foo().getName()` å’Œä¸Šé¢ä¸€æ ·ï¼Œæœ€åç­‰äºæ‰§è¡Œ `new func â†’ 3`ï¼Œè¾“å‡º **3**
     - `new new Foo().getAget()` æŠ¥é”™ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½å®ä¾‹åŒ–ã€‚ã€‚ã€‚

8. ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ï¼Œæ„é€ å‡½æ•°å¯ä»¥ä½¿ç”¨ new ç”Ÿæˆå®ä¾‹ï¼Œé‚£ä¹ˆç®­å¤´å‡½æ•°å¯ä»¥å—ï¼Œä¸ºä»€ä¹ˆ
   - åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å°æ‹¬å·å¯çœç•¥,åªæœ‰ä¸€è¡Œ return æ˜¯å¤§æ‹¬å·å¯çœç•¥,å¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹ éœ€è¦ () åŒ…è£¹
   - æ²¡æœ‰ this,å®ƒåªä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿ this,(ä½¿ç”¨ call / apply ç­‰ä»»ä½•æ–¹æ³•éƒ½æ— æ³•æ”¹å˜ this çš„æŒ‡å‘)
   - æ²¡æœ‰ arguments (å¯ç”¨ ...args å±•å¼€(å‰©ä½™)é¢„ç®—ç¬¦ä»£æ›¿)
   - ä¸è¢« new æ‰§è¡Œï¼Œå› ä¸ºæ²¡æœ‰thisã€prototype

9. applyï¼Œcallï¼Œbind çš„åŒºåˆ«

   - åˆçº§å›ç­”ï¼ˆ4 åˆ†ï¼‰
   è¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯æ”¹å˜äº†å½“å‰å‡½æ•°çš„ this æŒ‡å‘ã€‚
     - apply æ¥æ”¶çš„æ˜¯æ•°ç»„ï¼Œå¹¶ä¼šç«‹å³æ‰§è¡Œ
     - call æ¥æ”¶çš„æ˜¯ç”¨é€—å·éš”å¼€çš„å‚æ•°ï¼Œå¹¶ä¼šç«‹å³æ‰§è¡Œ
     - bind æ¥æ”¶çš„æ˜¯ç”¨é€—å·éš”å¼€çš„å‚æ•°ï¼Œä½†æ˜¯ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°

   æ­¤æ—¶æˆ‘çš„å†…å¿ƒ OSï¼šâ€œå¦¥å¦¥çš„ï¼å¿ƒé‡Œç¾æ»‹æ»‹ï¼Œæ­£å¥½æ˜¯æˆ‘å‡†å¤‡çš„é¢˜ç›®ï¼Œä¸‹ä¸€é¢˜æŠŠâ€ï¼
   butï¼Œæ­¤æ—¶é¢è¯•å®˜å†æ¬¡å‘é—®ï¼šâ€œä½ èƒ½è®²è®²å®ƒä»¬ä¸‰ä¸ªçš„å®ç°åŸç†å—ï¼Ÿèƒ½è‡ªå·±å®ç°ä¸€ä¸‹è¿™ä¸‰ä¸ªå‡½æ•°å—ï¼Ÿâ€
   æˆ‘ï¼š.....

   - è¿›é˜¶å›ç­”ï¼ˆ8åˆ†ï¼‰
   æˆ‘ä»¬é‡ç‚¹è®²ä¸€ä¸‹ call çš„ç”¨æ³•å’Œæºç å®ç°ï¼Œå…¶ä½™çš„ apply å’Œ bind é“ç†ä¸€æ ·ã€‚

     - call
     call çš„åŸºæœ¬ç”¨æ³•

     ```js
     function add(c, d) {
        console.log(this.a + this.b + c + d);
     }
     var o = {a: 1, b: 2};
     add.call(o, 3, 4);
     ```

     å¦‚æœæˆ‘ä»¬ä¸ç”¨ callï¼Œæ€ä¹ˆå®ç°è¿™æ ·çš„æ•ˆæœï¼Ÿ

     ```js
     function add(c, d) {
        console.log(this.a + this.b + c + d);
     }
     var o = {a: 1, b: 2};
     // add.call(o, 3, 4);
     o.add = add;
     o.add(3, 4);
     delete o.add;
     ```

     æˆ‘ä»¬èƒ½çœ‹åˆ°å°±ä¸‰æ­¥ï¼š

     1. æŠŠå‡½æ•°å˜æˆ object çš„ä¸€ä¸ªå±æ€§ã€‚
     2. æ‰§è¡Œè¿™ä¸ª object ä¸‹é¢çš„å‡½æ•°ã€‚
     3. åˆ é™¤è¿™ä¸ª object ä¸‹çš„è¿™ä¸ªå‡½æ•°ã€‚

     å…¶å®å°±æ˜¯åˆ©ç”¨äº†ï¼Œobject çš„å±æ€§çš„ this æŒ‡å‘è¯¥ object çš„ç‰¹æ€§æ¥å®ç°çš„å“¦ã€‚

     æˆ‘ä»¬å°è¯•ç”¨æºç å®ç°ä¸€ä¸‹

     ```js
     Function.prototype.call(context, ...args)
     {
        context = context || window;  // context å¦‚æœæ˜¯ nullï¼Œåˆ™æŒ‡å‘ window
        context.fn = this;
        var result = context.fn(...args);
        delete context.fn;
        return result;
     }
     ```

     - apply
     apply å’Œ call æ˜¯ä¸€ä¸ªé“ç†

     ```js
     Function.prototype.apply(context, args)
     {
        context = context || window;
        context.fn = this;
        var result = context.fn(...args);
        delete context.fn;
        return result;
     }
     ```

     - bind
     bind æœ‰ä¸€ç‚¹ç‰¹æ®Šï¼Œä½†æ˜¯é“ç†éƒ½æ˜¯ä¸€ä¸ªé“ç†ã€‚

     æˆ‘ä»¬å…ˆå†™ä¸ªä¾‹å­çœ‹çœ‹ bind æ€ä¹ˆç”¨

     ```js
     function add(c, d) {
        console.log(this.a + this.b + c + d);
     }
     var o = {a: 1, b: 2};
     var bindAdd = add.bind(o, 3);
     bindAdd(4);
     ```

     æ¥çœ‹çœ‹æºç æ€ä¹ˆå®ç°

     ```js
     Function.prototype.bind = function (context, ...rest) {
        var self = this;
        return function F(...args) {
           return self.apply(context, rest.concat(args)); // ä¸¤æ¬¡çš„å‚æ•° restï¼Œargs åˆå¹¶åˆ°ä¸€èµ·ï¼Œä½œä¸ºå‡½æ•°çš„å‚æ•°
        }
     }
     ```

   æ­¤æ—¶æˆ‘çš„å†…å¿ƒ OSï¼šâ€œå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œæˆ‘å¥½æœºæ™ºï¼Œå‡†å¤‡çš„å¤ªå…¨äº†ï¼â€ï¼
   é¢è¯•å®˜å†…å¿ƒ OSï¼šâ€œè¿˜è¡Œå§ï¼Œä¸è¿‡ä¸è¦é«˜å…´çš„å¤ªæ—©äº†ã€‚â€
   é¢è¯•å®˜é—®ï¼šä½ èƒ½å‘Šè¯‰ä¸‹é¢ç¨‹åºçš„è¾“å‡ºæ˜¯ä»€ä¹ˆå—ï¼Ÿ

   ```js
   function add(c, d) {
   console.log(this.a + this.b + c + d);
   }
   var o = {a: 1, b: 2};

   var bindAdd = add.bind(o, 3);
   new bindAdd(4);
   ```

   - å†æ¬¡è¿›é˜¶ï¼ˆ9 åˆ†ï¼‰
   æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ç¨‹åºä»…ä»…æ˜¯å¢åŠ äº†ä¸€ä¸ª `new`ï¼Œä½†æ˜¯å®ƒçš„è¾“å‡ºå˜æˆäº† `NaN`ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¿™æ˜¯å› ä¸ºï¼š" bind è¿”å›çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œbind æ—¶æŒ‡å®šçš„ this å€¼ä¼šå¤±æ•ˆï¼Œä½†ä¼ å…¥çš„å‚æ•°ä¾ç„¶ç”Ÿæ•ˆ"

   æˆ‘ä»¬å†æ¥ä¸°å¯Œä¸‹ `bind` çš„å®ç°

   ```js
   Function.prototype.bind = function (context, ...rest) {
      var self = this;

      return function F(...args) {
         /*å¦‚æœæ˜¯ new çš„ï¼Œåˆ™ä¸è¦ä¹‹å‰çš„ context å•¦*/
         if (this instanceof F) {
               return self(...rest, ...args);
         }
         return self.apply(context, rest.concat(args));
      }
   }
   ```

10. ä»€ä¹ˆæ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°ã€è‡ªæ‰§è¡Œå‡½æ•°ï¼Ÿä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ–è€…é¢˜ç›®æ˜¯ æ¨¡æ‹Ÿä¸€ä¸ªå‡º let

   ```js
   (function (){
      var name
   })()

   !!!!!!!function (){
      var name
   }()

   ~function (){
      var name
   }()
   ```

   ç›®çš„ï¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬å‡½æ•°ä½œç”¨åŸŸï¼Œé˜²æ­¢æ±¡æŸ“å…¨å±€å˜é‡ï¼Œé¿å…å˜é‡å†²çªã€‚

   ES 6 æ–°è¯­æ³•
   {
      let  name
   }

11. é—­åŒ…ï¼Œç”¨é€”ï¼Ÿ **å†…éƒ¨å‡½æ•°è¢«å¤–éƒ¨å‡½æ•°ä»¥å¤–çš„å˜é‡å¼•ç”¨æ—¶**âœ¨ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œå‡½æ•°æ‰§è¡Œå½¢æˆç§æœ‰ä½œç”¨åŸŸï¼Œä¿å­˜ï¼Œä¿æŠ¤å˜é‡ä¸å—å…¨å±€ä½œç”¨åŸŸå½±å“ã€‚

   ```js
   function foo() { // å¤–éƒ¨å‡½æ•°
      var num  = 10;
      return function () { // å†…éƒ¨å‡½æ•°
         var age= 20;
         console.log(++num);
         console.log(++age);
      }
   }
   var f = foo(); // ä»¥å¤–çš„å˜é‡
   f(); //11 21
   f(); //12 21

    // [æ’è£…](https://zhuanlan.zhihu.com/p/54460682)
   function withHookAfter (originalFn, hookFn) {
      return function () {
         var output = originalFn.apply(this, arguments)
         hookFn.apply(this, arguments)
         return output
      }
   }
   ```

   ç”¨é€”ï¼šå°è£…ï¼ˆä¿å­˜ï¼‰ã€éšè—å˜é‡ï¼Œå¦‚æ¸¸æˆè¡€é‡ï¼Œä¸èƒ½ç›´æ¥è®¿é—®ï¼Œå¾—é—´æ¥è®¿é—®
   åº”ç”¨ï¼š
      - æ¨¡å—

      ```js
         // ä¸€ä¸ªæ¨¡å—åº”è¯¥å…·æœ‰ç§æœ‰å±æ€§ã€ç§æœ‰æ–¹æ³•å’Œå…¬æœ‰å±æ€§ã€å…¬æœ‰æ–¹æ³•ã€‚
         // è€Œé—­åŒ…èƒ½å¾ˆå¥½çš„å°†æ¨¡å—çš„å…¬æœ‰å±æ€§ã€æ–¹æ³•æš´éœ²å‡ºæ¥ã€‚
         var myModule = (function (window) {
            let name = "echo";
            function getName() {
               return name;
            }
            return {
               name,
               getName
            }
         })(window);

         console.log( myModule.name ); // echo
         console.log( myModule.getName() ); // echo
      ```

      - å»¶æ—¶å™¨(setTimeout)ã€è®¡æ•°å™¨(setInterval)
      è¿™é‡Œç®€å•å†™ä¸€ä¸ªå¸¸è§çš„å…³äºé—­åŒ…çš„é¢è¯•é¢˜ã€‚

      ```js
      for( var i = 0; i < 5; i++ ) {
         (function(j){
            setTimeout(() => {console.log(j)}, 1000)
         })(i)
      }
      ```

12. ç«‹å³æ‰§è¡Œå‡½æ•°å’Œé—­åŒ…çš„åŒºåˆ«ï¼š
   - ç«‹å³æ‰§è¡Œå‡½æ•°å’Œé—­åŒ…æ²¡æœ‰å…³ç³»ï¼Œè™½ç„¶ä¸¤è€…ä¼šç»å¸¸ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œä½†ä¸¤è€…æœ‰æœ¬è´¨çš„ä¸åŒ
   - ç«‹å³æ‰§è¡Œå‡½æ•°åªæ˜¯å‡½æ•°çš„ä¸€ç§è°ƒç”¨æ–¹å¼ï¼Œåªæ˜¯å£°æ˜å®Œä¹‹åç«‹å³æ‰§è¡Œï¼Œè¿™ç±»å‡½æ•°ä¸€èˆ¬éƒ½åªæ˜¯è°ƒç”¨ä¸€æ¬¡ï¼ˆå¯ç”¨äºå•ä¾‹å¯¹è±¡ä¸Šï¼‰ï¼Œè°ƒç”¨å®Œä¹‹åä¼šç«‹å³é”€æ¯ï¼Œä¸ä¼šå ç”¨å†…å­˜
   - é—­åŒ…åˆ™ä¸»è¦æ˜¯**è®©å¤–éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å†…éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸ**ä¿å­˜ä¿æŠ¤å˜é‡ï¼Œä¹Ÿå‡å°‘äº†å…¨å±€å˜é‡çš„ä½¿ç”¨ï¼Œä¿è¯äº†å†…éƒ¨å˜é‡çš„å®‰å…¨ï¼Œä½†å› è¢«å¼•ç”¨çš„å†…éƒ¨å˜é‡ä¸èƒ½è¢«é”€æ¯ï¼Œå¢å¤§äº†å†…å­˜æ¶ˆè€—ï¼Œä½¿ç”¨ä¸å½“æ˜“é€ æˆå†…å­˜æ³„éœ²

13. å¦‚ä½•ç¿»è½¬ DOMï¼Ÿå†’æ³¡å’Œæ•è·æœºåˆ¶ï¼Œä»¥åŠå®é™…åº”ç”¨ï¼Ÿ

   å†’æ³¡å’Œæ•è·æœºåˆ¶ï¼šå°±æ˜¯ DOM æ¨¡å‹ï¼› äº‹ä»¶æµï¼šæ•è·ï¼ˆé˜¶æ®µï¼ˆ`window` â†’ `document` â†’ `html` â†’`body`â†’ç›®æ ‡å…ƒç´ ï¼‰ï¼‰â†’ ç›®æ ‡é˜¶æ®µ â†’ å†’æ³¡ï¼ˆé˜¶æ®µï¼‰

   åº”ç”¨ï¼š**äº‹ä»¶ä»£ç†**ï¼ˆå§”æ‰˜ï¼‰ â†’ ul ä»£ç† li çš„ç‚¹å‡»ï¼Œé€šè¿‡ target.enevt å¾—åˆ°å…·ä½“é‚£ä¸ª li ç‚¹å‡»çš„ï¼›ä¼˜ç‚¹æ˜¯å¯ä»¥**ç›‘å¬åŠ¨æ€ç”Ÿæˆçš„å…ƒç´ **ï¼Œçœç›‘å¬å™¨ï¼Œçœå†…å­˜ï¼Œç¼ºç‚¹ï¼šå¾—åˆ¤åˆ«ç›‘å¬çš„å…ƒç´ æ˜¯ä¸æ˜¯æ­£ç¡®ã€‚

   å¦‚æœç‚¹å‡»å…ƒç´ æ°å¥½æ˜¯ç›‘å¬å…ƒç´ ï¼Œé‚£ä¹ˆæ•è·ä¸ãƒ¼å®šåœ¨å†’æ³¡ä¹‹å‰ï¼Œ[é¡ºåºæ˜¯ç”±ç›‘å¬é¡ºåºå†³å®šçš„](https://jsbin.com/raqakog/1/edit?js,console,output)

   Eventå¯¹è±¡å¸¸ç”¨åº”ç”¨
   - `event.preventDefault()`ï¼šé˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆaæ ‡ç­¾ï¼šè®¾ç½®äº†clickäº‹ä»¶ï¼Œé˜»æ­¢å…¶é»˜è®¤è·³è½¬ï¼‰â­
   - `event.stopPropagation()`ï¼šé˜»æ­¢å†’æ³¡ stopPropagation â­
   - `event.stoplmmediatePropagetion()`:äº‹ä»¶ä¼˜å…ˆçº§è®¾ç½®
   - `event.currentTarget`: å½“å‰ç»‘å®šäº‹ä»¶å…ƒç´ ï¼Œçˆ¶çº§å…ƒç´  ï¼ˆäº‹ä»¶ä»£ç†ï¼‰ â­
   - `event.target`ï¼šè·å–å…·ä½“ç‚¹å‡»å…ƒç´  â­

14. ç§»åŠ¨ç«¯çš„è§¦æ‘¸äº‹ä»¶äº†è§£å—ï¼Ÿ

- touchstart è§¦æ‘¸å¼€å§‹ï¼Œå¤šç‚¹è§¦æ§ï¼Œåé¢çš„æ‰‹æŒ‡åŒæ ·ä¼šè§¦å‘; touchmoveï¼šæ¥è§¦ç‚¹æ”¹å˜ï¼Œæ»‘åŠ¨æ—¶ï¼›touchendï¼šè§¦æ‘¸ç»“æŸï¼Œæ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼›touchcancelï¼šè§¦æ‘¸è¢«å–æ¶ˆï¼Œå½“ç³»ç»Ÿåœæ­¢è·Ÿè¸ªè§¦æ‘¸çš„æ—¶å€™è§¦å‘
- æ¨¡æ‹Ÿ swipe äº‹ä»¶ï¼šè®°å½•ä¸¤æ¬¡ touchmove çš„ä½ç½®å·®ï¼Œå¦‚æœåä¸€æ¬¡åœ¨å‰ä¸€æ¬¡çš„å³è¾¹ï¼Œè¯´æ˜å‘å³æ»‘äº†ã€‚

1. æœ‰ä»¥ä¸‹ 3 ä¸ªåˆ¤æ–­æ•°ç»„çš„æ–¹æ³•ï¼Œè¯·åˆ†åˆ«ä»‹ç»å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£

   > Object.prototype.toString.call() ã€ instanceof ä»¥åŠ Array.isArray()

   1. Object.prototype.toString.call() è¿”å› [object Type],å¸¸ç”¨äºåˆ¤æ–­æµè§ˆå™¨å†…ç½®å¯¹è±¡
   2. instanceof æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ‰¾åˆ°ç±»å‹çš„ prototypeã€‚
   3. [Array.isArray()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray) æ˜¯ES5æ–°å¢çš„æ–¹æ³•ï¼Œ ç”¨æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ï¼Œä¼˜äº instanceofï¼Œå¯ä»¥æ£€æµ‹æ¥è‡ª iframe çš„æ•°ç»„

1. forEachã€for in ã€ for ofä¸‰è€…çš„åŒºåˆ«
   1. forEachï¼šå¯¹æ•°ç»„ã€dom åˆ—è¡¨é›†åˆï¼ˆä¼ªæ•°ç»„ï¼‰éå†ï¼Œä¸èƒ½ä½¿ç”¨ returnã€break ç­‰ä¸­æ–­å¾ªç¯ï¼Œé™¤é try catch å¼‚å¸¸ä¸­æ–­
   2. for in: éå†å¯¹è±¡è¿”å›çš„å¯¹è±¡çš„ key å€¼ï¼Œéå†æ•°ç»„è¿”å›çš„æ•°ç»„çš„ä¸‹æ ‡ï¼›éå†å¯¹è±¡æœ¬èº«çš„æ‰€æœ‰å¯æšä¸¾ï¼ˆenumerableï¼‰å±æ€§ï¼Œä»¥åŠå¯¹è±¡ä»å…¶æ„é€ å‡½æ•°åŸå‹ä¸­ç»§æ‰¿çš„å±æ€§ã€‚
   3. for ofï¼šå¾ªç¯éå†å¯è¿­ä»£å¯¹è±¡ï¼Œ`String`ã€`Array`ã€ä¼ªæ•°ç»„ã€`Map` å’Œ `Set`ï¼Œå®ƒä»¬çš„åŸå‹å¯¹è±¡éƒ½å®ç°äº† @@iterator æ–¹æ³•ã€‚

1. äº‹ä»¶ï¼ŒEventBus
   Dom å…ƒç´ çš„ on äº‹ä»¶å’Œ addEventListener() æ–¹æ³•çš„åŒºåˆ«ï¼šå› ä¸º on äº‹ä»¶æ˜¯ä¸ªå±æ€§ï¼Œæ‰€ä»¥åªèƒ½èµ‹å€¼ï¼Œèµ‹å€¼å°±ä¼šæ›¿æ¢æ‰ï¼›ç®€å•è¯´ï¼Œon åªèƒ½ç»‘å®šä¸€æ¬¡äº‹ä»¶ï¼Œ addEventListener() å¯ä»¥å¯¹ä¸€ä¸ªäº‹ä»¶æ‰§è¡Œå¤šä¸ªæ–¹æ³•ã€‚

   ```js
   function EventBus(){
      this._events = {};
   }
   EventBus.prototype.$on = function(eventName,func){
      if(this._events[eventName]==null){
         this._events[eventName]=[func];
      }
      else{
         this._events[eventName].push(func);
      }
   }

   EventBus.prototype.$emit = function(eventName){
      const callbacks = this._events[eventName];
      if(callbacks){ return; }
      for (let i = 0; i < callbacks.length; i++) {
        callbacks[i].apply(this, Array.from(arguments).slice(1));
      }
   }
   EventBus.prototype.$off = function(eventName,func){
      let callbacks = this._events[eventid];
      if (!callbacks) return;
      for (let i = 0; i < callbacks.length; i++) {
        if (callbacks[i] === func) {
          callbacks.splice(i, 1);
        }
      }
   }
   const fun = function (params0, params1) {
      console.log(`hello world ${params0} ${params1}`)
    }
    const fun1 = () => {
      console.log('hello fuck the world')
    }

    const bus = new EventBus();
    bus.$on('sayFun', fun);
    bus.$on('sayFun', fun1);

    bus.$emit('sayFun', 'è¿™ä¸ªä¸–ç•Œ', 'ä¼šå¥½å—ï¼Ÿ');

    bus.$off('sayFun', fun);

    bus.$emit('sayFun');
   ```

1. ä½•æ—¶ä½¿ç”¨ `==`:åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ `null` or `undefined` æ—¶ï¼ŒjQuery æ¨èçš„å†™æ³•

    ```js
    if (obj.a == null) {
     // è¿™é‡Œç›¸å½“äº obj.a === null || obj.a === undefined çš„ç®€å†™å½¢å¼
    }
    null åªå’Œ undefined ç›¸äº’æ¯”è¾ƒæ—¶ä¸º trueï¼Œå…¶ä»–éƒ½ä¸º false
    null == undefined â†’ true
    null === null â†’ true
    null === undefined â†’ false
    è™½ç„¶ null è½¬æ¢æ•°å­—ä¸º 0ï¼Œä½† null == 0 æ˜¯ä¸ä¼šè½¬æ¢çš„ â†’ false â­ï¸
    undefined è½¬æ¢æ•°å­—ä¸º NaN
    ```

### Vue

1. æ¸è¿›å¼å¼€å‘ï¼šæ­ç§¯æœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œç”¨æœ€å°ã€æœ€å¿«çš„æˆæœ¬ä¸€æ­¥æ­¥æ­å»ºé¡¹ç›®ï¼Œå¦‚ä½¿ç”¨ Vueï¼Œä¸å¿…ä¸€å¼€å§‹å°±ç”¨ Vue æ‰€æœ‰çš„å…¨å®¶æ¡¶ï¼Œæ ¹æ®åœºæ™¯ï¼Œåˆç†ä½¿ç”¨ Routerã€Vuex ç­‰ã€‚Vue æ˜¯ä¸€ä¸ªä»¥æ•°æ®å“åº”å¼ä¸ºæ ¸å¿ƒçš„ä¸€ä¸ªæ¡†æ¶ï¼Œæ ¸å¿ƒæ€æƒ³æŠŠæ‰€æœ‰æ•°æ®æ”¾å…¥ä¸€ä¸ªå¯¹è±¡é‡Œé¢ï¼Œä½ å»æ“ä½œè¿™ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å»æ”¹å˜æ•°æ®ï¼Œç›‘å¬è¿™ä¸ªæ”¹å˜å»æ”¹å˜ UIã€‚

1. è§£é‡Šä¸€ä¸‹ MVVM

æ²¡æœ‰å‰åç«¯æ¦‚å¿µæ—¶å€™ï¼Œå¼€å‘é¡µé¢æ˜¯åå°ä»£ç é€»è¾‘ã€htmlã€Cssã€JavaScript éƒ½æ˜¯åœ¨åŒä¸€ä¸ªé¡µé¢ï¼Œå¥½å¤„æ˜¯å¼€å‘ç®€å•å¿«æ·ï¼Œç¼ºç‚¹åæœŸå¾ˆéš¾ç»´æŠ¤ã€‚ä¸ºäº†å¼€å‘æ›´ä¾¿æ·ã€åæœŸç»´æŠ¤ç®€å•ã€å‰åç«¯èŒè´£æ¸…æ™°ï¼Œä¾¿è¡ç”Ÿå‡º MVC å¼€å‘æ¨¡å¼å’Œæ¡†æ¶ï¼Œå‰ç«¯å±•ç¤ºä»¥æ¨¡æ¿çš„å½¢å¼å‡ºç°ã€‚
ä¸šåŠ¡æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨åˆ†å±‚ï¼ŒèŒè´£æ¸…æ™°ï¼Œä»£ç æ˜“ç»´æŠ¤ã€‚éšç€ ajax æŠ€æœ¯å‘å±•ï¼Œå‰åç«¯çš„èŒè´£å°±æ›´åŠ æ¸…æ™°äº†ã€‚å‰ç«¯ä¸ä½†è¦è´Ÿè´£æ•°æ®å±•ç¤ºï¼Œä¹Ÿè¦è´Ÿè´£æ•°æ®æ•´åˆä¸åç«¯äº¤äº’ï¼Œéšç€å‰ç«¯çš„ä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼Œå‰ç«¯å€Ÿé‰´äº† MVCï¼Œå‘å±•å‡ºäº† MVPï¼ŒMVVM æ¶æ„ã€‚

- è¿™ä¸‰è€…éƒ½æ˜¯æ¡†æ¶æ¨¡å¼ï¼Œå®ƒä»¬è®¾è®¡çš„ç›®æ ‡éƒ½æ˜¯ä¸ºäº†**è§£å†³ Model å’Œ View çš„è€¦åˆ**é—®é¢˜ã€‚
- MVC æ¨¡å¼å‡ºç°è¾ƒæ—©ä¸»è¦åº”ç”¨åœ¨åç«¯ï¼Œå¦‚.NET MVCç­‰ï¼Œåœ¨å‰ç«¯é¢†åŸŸçš„æ—©æœŸä¹Ÿæœ‰åº”ç”¨ï¼Œå¦‚ Backbone.jsï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯åˆ†å±‚æ¸…æ™°ï¼Œç¼ºç‚¹æ˜¯æ•°æ®æµæ··ä¹±ï¼Œçµæ´»æ€§å¸¦æ¥çš„ç»´æŠ¤æ€§é—®é¢˜ï¼Œå¾ˆå¤šå¼€å‘è€…éƒ½ä¼šåœ¨ view ä¸­å†™ä¸€äº›é€»è¾‘ä»£ç ï¼Œé€æ¸å°±å¯¼è‡´ view ä¸­çš„ä»£ç è¶Šæ¥è¶Šåºå¤§ï¼Œè€Œ controller å˜çš„è¶Šæ¥è¶Šå•è–„ã€‚
- MVP æ¨¡å¼åœ¨æ˜¯ MVC çš„è¿›åŒ–å½¢å¼ï¼ŒPresenter ä½œä¸ºä¸­é—´å±‚è´Ÿè´£ M V é€šä¿¡ï¼Œè§£æ±ºäº†ä¸¤è€…è€¦åˆé—®é¢˜ï¼Œä½† P å±‚è¿‡äºè‡ƒè‚¿ä¼šå¯¼è‡´ç»´æŠ¤é—®é¢˜ã€‚
- MVVM æ¨¡å¼åœ¨å‰ç«¯é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼Œå®ƒä¸ä»…è§£æ±º MV è€¦åˆé—®é¢˜ï¼Œè¿˜åŒæ—¶è§£æ±ºäº†ç»´æŠ¤ä¸¤è€…æ˜ å°„å…³ç³»çš„å¤§é‡ç¹æ‚ä»£ç å’Œ DOM æ“ä½œä»£ç ï¼Œåœ¨æé«˜å¼€å‘æ•ˆç‡ã€å¯è¯»æ€§åŒæ—¶è¿˜ä¿æŒäº†ä¼˜è¶Šçš„æ€§èƒ½è¡¨ç°ã€‚

- View è§†å›¾æ˜¯æŒ‡ç”¨æˆ·çœ‹åˆ°å¹¶ä¸ä¹‹äº¤äº’çš„ç•Œé¢ã€‚æ¯”å¦‚ç”± html å…ƒç´ ç»„æˆçš„ç½‘é¡µç•Œé¢ï¼Œæˆ–è€…è½¯ä»¶çš„å®¢æˆ·ç«¯ç•Œé¢ã€‚MVC çš„å¥½å¤„ä¹‹ä¸€åœ¨äºå®ƒèƒ½ä¸ºåº”ç”¨ç¨‹åºå¤„ç†å¾ˆå¤šä¸åŒçš„è§†å›¾ã€‚åœ¨è§†å›¾ä¸­å…¶å®æ²¡æœ‰çœŸæ­£çš„å¤„ç†å‘ç”Ÿï¼Œå®ƒåªæ˜¯ä½œä¸ºä¸€ç§è¾“å‡ºæ•°æ®å¹¶å…è®¸ç”¨æˆ·æ“çºµçš„æ–¹å¼ã€‚
- model æ¨¡å‹æ˜¯æŒ‡æ¨¡å‹è¡¨ç¤ºä¸šåŠ¡è§„åˆ™ã€‚åœ¨ MVC çš„ä¸‰ä¸ªéƒ¨ä»¶ä¸­ï¼Œæ¨¡å‹æ‹¥æœ‰æœ€å¤šçš„å¤„ç†ä»»åŠ¡ã€‚è¢«æ¨¡å‹è¿”å›çš„æ•°æ®æ˜¯ä¸­ç«‹çš„ï¼Œæ¨¡å‹ä¸æ•°æ®æ ¼å¼æ— å…³ï¼Œè¿™æ ·ä¸€ä¸ªæ¨¡å‹èƒ½ä¸ºå¤šä¸ªè§†å›¾æä¾›æ•°æ®ï¼Œç”±äºåº”ç”¨äºæ¨¡å‹çš„ä»£ç åªéœ€å†™ä¸€æ¬¡å°±å¯ä»¥è¢«å¤šä¸ªè§†å›¾é‡ç”¨ï¼Œæ‰€ä»¥å‡å°‘äº†ä»£ç çš„é‡å¤æ€§ã€‚
- controller æ§åˆ¶å™¨æ˜¯æŒ‡æ¥å—ç”¨æˆ·çš„è¾“å…¥å¹¶è°ƒç”¨æ¨¡å‹å’Œè§†å›¾å»å®Œæˆç”¨æˆ·çš„éœ€æ±‚ï¼Œæ§åˆ¶å™¨æœ¬èº«ä¸è¾“å‡ºä»»ä½•ä¸œè¥¿å’Œåšä»»ä½•å¤„ç†ã€‚å®ƒåªæ˜¯æ¥æ”¶è¯·æ±‚å¹¶å†³å®šè°ƒç”¨å“ªä¸ªæ¨¡å‹æ„ä»¶å»å¤„ç†è¯·æ±‚ï¼Œç„¶åå†ç¡®å®šç”¨å“ªä¸ªè§†å›¾æ¥æ˜¾ç¤ºè¿”å›çš„æ•°æ®ã€‚

- **View ä¼ é€æŒ‡ä»¤åˆ° Controller**
- **Controller æ¥æ”¶æŒ‡ä»¤ã€æ•°æ®ä¼ ç»™ Model**
- **Model è¿›è¡Œé€»è¾‘åˆ¤æ–­ã€æ•°æ®å­˜å‚¨ï¼Œæ ¹æ®ä¸šåŠ¡é€»è¾‘é€‰æ‹©ä¸åŒçš„ Viewï¼Œå°†ç»“æœè¿”å›ç»™ç”¨æˆ·ï¼›ç”¨æˆ·å¾—åˆ°åé¦ˆï¼Œæ‰€æœ‰é€šä¿¡éƒ½æ˜¯å•å‘çš„ã€‚**

![](https://cdn.jsdelivr.net/gh/w3ctim/picBed/blog/notes/20200526174732.png)

- å‰ç«¯æ—©èµ· MVC æ˜¯æŒ‡Model,View,Controller,æ˜¯ä¸€ç§ä»£ç æ¶æ„æ¨¡å¼ï¼Œå°†ä»£ç åˆ†æˆä¸‰å—ã€‚
  1. Modelï¼šç”¨äºå¤„ç†æ•°æ®çš„æ“ä½œï¼ŒåŒ…æ‹¬æ•°æ®é€»è¾‘ã€æ•°æ®è¯·æ±‚ä¸æ•°æ®å­˜å‚¨ç­‰åŠŸèƒ½ã€‚
  2. Viewï¼šç”¨äºå±•ç¤ºä»£ç åœ¨é¡µé¢å“ªä¸€å—ï¼ŒæŸ¥æ‰¾æ ‡ç­¾ï¼Œè´Ÿè´£ç”¨æˆ·ç•Œé¢ã€‚
  3. Controllerï¼šè´Ÿè´£å¤„ç† View äº‹ä»¶å¹¶æ›´æ–° Modelï¼Œä¹Ÿè´Ÿè´£ç›‘å¬ Model çš„å˜åŒ–å¹¶æ›´æ–° Viewã€‚ Controller æ§åˆ¶å…¶ä»–æ‰€æœ‰æµç¨‹ã€‚

   ```js
   var model={  // æ•°æ®æ“ä½œ
      init:function(){},   // åˆå§‹åŒ–
      fetch:function(){}, // æ¥æ”¶æ•°æ®
      save:function(){}   // å‚¨å­˜æ•°æ®
   }
   var view=document.querySelector('#xxx')  // æŸ¥æ‰¾é¡µé¢ä¸­çš„æ ‡ç­¾
   var controller={
         view:null,
         model:null,
         init:function(view,model){  // åˆå§‹åŒ–æ§åˆ¶å™¨
            this.view=view
            this.model=model
            this.model.init()
            this.bindEvent()
   }
   bindEvent:function(){}  // äº‹ä»¶å‡½æ•°
   }
   ```

æ—©æœŸæ²¡æœ‰å‰åç«¯æ¦‚å¿µæ—¶å€™ï¼Œå¼€å‘é¡µé¢æ˜¯åå°ä»£ç é€»è¾‘ã€htmlã€Cssã€JavaScript éƒ½æ˜¯åœ¨åŒä¸€ä¸ªé¡µé¢ï¼Œå¥½å¤„æ˜¯å¼€å‘ç®€å•å¿«æ·ï¼Œç¼ºç‚¹åæœŸå¾ˆéš¾ç»´æŠ¤ï¼› åæ¥å°±æœ‰äº† MVC å¼€å‘æ¨¡å¼ï¼Œåˆ†åˆ«ä¸º view è§†å›¾å±‚æŒ‡ç”¨æˆ·çœ‹åˆ°å¹¶ä¸ä¹‹äº¤äº’çš„ç•Œé¢ï¼ŒModelï¼šç”¨äºå¤„ç†æ•°æ®çš„é€»è¾‘æ“ä½œã€å­˜å‚¨ç­‰åŠŸèƒ½ï¼Œcontrollerï¼šæŒ‡æ¥å—ç”¨æˆ·çš„è¾“å…¥å¹¶è°ƒç”¨æ¨¡å‹å’Œè§†å›¾å»å®Œæˆç”¨æˆ·çš„éœ€æ±‚ã€‚è¿™æ ·åˆ†å±‚èŒè´£æ¸…æ™°ï¼Œä»£ç æ˜“ç»´æŠ¤å¾ˆå¥½çš„**è§£å†³ Model å’Œ View çš„è€¦åˆ**ã€‚éšç€ ajax æŠ€æœ¯å‘å±•ï¼Œå‰åç«¯çš„èŒè´£å°±æ›´åŠ æ¸…æ™°äº†ï¼Œå‰ç«¯å¤„ç†çš„äº‹æƒ…è¶Šæ¥è¶Šå¤šï¼Œå‰ç«¯å°±å€Ÿé‰´ MVC æ¨¡å¼å¼€å‘ï¼Œä½†ç°å®å‰ç«¯ä½¿ç”¨ MVC æ¨¡å¼å¼€å‘å¾ˆä¸çµæ´»ï¼Œå¾ˆç¹çï¼Œä¾‹å¦‚ä¸€äº‹ä»¶æ“ä½œï¼Œéƒ½è¿›è¿‡è¿™æ ·çš„æµç¨‹å°±ä¸é‚£ä¹ˆä¾¿æ·äº†ã€‚åæ¥å°±æœ‰ MVVM æ¨¡å¼ï¼ŒMVVM ä¸ MVC æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š**ViewModel å®ç°æ•°æ®å“åº”å¼æœºåˆ¶ï¼ŒView å’Œ Model çš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“ Model çš„å±æ€§æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨æ“ä½œ Dom å…ƒç´ ï¼Œæ¥æ”¹å˜ View çš„æ˜¾ç¤ºï¼Œè€Œæ˜¯æ”¹å˜å±æ€§åè¯¥å±æ€§å¯¹åº” View å±‚æ˜¾ç¤ºä¼šè‡ªåŠ¨æ›´æ”¹ï¼Œè¿™æ ·å°±å¾ˆå¥½è§£å†³ MV è€¦åˆé—®é¢˜**

[å‰ç«¯MVC/MVVMæ¨¡å¼ç‰¹ç‚¹åŠåŒºåˆ«](https://blog.csdn.net/qq_36228442/article/details/79470408)

MVC ç›®çš„æ˜¯è®©å·¥ç¨‹å¸ˆ å…³æ³¨ Model å±‚ï¼Œè€Œä¸æ˜¯ UIã€‚

1. v-if å’Œ v-forçš„ä¼˜å…ˆçº§
v-for ä¼˜å…ˆçº§è·Ÿé«˜ï¼Œè¿™æ„å‘³ç€ v-if å°†åˆ†åˆ«é‡å¤è¿è¡Œäºæ¯ä¸ª v-for å¾ªç¯ä¸­ã€‚æ‰€ä»¥ï¼Œä¸æ¨èåŒæ—¶ä½¿ç”¨ï¼Œåº”è¯¥ä½¿ç”¨è®¡ç®—å±æ€§å»é™¤ä¸è¦æ¸²æŸ“çš„é¡¹

1. `Object.defineProperty()` ä¸æ”¯æŒæ•°ç»„,è°ƒç”¨åŸç”Ÿæ–¹æ³•æ“ä½œæ•°ç»„æ˜¯ä¸ä¼šè§¦å‘è§†å›¾çš„, Vue å°±æŠŠæ•°ç»„ä¸Šä¸ä¼šè¿”å›æ–°æ•°ç»„çš„ 7 ä¸ªåŸå‹æ–¹æ³•ï¼ˆpushã€popã€shiftã€unshiftã€spliceã€sortã€reverseï¼‰éƒ½é‡å†™äº†ï¼Œ7ä¸ª[ç§°ä¸ºå˜å¼‚æ–¹æ³•](https://v1-cn.vuejs.org/guide/list.html#%E6%95%B0%E7%BB%84%E5%8F%98%E5%8A%A8%E6%A3%80%E6%B5%8B). å…¶ä»–çš„éå˜å¼‚æ–¹æ³•å°±æ˜¯è¿”å›ä¸€ä¸ªçš„æ•°ç»„ï¼Œç”¨æ–°çš„æ•°ç»„æ›¿æ¢æ—§æ•°ç»„è§†å›¾å°±æ›´æ–°äº†ï¼š

   ```js
   example1.items = example1.items.filter(function (item) {
    return item.message.match(/Foo/)
   })
   ```

â­ ä½†æ— æ³•æ“æ§æ•°ç»„çš„`length`,ä¹Ÿä¸èƒ½ç”¨ç´¢å¼•ä¿®æ”¹ï¼Œå¦‚æœéœ€è¦ç”¨æ•°ç»„ä¸‹æ ‡ä¿®æ”¹æ•°ç»„å¹¶å®ç°å“åº”å¼æ•°æ®å˜åŒ–ï¼ŒVue æä¾›äº† `$set()` åŠ `$remove()` è§‚å¯Ÿæ•°ç»„æ–¹æ³•ï¼ˆæ³¨æ„é `$delete` æ–¹æ³•ï¼‰ï¼Œå°±ä¸æ¨è spliceã€‚

   ```js
   // ä¸ `example1.items[0] = ...` ç›¸åŒï¼Œä½†æ˜¯èƒ½è§¦å‘è§†å›¾æ›´æ–°
   example1.items.$set(0, { childMsg: 'Changed!'})
   ```

  Vue3 ä½¿ç”¨`Proxy` æ¥æ›¿æ¢`Object.defineProperty()`
   `Proxy`ç›´æ¥å¯ä»¥åŠ«æŒæ•´ä¸ªå¯¹è±¡,å¹¶è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡,ä¸ç®¡æ˜¯æ“ä½œä¾¿åˆ©ç¨‹åº¦è¿˜æ˜¯åº•å±‚åŠŸèƒ½ä¸Šéƒ½è¿œå¼ºäº`Object.defineProperty`ã€‚
   `Proxy`å¯ä»¥ç›´æ¥ç›‘å¬æ•°ç»„çš„å˜åŒ–

1. ç»„ä»¶ data ä¸ºä»€ä¹ˆæ˜¯ä¸ªæ–¹æ³•ï¼Œæ ¹ç»„ä»¶ä¸éœ€è¦ï¼šç»„ä»¶æ˜¯æœ‰å¯èƒ½å¤ç”¨çš„ï¼Œä½¿ç”¨æ–¹æ³•è¿”å›å¯¹è±¡æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡åœ°å€ï¼Œå¦‚æœä½¿ç”¨ä¸€ä¸ª data ä¼šé€ æˆæ±¡æŸ“ï¼›æ ¹ç»„ä»¶æ˜¯å•ä¾‹çš„ã€‚

1. è™šæ‹Ÿ DOM å®ç°ç›®çš„ï¼ŒåŸç†ï¼Ÿè™šæ‹Ÿ DOM çš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ 3 éƒ¨åˆ†ï¼š

vDOM æœ€åˆçš„ç›®çš„ï¼Œå°±æ˜¯æ›´å¥½çš„è·¨å¹³å°ï¼Œæ¯”å¦‚ Node.js å°±æ²¡æœ‰ DOMï¼Œå¦‚æœæƒ³å®ç° SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰ï¼Œé‚£ä¹ˆä¸€ä¸ªæ–¹å¼å°±æ˜¯å€ŸåŠ© VDOM å®ç°ã€‚
åŸç”Ÿ JS æ“ä½œ DOM æ—¶ï¼Œæµè§ˆå™¨ä¼šä»æ„å»º DOM æ ‘å¼€å§‹ä»å¤´åˆ°å°¾æ‰§è¡Œä¸€éæµç¨‹ã€‚åœ¨ä¸€æ¬¡æ“ä½œä¸­ï¼Œæˆ‘éœ€è¦æ›´æ–° 10 ä¸ª DOM èŠ‚ç‚¹ï¼Œæµè§ˆå™¨æ”¶åˆ°ç¬¬ä¸€ä¸ª DOM è¯·æ±‚åå¹¶ä¸çŸ¥é“è¿˜æœ‰ 9 æ¬¡æ›´æ–°æ“ä½œï¼Œå› æ­¤ä¼šé©¬ä¸Šæ‰§è¡Œæµç¨‹ï¼Œæœ€ç»ˆæ‰§è¡Œ 10 æ¬¡ã€‚

**VDOM æ˜¯é€‚åˆé¢‘ç¹éƒ¨åˆ†ä¿®æ”¹ dom çš„åœºæ™¯ï¼Œçº¯æ’å…¥å’Œåˆ é™¤å¯èƒ½æ€§èƒ½ä¸å¦‚ rawã€‚**

- **ç”¨ js æ¨¡æ‹Ÿ DOM æ ‘ï¼Œå¯¹çœŸå® DOM è¿›è¡ŒæŠ½è±¡**ï¼›æœ‰äº†è™šæ‹Ÿ DOM å°±ä¸ç”¨æ“ä½œ
- diff ç®—æ³• â€” æ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚ï¼›**æ·±åº¦ä¼˜å…ˆï¼ŒåŒå±‚æ¯”è¾ƒ**ï¼›å…ˆä¸€çº§ä¸€çº§æ¯”è¾ƒçš„å­èŠ‚ç‚¹ï¼Œå¦‚æœå“ªå±‚æ–°å­èŠ‚ç‚¹æ²¡æœ‰æ•°æ®ï¼Œå¯¹åº”çš„æ—§å±‚çº§æœ‰æ•°æ®ï¼Œå°±ç›´æ¥åˆ é™¤ã€‚
- patch ç®—æ³• â€” å°†ä¸¤ä¸ªè™šæ‹Ÿ DOM å¯¹è±¡çš„å·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ã€‚

1. key çš„ä½œç”¨ï¼škey æ˜¯ä¸º Vue ä¸­ vnode çš„å”¯ä¸€æ ‡è®°ï¼Œé€šè¿‡è¿™ä¸ª keyï¼Œæˆ‘ä»¬çš„ diff æ“ä½œå¯ä»¥**æ›´å‡†ç¡®ã€æ›´å¿«é€Ÿ**ã€‚ä¸å¸¦ key åŒä¸€çº§ï¼Œåœ¨ sameNode å‡½æ•° å¯èƒ½ä¼šè¦†ç›–ã€‚

1. minxinï¼šæ··å…¥ï¼Œè§£å†³ä»£ç å¤ç”¨é—®é¢˜ï¼›æ…ç”¨ï¼Œä¸åŒçš„ `Mixin` ä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çªï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤

1. Vue.use()ï¼šä½¿ç”¨æ’ä»¶ï¼ŒVue çš„æ’ä»¶å¿…é¡»æä¾› `install(Vue,options)` æ–¹æ³•ï¼Œæ’ä»¶çš„å†…å®¹å¯ä»¥æ˜¯å…¨å±€æ–¹æ³•ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œè¿‡æ»¤å™¨ï¼Œæ·»åŠ  Vue åŸå‹ï¼ˆå®ä¾‹ï¼‰ä¸Šæ–¹æ³•ï¼Œæˆ–è€…ä¸€ä¸ªåº“ã€‚

1. ç»„ä»¶åŒ–ç†è§£ï¼šæ˜¯ç‹¬ç«‹ã€å¯å¤ç”¨çš„**ä»£ç ç»„ç»‡å•å…ƒ**ã€‚åˆç†çš„åˆ’åˆ†ç»„ä»¶ï¼Œæœ‰åŠ©äºæé«˜åº”ç”¨æ€§èƒ½ï¼Œéµå¾ªå•å‘æ•°æ®æµçš„åŸåˆ™ã€‚

1. æ¨¡å—åŒ–ç†è§£ï¼š**ç³»ç»Ÿ**é€»è¾‘æ¨¡å—ï¼Œç›¸å¯¹äº**ä¸šåŠ¡**ã€‚

1. å•å‘æ•°æ®æµï¼š**çˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œï¼Œç›®çš„ï¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–æ”¹å˜çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£**ã€‚
é¢å¤–çš„ï¼Œæ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„ prop éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚
è¿™æ„å‘³ç€ä½ ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜ propã€‚å¦‚æœä½ è¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚
å­ç»„ä»¶æƒ³ä¿®æ”¹æ—¶ï¼Œåªèƒ½é€šè¿‡ $emit æ´¾å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åˆ°åï¼Œç”±çˆ¶ç»„ä»¶ä¿®æ”¹ã€‚

1. computed å’Œ watch çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯ï¼Ÿ

   - computedï¼š æ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶å®ƒå±æ€§å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å®ƒä¾èµ–çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ï¼Œä¸‹ä¸€æ¬¡è·å– computed çš„å€¼æ—¶æ‰ä¼šé‡æ–°è®¡ç®— computed çš„å€¼ï¼›é»˜è®¤åªæœ‰ getterï¼Œ[ä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª setter](https://vuex.vuejs.org/zh/guide/forms.html)
   - watchï¼š æ›´å¤šçš„æ˜¯ã€Œè§‚å¯Ÿã€çš„ä½œç”¨ï¼Œç±»ä¼¼äºæŸäº›æ•°æ®çš„ç›‘å¬å›è°ƒ ï¼Œæ¯å½“ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒè¿›è¡Œåç»­æ“ä½œï¼›

   è¿ç”¨åœºæ™¯ï¼š
   å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œ**æ•°å€¼è®¡ç®—**ï¼Œå¹¶ä¸”ä¾èµ–äºå…¶å®ƒæ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨ computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶ï¼Œéƒ½è¦é‡æ–°è®¡ç®—ï¼›

   å½“æˆ‘ä»¬éœ€è¦åœ¨**æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶**ï¼Œåº”è¯¥ä½¿ç”¨ watchï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ ( è®¿é—®ä¸€ä¸ª API )ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚

1. Vueä¼˜åŒ–ï¼š
   1. è·¯ç”±æ‡’åŠ è½½ï¼Œç³»ç»Ÿæ‰“åŒ…æ—¶å€™ä¹Ÿå›ç¼©å‡ä½“ç§¯
   2. keep-alive ç¼“å­˜é¡µé¢
   3. é¢‘ç¹æ˜¾ç¤ºæˆ–éšè—çš„ç”¨ v-show
   4. v-for éå†åŒæ—¶é¿å…ä½¿ç”¨ v-if

1. è·¯ç”±å¯¼èˆªå®ˆå«æœ‰å“ªäº›
   - å…¨å±€å‰ç½®å®ˆå«ï¼šæ¯æ¬¡è·³è½¬å‰æ‰§è¡Œå¯¼èˆªå®ˆå«æ–¹æ³•ï¼Œ`beforeEach(to,from,next())` toï¼šè¦è·³è½¬ç›®æ ‡é¡µï¼Œfromï¼šreferrer,`next()` æ–¹æ³•æ˜¯æ‰§è¡Œè·³è½¬åŠ¨ä½œï¼Œelement-admin åœ¨è·³è½¬å®ˆå«é‡Œå…ˆåˆ¤æ–­ç”¨æˆ·æƒé™,ä»£ç è·¯ç”±é…ç½® metaï¼ˆå…ƒä¿¡æ¯ï¼Œå…¶ä»–ä¿¡æ¯ï¼‰é‡Œæ·»åŠ å¯ä»¥è®¿é—®çš„è§’è‰² IDï¼Œè·å–æ‹¥æœ‰çš„è·¯ç”±åœ°å€åŠ¨æ€æ·»åŠ åˆ°è·¯ç”±å¯¹è±¡ï¼Œ`router.addRoutes([...routes])`
   - è·¯ç”±ç‹¬äº«çš„å®ˆå«ï¼š`beforeEnter(to,from,next())` å°±æ˜¯å•ç‹¬ä¸€ä¸ªè·¯ç”±é…ç½®é‡Œ
   - ç»„ä»¶å†…çš„å®ˆå«ï¼š

      ```js
      const Foo = {
         template: `...`,
         beforeRouteEnter (to, from, next) {
            // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢« confirm å‰è°ƒç”¨
            // ä¸ï¼èƒ½ï¼è·å–ç»„ä»¶å®ä¾‹ `this`
            // å› ä¸ºå½“å®ˆå«æ‰§è¡Œå‰ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»º
         },
         beforeRouteUpdate (to, from, next) {
            // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
            // ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ /foo/:idï¼Œåœ¨ /foo/1 å’Œ /foo/2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œ
            // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ Foo ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚
            // å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
         },
         beforeRouteLeave (to, from, next) {
            // å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
            // å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
         }
      }
      ```

   - å…¨å±€åç½®é’©å­: `router.afterEach((to, from)=>...)` ä¸å®ˆå«ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªé’©å­ä¸ä¼šæ¥å— next å‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜å¯¼èˆªæœ¬èº«

1. éƒ½æ˜¯ç”±æµè§ˆå™¨çš„æ¥å£å®ç°çš„ï¼Œhash è·¯ç”±ï¼šwindow.onhashchange å’Œ history è·¯ç”±ï¼šhtml5 æ–°çš„ API history.pushState() ã€replayState() äºŒè€…ä»…æ”¹å˜ç½‘å€,ç½‘é¡µä¸ä¼šçœŸçš„è·³è½¬,ä¹Ÿä¸ä¼šè·å–åˆ°æ–°çš„å†…å®¹,æœ¬è´¨ä¸Šç½‘é¡µè¿˜åœç•™åœ¨åŸé¡µé¢! åªæ˜¯ pushState æ·»åŠ ä¸€æ¡ history è®°å½•ï¼ŒreplayState æ˜¯ä¿®æ”¹å½“å‰ historyï¼Œä¸ä¼šæ–°æ·»åŠ è®°å½•ï¼ŒäºŒè€…éƒ½ä¸ä¼šè§¦å‘ onpopstate äº‹ä»¶ï¼Œéœ€æ‰‹åŠ¨æ“ä½œè§¦å‘ï¼ˆ`history.go(num)`ï¼‰ï¼›æ³¨æ„ï¼ŒåŒä¸€ä¸ªæ–‡æ¡£ï¼ˆé¡µé¢ï¼‰çš„ï¼Œä½¿ç”¨ history.go() æ˜¯ä¸ä¼šåˆ·æ–°é¡µé¢çš„ã€‚ pushState æ¯”èµ· hash çš„ä¼˜ç‚¹ï¼š
   - pushState è®¾ç½®çš„æ–° URL ä¸å½“å‰çš„ URL ä¸€è‡´ä¹Ÿä¼šæ¸²æŸ“ï¼ˆåˆ·æ–°ï¼‰é¡µé¢ï¼Œhash ä¸ä¼š
   - æ²¡æœ‰ä¸‘é™‹çš„ `#`,ç¬¬ä¸‰æ–¹åº”ç”¨å¯èƒ½ä¸æ”¯æŒ `#`
   - pushState() é€šè¿‡ stateObject å‚æ•°å¯ä»¥æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°è®°å½•ä¸­ï¼›è€Œ hash åªå¯æ·»åŠ çŸ­å­—ç¬¦ä¸²ï¼›
   ç¼ºç‚¹ï¼š
   - æ€•åˆ·æ–°ï¼Œæ‰‹åŠ¨åˆ·æ–°ï¼ˆé‡å¯ï¼‰æµè§ˆå™¨æ˜¯ä¼šè¯·æ±‚åå°çš„ï¼Œå¦‚æœè¯·æ±‚çš„åœ°å€ï¼ˆè®¾ç½®ä¸€ä¸ªå­èŠ‚ç‚¹ï¼‰æ˜¯åå°æ²¡æœ‰å¯¹åº”çš„è·¯ç”±ï¼Œåˆ™ 404ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦åå°é…ç½®å¦‚æœæ˜¯åå°æ‰¾ä¸åˆ°ï¼Œå°±é‡å®šå‘å‰ç«¯çš„é¦–é¡µ
1. ä½•æ—¶ä½¿ç”¨ beforeDestory
   1. å¯èƒ½åœ¨å½“å‰é¡µé¢ä¸­ä½¿ç”¨äº† `$on` æ–¹æ³•ï¼Œé‚£éœ€è¦åœ¨ç»„ä»¶é”€æ¯å‰è§£ç»‘ã€‚
   2. æ¸…é™¤è‡ªå·±å®šä¹‰çš„å®šæ—¶å™¨
   3. è§£é™¤äº‹ä»¶çš„ç»‘å®š `scroll` `mousemove` ....

1. Vuex
   æä¾›ä¸€ä¸ª Store ä»“åº“ï¼ˆæ ¸å¿ƒï¼‰ï¼Œé‡Œé¢å¯ä»¥åˆ† modules æ”¾ storeï¼Œstore é‡Œå­˜å‚¨ stateï¼ˆçŠ¶æ€ï¼Œæ•°æ®ï¼‰ï¼›å› ä¸ºæœ‰å¯èƒ½å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€ï¼Œç›´æ¥ä¿®æ”¹çŠ¶æ€æ˜¯å¾ˆéš¾è¿½è¸ªå“ªä¸ªç»„ä»¶å˜æ›´çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¿®æ”¹çŠ¶æ€å¿…é¡»ä½¿ç”¨ mutations é‡Œæ³¨å†Œçš„æ–¹æ³•ï¼Œå¤–éƒ¨ç»„ä»¶åœ¨ä½¿ç”¨ `commit('å…·ä½“ mutations é‡Œæ³¨å†Œçš„æ–¹æ³•å','å‚æ•°...')`, æ˜“äºé—®é¢˜è¿½è¸ªä»¥åŠæâ¾¼é«˜ä»£ç å¯ç»´æŠ¤æ€§ã€‚

   Getter å¯ä»¥å¯¹ Store ä¸­å·²æœ‰çš„æ•°æ®åŠ å·¥å¤„ç†ä¹‹åå½¢æˆæ–°çš„æ•°æ®ï¼Œåªæ˜¯èµ·åˆ°åŒ…è£…æ•°æ®ç”¨ä½œï¼Œä¸ä¼šä¿®æ”¹ä»»ä½•æ•°æ®ï¼Œç±»ä¼¼ Vue çš„è®¡ç®—å±æ€§ã€‚

   ç°åœ¨æƒ³è±¡ï¼Œæˆ‘ä»¬æ­£åœ¨ debug ä¸€ä¸ª app å¹¶ä¸”è§‚å¯Ÿ devtool ä¸­çš„ mutation æ—¥å¿—ã€‚æ¯ä¸€æ¡ mutation è¢«è®°å½•ï¼Œdevtools éƒ½éœ€è¦æ•æ‰åˆ°å‰ä¸€çŠ¶æ€å’Œåä¸€çŠ¶æ€çš„å¿«ç…§ã€‚ç„¶è€Œï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ mutation ä¸­çš„å¼‚æ­¥å‡½æ•°ä¸­çš„å›è°ƒè®©è¿™ä¸å¯èƒ½å®Œæˆï¼šå› ä¸ºå½“ mutation è§¦å‘çš„æ—¶å€™ï¼Œå›è°ƒå‡½æ•°è¿˜æ²¡æœ‰è¢«è°ƒç”¨ï¼Œdevtools ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å›è°ƒå‡½æ•°å®é™…ä¸Šè¢«è°ƒç”¨â€”â€”å®è´¨ä¸Šä»»ä½•åœ¨å›è°ƒå‡½æ•°ä¸­è¿›è¡Œçš„çŠ¶æ€çš„æ”¹å˜éƒ½æ˜¯ä¸å¯è¿½è¸ªçš„ã€‚

   æ¯ä¸ª mutation æ‰§è¡Œå®Œæˆåéƒ½ä¼šå¯¹åº”åˆ°ä¸€ä¸ªæ–°çš„çŠ¶æ€å˜æ›´ï¼Œè¿™æ · devtools å°±å¯ä»¥æ‰“ä¸ªå¿«ç…§å­˜ä¸‹æ¥ï¼Œç„¶åå°±å¯ä»¥å®ç° time-travel äº†ã€‚å¦‚æœ mutation æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œå°±æ²¡æœ‰åŠæ³•çŸ¥é“çŠ¶æ€æ˜¯ä½•æ—¶æ›´æ–°çš„ï¼Œæ— æ³•å¾ˆå¥½çš„è¿›è¡ŒçŠ¶æ€çš„è¿½è¸ªï¼Œç»™è°ƒè¯•å¸¦æ¥å›°éš¾ã€‚

   ```js
   // å¯ä½¿ç”¨ vuex æä¾› mapStateã€mapGetters å‡½æ•°å¯ä»¥æ˜ å°„åˆ°å½“å‰ç»„ä»¶çš„ computed, mapMutationsã€mapAations å‡½æ•°ï¼Œæ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„ methods å‡½æ•°
   import { mapState, mapMutations, mapAations, mapGetters} from 'vuex'
   computed:{
    ...mapState(['count']),
    ...mapGetters(['shouNum'])
   },
   methods:{
      ...mapMutations(['add','addN']),
      ...mapAations(['addSync']),
      // å¯ä»¥åœ¨ç»„ä»¶ä¸­ç›´æ¥è°ƒç”¨ addã€addNã€addSyncï¼Œå¯ä»¥å†å°è£…æ–¹æ³•
      btn2Handle(){
         this.addN(2)
         this.addSync()
      }
   }
   ```

   ä½¿ç”¨ computed å±æ€§ v-model ç»‘å®š input æ—¶ï¼Œ[æ³¨æ„å¾—ä½¿ç”¨å¸¦æœ‰ setter çš„åŒå‘ç»‘å®šè®¡ç®—å±æ€§](https://vuex.vuejs.org/zh/guide/forms.html)ã€‚

1. Vue æºç ï¼š

new Vue()ï¼Œåšäº†ä»€ä¹ˆï¼ŒVue å°±æ˜¯ä¸€ä¸ªç±»

```js
// instance/index.js
function Vue(options){ this._init(options) }

initMixin(options)

// instance/init.js ä¸€å †çš„åˆå§‹åŒ–å·¥ä½œ
let uid = 0;
/*initMixin å°±åšäº†ä¸€ä»¶äº‹æƒ…ï¼Œåœ¨ Vue çš„åŸå‹ä¸Šå¢åŠ  _init æ–¹æ³•ï¼Œæ„é€  Vue å®ä¾‹çš„æ—¶å€™ä¼šè°ƒç”¨è¿™ä¸ª _init æ–¹æ³•æ¥åˆå§‹åŒ– Vue å®ä¾‹*/
export function initMixin(){
  Vue.prototype._inti=function(options?object){
     const vm = this;
     vm.uid = uid++; // å®šä¹‰ uid
     // åˆå¹¶ options
     vm.$options = margeOptions(resolveConstructorOptions(vm.constrctor))
    /*åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ*/
    initLifecycle(vm)
    /*åˆå§‹åŒ–äº‹ä»¶*/
    initEvents(vm)
    /*åˆå§‹åŒ– render*/
    initRender(vm)
    /*è°ƒç”¨ beforeCreate é’©å­å‡½æ•°å¹¶ä¸”è§¦å‘ beforeCreate é’©å­äº‹ä»¶*/
    callHook(vm, 'beforeCreate')
    initInjections(vm) // resolve injections before data/props
    /*åˆå§‹åŒ– propsã€methodsã€dataã€computed ä¸ watch
     * å…¶ä»–æ–¹æ³•èƒ½ç›´æ¥è·å– this.data çš„å€¼ï¼ŒinitData æ–¹æ³•å†…å°† data ä¸Šé¢çš„å±æ€§ä»£ç†åˆ°äº† vm å®ä¾‹ä¸Š proxy(vm, `_data`, keys[i])
     */
    initState(vm)
    initProvide(vm) // resolve provide after data/props
    /*è°ƒç”¨ created é’©å­å‡½æ•°å¹¶ä¸”è§¦å‘ created é’©å­äº‹ä»¶*/
    callHook(vm, 'created')

    if (vm.$options.el) {
      /*æŒ‚è½½ç»„ä»¶*/
      vm.$mount(vm.$options.el)
    }
  }
}
```

1. æŒ‚è½½ç»„ä»¶
2. å¦‚æœæœ‰è‡ªå®šä¹‰ render å‡½æ•°å°±æ˜¯ç”¨è‡ªå®šä¹‰çš„ï¼Œæ²¡æœ‰å°±æ ¹æ® template è°ƒç”¨ parse ç”Ÿæˆ AST è¯­æ³•æ ‘ï¼ˆparse æ­£åˆ™ç­‰æ–¹å¼è§£æ template æ¨¡æ¿ä¸­çš„æŒ‡ä»¤ã€classã€styleç­‰æ•°æ®ï¼Œå½¢æˆASTè¯­æ³•æ ‘ï¼‰ä¼˜åŒ– ASTï¼Œå³å¯¹ AST èŠ‚ç‚¹è¿›è¡Œé™æ€èŠ‚ç‚¹æˆ–é™æ€æ ¹èŠ‚ç‚¹çš„åˆ¤æ–­ï¼Œä¾¿äºä¹‹å patch åˆ¤æ–­ï¼Œå†æ ¹æ®è¯­æ³•æ ‘å¾—åˆ°çš„ render å‡½æ•°,å¦‚æœ template ä¸å­˜åœ¨çš„å°±å– el çš„ outerHTML ç”Ÿæˆ AST è¯­æ³•æ ‘ã€‚ã€‚ã€‚
3. render å‡½æ•°æœ€ç»ˆæ˜¯é€šè¿‡æ‰§è¡ŒÂ createElementÂ æ–¹æ³•å¹¶è¿”å›çš„Â vnode
4. _updateÂ æ–¹æ³•çš„ä½œç”¨æ˜¯æŠŠ VNode æ¸²æŸ“æˆçœŸå®çš„ DOMï¼Œå®ƒè¢«è°ƒç”¨çš„æ—¶æœºæœ‰ 2 ä¸ªï¼Œä¸€ä¸ªæ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æ›´æ–°çš„æ—¶å€™ï¼›

## æ€§èƒ½ä¼˜åŒ–

1. æµè§ˆå™¨çš„æ¸²æŸ“åŸç†æ˜¯ä¸€å®šä¼šè¢«é—®åˆ°çš„ï¼Ÿ

2. æµè§ˆå™¨è¾“å…¥ä¸€ä¸ª url ä¹‹åçš„è¿‡ç¨‹ï¼Œä»¥åŠè¿‡ç¨‹ä¸­åº”ç”¨äº†å“ªäº›ç¼“å­˜ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ

3. script æ ‡ç­¾å’Œ link æ ‡ç­¾çš„å…ˆåé¡ºåºå¯¹é¡µé¢åŠ è½½çš„å½±å“ï¼Ÿ

4. async å’Œ defer çš„åŒºåˆ«ï¼Ÿ
     - éƒ½æ˜¯å¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½æ—¶ä¸ä¼šé˜»å¡ DOM æ¸²æŸ“ï¼›
     - deferï¼šæ˜¯åœ¨ HTML è§£æå®Œä¹‹åæ‰ä¼šæ‰§è¡Œ,å¦‚æœå¤šä¸ª,æŒ‰ç…§åŠ è½½çš„é¡ºåºä¾æ¬¡æ‰§è¡Œ
     - asyncï¼šæ˜¯ JS è„šæœ¬åŠ è½½å®Œæˆä¹‹åç«‹å³æ‰§è¡Œ,å¦‚æœè¿™æ˜¯ HTML è¿˜æœªæ¥å¸å®Œä¼šé˜»å¡æ¸²æŸ“ï¼Œå¦‚æœæ˜¯å¤šä¸ª,æ‰§è¡Œé¡ºåºå’ŒåŠ è½½é¡ºåºæ— å…³

## è®¡ç®—æœºç½‘ç»œ

1. è§£é‡Š TCP/IP çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Ÿ

   ä¸‰æ¬¡æ¡æ‰‹æ˜¯å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯**å‡è®©å¯¹æ–¹**çŸ¥é“è‡ªå·±æœ‰æ¥æ”¶å’Œå‘é€èƒ½åŠ›æœ€å°æ¬¡æ•°ï¼›ä¸‰æ¬¡æ˜¯æœ€å°‘çš„å®‰å…¨æ¬¡æ•°ï¼Œä¸¤æ¬¡ä¸å®‰å…¨ï¼Œå››æ¬¡æµªè´¹èµ„æºã€‚

   ç¬¬ä¸€æ¬¡å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯çŸ¥é“å®¢æˆ·ç«¯å‘é€çš„èƒ½åŠ›ï¼Œ
   ç¬¬äºŒæ¬¡æœåŠ¡ç«¯å‘é€æ¶ˆæ¯åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥çŸ¥é“æœåŠ¡ç«¯æœ‰**å‘é€å’Œæ¥å—**èƒ½åŠ›ï¼Œ
   ç¬¬ä¸‰æ¬¡å®¢æˆ·ç«¯å†å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°ï¼Œå°±å¯ä»¥ç¡®å®šåŒæ–¹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›æ²¡æœ‰é—®é¢˜ï¼›

   å…¶ä¸­ï¼Œä¸ºäº†ä¿è¯åç»­çš„æ¡æ‰‹æ˜¯ä¸ºäº†åº”ç­”ä¸Šä¸€ä¸ªæ¡æ‰‹ï¼Œæ¯æ¬¡æ¡æ‰‹éƒ½ä¼šå¸¦ä¸€ä¸ªæ ‡è¯† seqï¼Œåç»­çš„ACKéƒ½ä¼šå¯¹è¿™ä¸ªseqè¿›è¡ŒåŠ ä¸€æ¥è¿›è¡Œç¡®è®¤ã€‚

   å››æ¬¡æŒ¥æ‰‹ï¼šTCP æ˜¯å…¨åŒå·¥ä¿¡é“ï¼Œå°±æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å»ºç«‹ä¸¤æ¡é€šé“ï¼Œé€šé“1:å®¢æˆ·ç«¯çš„è¾“å‡ºè¿æ¥æœåŠ¡ç«¯çš„è¾“å…¥ï¼›é€šé“2:å®¢æˆ·ç«¯çš„è¾“å…¥è¿æ¥æœåŠ¡ç«¯çš„è¾“å‡ºã€‚ä¸¤ä¸ªé€šé“å¯ä»¥åŒæ—¶å·¥ä½œï¼šå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¿¡å·çš„åŒæ—¶æœåŠ¡ç«¯ä¹Ÿå¯ä»¥å‘å®¢æˆ·ç«¯å‘é€ä¿¡å·ã€‚æ‰€ä»¥å…³é—­åŒé€šé“çš„æ—¶å€™å°±æ˜¯è¿™æ ·ï¼š

   å®¢æˆ·ç«¯ï¼šæˆ‘è¦å…³é—­è¾“å…¥é€šé“äº†ã€‚ æœåŠ¡ç«¯ï¼šå¥½çš„ï¼Œä½ å…³é—­å§ï¼Œæˆ‘è¿™è¾¹ä¹Ÿå…³é—­è¿™ä¸ªé€šé“ã€‚

   æœåŠ¡ç«¯ï¼šæˆ‘ä¹Ÿè¦å…³é—­è¾“å…¥é€šé“äº†ã€‚ å®¢æˆ·ç«¯ï¼šå¥½çš„ä½ å…³é—­å§ï¼Œæˆ‘ä¹ŸæŠŠè¿™ä¸ªé€šé“å…³é—­ã€‚

1. è§£é‡Šè·¨åŸŸé—®é¢˜ä»¥åŠå‰ç«¯å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Ÿ

   - JSONP ,åŠ¨æ€åˆ›å»º `<script>` æ ‡ç­¾ ï¼Œsrc ä¸€ä¸ªåœ°å€ï¼Œcallback ä¸€ä¸ªå‡½æ•°ï¼ŒæœåŠ¡å™¨æŠŠæ•°æ®å¡å…¥ callback å‡½æ•°å‚æ•°é‡Œï¼Œå‰ç«¯åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼›ç¼ºç‚¹ï¼šåªèƒ½ä½¿ç”¨ GET è¯·æ±‚ï¼Œå¤§å° 4K ä¸å®‰å…¨ï¼Œæœ‰ç¼“å­˜ï¼Œéœ€è¦åç«¯é…åˆï¼›
   - CORS è·¨åŸŸèµ„æºå…±äº«
   - æœåŠ¡å™¨ä»£ç†
   - WebSocket

1. CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰çš„ç»†èŠ‚ï¼Œå“ªäº›æ˜¯ç®€å•è¯·æ±‚ï¼Ÿå“ªäº›æ˜¯éç®€å•è¯·æ±‚ï¼Ÿ
   1. åç«¯å¯é…ç½®å…è®¸çš„åŸŸã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å¤´ã€‚
   2. ç®€å•è¯·æ±‚ï¼šHEADï¼ˆä¸ GET ç±»ä¼¼ï¼Œåªä¸è¿‡æœåŠ¡å™¨å“åº”æ—¶ä¸ä¼šè¿”å›æ¶ˆæ¯ä½“ï¼Œç”¨äºåªè¯·æ±‚èµ„æºçš„é¦–éƒ¨ï¼Œæ£€æŸ¥è¶…é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Œæ£€æŸ¥ç½‘é¡µæ˜¯å¦è¢«ä¿®æ”¹ï¼‰ã€GETã€POSTï¼Œéç®€å•è¯·æ±‚ï¼šPUTã€Delete

1. http çŠ¶æ€ç ï¼š
    - 100ï¼šæ”¶åˆ°å“åº”ï¼Œè¯·ç»§ç»­å‘é€è¯·æ±‚
    - 200ï¼šæˆåŠŸæ”¶åˆ°å“åº”
    - 204ï¼šè¿”å›æ²¡æœ‰å“åº”ä½“çš„å“åº”
    - 206ï¼šå†…å®¹åˆ†æ‰¹å“åº”
    - 301ï¼šæ°¸ä¹…é‡å®šå‘ï¼Œä¸ 302 åŒºåˆ«ï¼Œæœç´¢å¼•æ“å’Œæµè§ˆå™¨ï¼ˆç¼“å­˜ï¼‰éƒ½å°†æ—§çš„ç½‘å€æ›¿æ¢ä¸ºé‡å®šå‘ä¹‹åçš„ç½‘å€ï¼Œä¸‹æ¬¡è®¿é—®ï¼Œè¾“å…¥æ—§åœ°å€ç›´æ¥è·³è½¬åˆ°æ–°åœ°å€äº†ï¼Œä¸å›å»å†è¯·æ±‚ä¸€æ¬¡æ—§åœ°å€ï¼›
    - 308ï¼šæ°¸ä¹…é‡å®šå‘ï¼Œä¸å…è®¸æµè§ˆå™¨å°†åŸæœ¬ä¸º `POST` çš„è¯·æ±‚é‡é¡¶åˆ° `GET` è¯·æ±‚ä¸Šï¼›
    - 302ï¼šä¸´æ—¶é‡å®šå‘ï¼Œä¸€èˆ¬éƒ½å®ç°ä¸º `GET` åˆ° `GET` é‡å®šå‘ï¼Œä½†æ˜¯**ä¸èƒ½ç¡®ä¿** `POST` ä¼šé‡å®šå‘ä¸º `POST`ï¼›
    - 307ï¼šä¸´æ—¶é‡å®šå‘ï¼Œä¸å…è®¸æµè§ˆå™¨å°†åŸæœ¬ `POST` çš„è¯·æ±‚é‡å®šå‘åˆ° `GET` è¯·æ±‚ä¸Šï¼›**307ã€308åˆ™ä¸å…è®¸é‡å®šå‘æ—¶æ”¹å˜è¯·æ±‚ method**ï¼›
    - 303ï¼šä¸´æ—¶é‡å®šå‘ï¼Œåªå…è®¸ä»»æ„è¯·æ±‚åˆ° `GET` çš„é‡å®šå‘ï¼›é€šå¸¸ç”¨äºå°† `POST` è¯·æ±‚é‡å®šå‘åˆ° `GET` è¯·æ±‚ï¼›ä¾‹å¦‚ä¸Šä¼ äº†ä¸€ä»½ä¸ªäººä¿¡æ¯ï¼ŒæœåŠ¡å™¨è¿”å› 303 å“åº”ï¼Œå°†ä½ å¯¼å‘ä¸€ä¸ªä¸Šä¼ æˆåŠŸé¡µé¢ï¼›
    - 304ï¼šè¯·æ±‚çš„æ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜çš„å†…å®¹ï¼›
    - 400ï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯
    - 401ï¼šæœªç™»å½•
    - 403ï¼šä¸ºæˆæƒ
    - 404ï¼šæ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶
    - 500ï¼šæœåŠ¡å™¨é”™è¯¯ï¼Œå‘ç”Ÿäº†ä¸å¯é¢„æœŸçš„é”™è¯¯
    - 503ï¼šä¸´æ—¶æŒ‚äº†ï¼Œç­‰ç€ã€‚ã€‚

1. GET ä¸ POST åŒºåˆ«ï¼š
   1. GET æ˜¯ URL ä¼ å€¼ï¼Œé•¿åº¦ 4 k 1024ä¸ªå­—ç¬¦ï¼ŒPOSTï¼šæ²¡æœ‰é•¿åº¦é™åˆ¶ï¼ˆä½†ä¸åŒçš„æµè§ˆå™¨å¯èƒ½ 4~10M é™åˆ¶ï¼‰
   2. GET æµè§ˆå™¨ä¼šè®°å½•å†å²ï¼Œä¸å®‰å…¨ï¼ŒGet æ²¡æœ‰æ¶ˆæ¯ä½“ï¼ˆä½†äº‹å®ä¸Šå¯ä»¥è®¾ç½®æ¶ˆæ¯ä½“ï¼‰
   3. POST ç”¨æ¥å†™æ•°æ®ï¼ŒGET ç”¨æ¥è¯»æ•°æ®ï¼ŒPOST ä¸å†¥ç­‰ï¼ˆå¹‚ç­‰çš„æ„æ€å°±æ˜¯ä¸ç®¡å‘å¤šå°‘æ¬¡è¯·æ±‚ï¼Œç»“æœéƒ½ä¸€æ ·ï¼‰
   4. å…¶å®æ²¡å¤šå¤§åŒºåˆ«ï¼šè¯­æ„åŒºåˆ«ï¼Œæœ€å¤§åŒºåˆ«æ˜¯ POST ä¼šè¯·æ±‚ä¸¤æ¬¡ï¼Œå…ˆè¯·æ±‚ headerï¼ŒæœåŠ¡å™¨å“åº” 100 continueï¼Œå†å‘é€ dataï¼ŒæœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰

1. è¯·æ±‚å¤´ï¼šrequest
   - Acceptï¼ˆ/2å…‹æ’’å¸ƒç‰¹/ï¼Œæ¥å—ï¼‰-EnConding: gzip, deflate, br å‘Šè¯‰æœåŠ¡å™¨å¯ä»¥è§£å‹çš„ç¼–ç 
   - Accept-Langage:zh-Hans-CN ä¼˜å…ˆè¯­è¨€
   - Connection: keep-alive
   - Cookie: xxx
   - Host:è¯·æ±‚çš„æœåŠ¡å™¨
   - Refererï¼š
   - User-Agent(/Aæ•ç‰¹/,gent:ç»…å£«)
   -

1. å“åº”å¤´ï¼šresponse
   - Accessï¼ˆ/2å…‹æ’’ä¸/,è®¿é—®ï¼‰-Control-Allowï¼ˆ/É™ËˆlaÊŠ/ï¼‰-Origin: *  å…è®¸å¤¸åŸŸè®¿é—®çš„åŸŸå
   - Ageï¼š0ï¼Œåˆ›å»ºæ–‡ä»¶ä½¿ç”¨çš„æ—¶é—´
   - Cache-Control: max-age=600 å¼ºç¼“å­˜æ§åˆ¶ï¼Œæ–°ç‰ˆçš„API
   - Content-Encodeing:gzip é¡ºå¸¦è¯´ä¸‹ æœåŠ¡å™¨å›¾ç‰‡æ ¼å¼æ²¡å¿…è¦å‹ç¼© / lengthï¼š1024 / type: test/html;charset=utf-8
   - Expiresï¼šè¿‡æœŸæ—¶é—´ï¼Œç°åœ¨ä¸€èˆ¬é¦–é€‰ Cache-Controlï¼Œç”¨çš„æ˜¯æœ¬åœ°æ—¶é—´ï¼Œæ‰€ä»¥ä¸é è°±
   - ETag:ä¸€èˆ¬ä¸ºæ–‡ä»¶çš„ hash å€¼ï¼ˆç‰¹å¾å€¼ï¼‰ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶æ”¾å…¥ if-None-Matchï¼Œå‘é€åˆ°æœåŠ¡å™¨å†åŒ¹é…æ˜¯å¦æ˜¯å·²æ›´æ–°
   - Last-Modified: æœ€åæœåŠ¡å™¨æ›´æ–°çš„æ—¶é—´ï¼Œåªèƒ½ç²¾ç¡®ç²’åº¦ç§’çº§ï¼Œå‡å¦‚æŸä¸ªæ–‡ä»¶ 1 ç§’å†…ä¿®æ”¹äº† N æ¬¡å°±æ— æ³•åˆ¤æ–­äº†ï¼Œéœ€è¦ ETage æ¥è¾…åŠ©ï¼Œæ³¨æ„ï¼Œä¸ ETag æ˜¯äº’è¡¥å…³ç³»ï¼Œä¸æ˜¯äº’æ–¥çš„ï¼Œæ¯”å¦‚ä¸€äº›å›¾ç‰‡ç­‰é™æ€æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå¦‚æœæ¯æ¬¡æ‰«æå†…å®¹ç”Ÿæˆ ETag æ¥æ¯”è¾ƒï¼Œæ˜¾ç„¶è¦æ¯”ç›´æ¥æ¯”è¾ƒä¿®æ”¹æ—¶é—´æ…¢å¾ˆå¤šï¼Œè¦çœ‹å…·ä½“æƒ…å†µå…·ä½“ä½¿ç”¨ã€‚
   - Sever:æœåŠ¡å™¨ä¿¡æ¯

1. HTTP ç¼“å­˜æ€ä¹ˆåš?
   - `Cache-Control: max-age=300` (ç§’) ( *Cache ä¸ Cashï¼ˆç°é‡‘ï¼‰åŒéŸ³ã€‚ã€‚ã€‚ã€‚ğŸ¤“*)
   - `http://xxx.com/1.js?v=1`Â é¿å¼€ç¼“å­˜

1. Cache-Control å’Œ Etag çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?
     - å¼ºç¼“å­˜ï¼šè®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°çš„ç¼“å­˜ï¼Œä¸ç”¨è·ŸæœåŠ¡å™¨è¿›è¡Œé€šä¿¡
        `Expires`(ç»å¯¹æ—¶é—´): Thu, 21 Jan 2017 18:25:02 GMT
        â­`Cache-Control`: max-age=360(ç§’)
     - åå•†ç¼“å­˜ï¼šå¾—æœåŠ¡å™¨åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦èƒ½ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œ304 ç»§ç»­ä½¿ç”¨
        `Last-Modified` `if-Modified-Since`
        â­`Etag` `If-None-Match`

1. å‰ç«¯å­˜å‚¨æ–¹å¼æ±‡æ€»
   - cookieï¼šç™»é™†ååç«¯ç”Ÿæˆä¸€ä¸ª sessionid æ”¾åœ¨ cookie ä¸­è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”æœåŠ¡ç«¯ä¸€ç›´è®°å½•ç€è¿™ä¸ª sessionidï¼Œå®¢æˆ·ç«¯ä»¥åæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šè¿™ä¸ªsessionidï¼ŒæœåŠ¡ç«¯é€šè¿‡è¿™ä¸ªsessionidæ¥éªŒè¯èº«ä»½ä¹‹ç±»çš„æ“ä½œã€‚æ‰€ä»¥åˆ«äººæ‹¿åˆ°äº†cookieæ‹¿åˆ°äº†sessionidåï¼Œå°±å¯ä»¥å®Œå…¨æ›¿ä»£ä½ ã€‚
   - tokenï¼šç™»é™†ååç«¯ä¸è¿”å›ä¸€ä¸ªtokenç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†è¿™ä¸ªtokenå­˜å‚¨èµ·æ¥ï¼Œç„¶åæ¯æ¬¡å®¢æˆ·ç«¯è¯·æ±‚éƒ½éœ€è¦å¼€å‘è€…æ‰‹åŠ¨å°†tokenæ”¾åœ¨headerä¸­å¸¦è¿‡å»ï¼ŒæœåŠ¡ç«¯æ¯æ¬¡åªéœ€è¦å¯¹è¿™ä¸ªtokenè¿›è¡ŒéªŒè¯å°±èƒ½ä½¿ç”¨tokenä¸­çš„ä¿¡æ¯æ¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œäº†ã€‚
   - xssï¼šè·¨ç«™è„šæœ¬æ”»å‡»
   - **é»‘å®¢å°†æ¶æ„ä»£ç æ³¨å…¥åˆ°ç”¨æˆ·çš„é¡µé¢ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡è„šæœ¬è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼ˆdocument.cookie,tokenï¼‰ï¼Œå»æ‰§è¡Œåˆ«çš„æ“ä½œ**
   - ç›®çš„ï¼šè·å–ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆcookieã€tokenç­‰ï¼‰ï¼Œåœ¨å»æ‰§è¡Œåˆ«çš„æ“ä½œ
   - é¢„é˜²ï¼š`http` `ResponseHeaders` é‡Œ `Set-Cookie`å€¼æ·»åŠ `HttpOnly`æŒ‡ä»¤ï¼Œ**å‰åç«¯æ›¿æ¢å…³é”®å­—,å¦‚: `<`ä¸º `&lt;` `>` ä¸º `&gt;`ï¼Œç”¨ `innerText`,æ…ç”¨ innerHTML**

   - **csrfï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼šåˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çŠ¶æ€ï¼Œå†’å……ç”¨æˆ·ï¼Œæ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œä»£æ›¿ç”¨æˆ·æ“ä½œ** è·¨ç«™å‘èµ·è¯·æ±‚ï¼Œæµè§ˆå™¨æ˜¯ä¸ç®¡çš„ã€‚
   - ç®€å•åœ°è¯´ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶è¿è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»è¿è¡Œã€‚è¿™åˆ©ç”¨äº†webä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚csrfå¹¶ä¸èƒ½å¤Ÿæ‹¿åˆ°ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ï¼Œå®ƒåªæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰è¿›è¡Œæ“ä½œã€‚
   - ç›®çš„ï¼šå†’å……ç”¨æˆ·ï¼Œæ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰è¿›è¡Œæ“ä½œ
   - **é¢„é˜²ï¼š1. æ£€æŸ¥ referer. 2. å„ç§éªŒè¯(æŒ‡çº¹,çŸ­ä¿¡,å¯†ç )**

   csrf ä¾‹å­ï¼šå‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥è¿è¡Œè½¬è´¦æ“ä½œçš„URLåœ°å€å¦‚ä¸‹ï¼š `http://www.examplebank.com/withdraw?account=AccoutName&amount=1000&for=PayeeName` é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š`<img src="http://www.examplebank.com/withdraw?account=Alice&amount=1000&for=Badman">` å¦‚æœæœ‰è´¦æˆ·åä¸ºAliceçš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤±1000èµ„é‡‘ã€‚

   ä¸Šé¢çš„ä¸¤ç§æ”»å‡»æ–¹å¼ï¼Œå¦‚æœè¢« xss æ”»å‡»äº†ï¼Œä¸ç®¡æ˜¯ token è¿˜æ˜¯ cookieï¼Œéƒ½èƒ½è¢«æ‹¿åˆ°ï¼Œæ‰€ä»¥å¯¹äº xss æ”»å‡»æ¥è¯´ï¼Œcookie å’Œ token æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä½†æ˜¯å¯¹äº csrf æ¥è¯´å°±æœ‰åŒºåˆ«äº†ã€‚

   ä»¥ä¸Šé¢çš„ csrf æ”»å‡»ä¸ºä¾‹ï¼š

   cookieï¼šç”¨æˆ·ç‚¹å‡»äº†é“¾æ¥ï¼Œcookieæœªå¤±æ•ˆï¼Œå¯¼è‡´å‘èµ·è¯·æ±‚ååç«¯ä»¥ä¸ºæ˜¯ç”¨æˆ·æ­£å¸¸æ“ä½œï¼Œäºæ˜¯è¿›è¡Œæ‰£æ¬¾æ“ä½œã€‚
   tokenï¼šç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œç”±äºæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨å¸¦ä¸Štokenï¼Œæ‰€ä»¥å³ä½¿å‘äº†è¯·æ±‚ï¼Œåç«¯çš„tokenéªŒè¯ä¸ä¼šé€šè¿‡ï¼Œæ‰€ä»¥ä¸ä¼šè¿›è¡Œæ‰£æ¬¾æ“ä½œã€‚

   WebStorageå¤ä¹ ï¼š

   - è·¨æºæ•°æ®å­˜å‚¨è®¿é—®ï¼ˆåŒæºç­–ç•¥ï¼Œé¡ºä¾¿å¤ä¹ ä¸€ä¸‹å†…å®¹å®‰å…¨ç­–ç•¥ï¼‰: WebStorage ä¸å¯ä»¥ï¼Œcookie: æœ¬åŸŸå’Œçˆ¶åŸŸè®¾ç½® cookie
   - cookie ä¸º 4KBï¼Œè€Œ WebStorage æ˜¯ 5MBï¼›
   - WebStorage ä¸ä¼šä¼ é€åˆ°æœåŠ¡å™¨ï¼ˆèŠ‚çœç½‘ç»œæµé‡ï¼Œç›¸å¯¹å®‰å…¨æ€§ï¼‰ï¼Œ**åªèƒ½å­—ç¬¦ä¸²**
   - localStorage ç”Ÿå‘½å‘¨æœŸæ˜¯æ°¸ä¹…çš„ï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨ä¹‹å localStorage ä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šæ¶ˆå¤±ã€‚localStorage é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ°¸è¿œä¸ä¼šæ¶ˆå¤±ã€‚
   - sessionStorage çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åœ¨ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆã€‚sessionStorage å¼•å…¥äº†ä¸€ä¸ªâ€œæµè§ˆå™¨çª—å£â€çš„æ¦‚å¿µï¼ŒsessionStorage æ˜¯åœ¨åŒæºçš„çª—å£ä¸­å§‹ç»ˆå­˜åœ¨çš„æ•°æ®ã€‚åªè¦è¿™ä¸ªæµè§ˆå™¨çª—å£æ²¡æœ‰å…³é—­ï¼Œå³ä½¿åˆ·æ–°é¡µé¢æˆ–è€…è¿›å…¥åŒæºå¦ä¸€ä¸ªé¡µé¢ï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚ä½†æ˜¯ sessionStorage åœ¨å…³é—­äº†æµè§ˆå™¨çª—å£åå°±ä¼šè¢«é”€æ¯ã€‚åŒæ—¶ç‹¬ç«‹çš„æ‰“å¼€åŒä¸€ä¸ªçª—å£åŒä¸€ä¸ªé¡µé¢ï¼ŒsessionStorage ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚
   - Web Sqlï¼šæ ‡å‡†ä¸å†æ›´æ–°ï¼Œå…³ç³»å‹ï¼Œåº•å±‚æ˜¯ sqliteï¼›Chrome ä¸­å®¹é‡ 5Mï¼Œæ”¯æŒåŒåŸŸä¸åŒé¡µé¢å…±äº«ï¼›ç‰ˆæœ¬å‚æ•°ç”¨äºæ§åˆ¶ï¼Œå¦‚ç‰ˆæœ¬ä¸ç»Ÿä¸€æŠ¥é”™ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚
   - indexDBï¼šç±»ä¼¼ WebStorage,æ¡Œé¢ç«¯ 50M ä¸Šçº¿ï¼Œç§»åŠ¨ç«¯ 5M ä¸Šçº¿ï¼ŒnoSqlï¼ŒåŒåŸŸå…±äº«ï¼Œapiå¤æ‚ï¼Œç‰ˆæœ¬æ¦‚å¿µéš¾ç†è§£ï¼Œå¯å»ºç´¢å¼•ï¼Œå¯é…åˆç¬¬ä¸‰æ–¹åº“ä½¿ç”¨ **`dexie`**

5. ä»‹ç» HTTPS æ¡æ‰‹è¿‡ç¨‹
   1. å®¢æˆ·ç«¯ä½¿ç”¨ https çš„ url è®¿é—® web æœåŠ¡å™¨,è¦æ±‚ä¸æœåŠ¡å™¨å»ºç«‹ ssl è¿æ¥
   2. webæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚å, ä¼šå°†ç½‘ç«™çš„è¯ä¹¦ï¼Œä¸€ä¸ªå…¬é’¥ï¼ˆå…¬é’¥æ”¾ç½®åœ¨è¯ä¹¦å†…ï¼‰ä¼ é€ä¸€ä»½ç»™å®¢æˆ·ç«¯
   3. å®¢æˆ·ç«¯æ”¶åˆ°ç½‘ç«™è¯ä¹¦åä¼šæ£€æŸ¥è¯ä¹¦çš„**é¢å‘æœºæ„ã€åŸŸåä»¥åŠè¿‡æœŸæ—¶é—´**, å¦‚æœæ²¡æœ‰é—®é¢˜å°±éšæœºäº§ç”Ÿä¸€ä¸ªç§˜é’¥
   4. å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥å°†ä¼šè¯ç§˜é’¥åŠ å¯†, å¹¶ä¼ é€ç»™æœåŠ¡ç«¯, æœåŠ¡ç«¯åˆ©ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å‡ºä¼šè¯ç§˜é’¥
   5. ä¹‹åæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä½¿ç”¨ç§˜é’¥åŠ å¯†ä¼ è¾“

6. HTTPS ä¸­é—´äººæ”»å‡»ï¼šæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å…¬é’¥æ—¶ï¼Œæ”»å‡»è€…æˆªè·å…¬é’¥ï¼Œä¿ç•™åœ¨è‡ªå·±æ‰‹ä¸Šï¼Œä¼ªé€ ä¸€ä¸ªå…¬é’¥ç»™å®¢æˆ·ç«¯

### å‰ç«¯å·¥ç¨‹åŒ–

1. package.json æ–‡ä»¶ä½œç”¨ï¼šæ˜¯å¯¹é¡¹ç›®æˆ–è€…æ¨¡å—åŒ…çš„æè¿°ï¼Œé‡Œé¢åŒ…å«è®¸å¤šå…ƒä¿¡æ¯ã€‚æ¯”å¦‚é¡¹ç›®åç§°ï¼Œé¡¹ç›®ç‰ˆæœ¬ï¼Œé¡¹ç›®æ‰§è¡Œå…¥å£æ–‡ä»¶ï¼Œé¡¹ç›®è´¡çŒ®è€…ç­‰ç­‰ã€‚npm install å‘½ä»¤ä¼šæ ¹æ®è¿™ä¸ªæ–‡ä»¶ä¸‹è½½æ‰€æœ‰ä¾èµ–æ¨¡å—ã€‚
1. package-lock.json æ–‡ä»¶çš„ä½œç”¨é”å®šå®‰è£…æ—¶çš„åŒ…çš„ç‰ˆæœ¬å·ï¼Œå°±æ˜¯ç¡®ä¿æ‰€æœ‰åº“åŒ…ä¸ä½ ä¸Šæ¬¡å®‰è£…çš„å®Œå…¨ä¸€æ ·ï¼Œä»¥ä¿è¯å…¶ä»–äººåœ¨ `npm install` æ—¶å¤§å®¶çš„ä¾èµ–èƒ½ä¿è¯ä¸€è‡´ã€‚

1. webpack å¦‚ä½•æ‹†åˆ†å¤§æ–‡ä»¶ï¼Ÿ

   - ä½¿ç”¨ code split
   - å†™æ³• import('xxx').then(xxx=>{console.log(xxx)})
   - xxx æ¨¡å—å°±æ˜¯æŒ‰éœ€åŠ è½½çš„
   - ä»€ä¹ˆæ˜¯åŠ¨æ€é“¾æ¥åº“: ç”¨ dll é“¾æ¥çš„æ–¹å¼æå–å›ºå®šçš„ js æ–‡ä»¶ï¼Œå¹¶é“¾æ¥è¿™ä¸ª js æ–‡ä»¶

1. webpack æ‰“åŒ…çš„è¿‡ç¨‹? **æ ¹æ®é…ç½®çš„çš„å…¥å£æ–‡ä»¶ [entry]ï¼ˆä¸€èˆ¬ä¸º index.js æˆ– main.jsï¼‰ï¼Œæ‰¾åˆ°å¼•ç”¨ï¼ˆimportï¼‰æ¨¡å—ï¼Œæ ¹æ® loader è½¬æ¢ module,å¯¹å½“å‰ module è¿›è¡Œè½¬æ¢åï¼Œå†è§£æå‡ºå®ƒä¾èµ–çš„ moduleï¼ˆå¦‚æœæœ‰ï¼‰, æ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»,ç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunk(å¤§å—ï¼Œ/åˆ›å®¢/),å†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨**

1. webpack ä¼˜åŒ–ï¼š
   1. å¼€å‘ç¯å¢ƒæ—¶ä¼˜åŒ–ï¼š
      1. HMRï¼šçƒ­æ›´æ–°ï¼Œçƒ­æ¨¡å—æ›¿æ¢ï¼šä¸€ä¸ªæ¨¡å—å‘ç”Ÿå˜åŒ–ï¼Œåªä¼šé‡æ–°æ‰“åŒ…è¿™ä¸€ä¸ªæ¨¡å—ï¼ˆè€Œä¸æ˜¯æ‰“åŒ…æ‰€æœ‰æ¨¡å—ï¼‰æå¤§æå‡æ„å»ºé€Ÿåº¦ï¼›
      2. source-map: ä¸€ç§ æä¾›æºä»£ç åˆ°æ„å»ºåä»£ç æ˜ å°„ æŠ€æœ¯ ï¼ˆå¦‚æœæ„å»ºåä»£ç å‡ºé”™äº†ï¼Œé€šè¿‡æ˜ å°„å¯ä»¥è¿½è¸ªæºä»£ç é”™è¯¯ï¼‰ï¼›
   2. ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ï¼š
      1. ç¼“å­˜ï¼šä¸€èˆ¬æ˜¯é’ˆå¯¹ babel ç¼“å­˜ `loader: 'babel-loader?cacheDirectory'`
      2. tree-sharkingï¼ˆæ ‘æ‘‡ï¼Œæ‘‡æ ‘ï¼‰ï¼šåå­—å¾ˆå½¢è±¡ï¼Œé€šè¿‡æ‘‡æ ‘æŠŠæ ‘ä¸Šæ¯å¶æ‘‡ä¸‹æ¥ã€‚åˆå«ï¼šä¾èµ–å…³ç³»è§£æï¼Œå°±æ˜¯ webpack ä¸­å°±æ˜¯æœªå¼•ç”¨çš„ä»£ç ä¸æ‰“åŒ…ï¼šmath.js æœ‰ `add()`ã€`minus()` ç­‰å¤šä¸ªæ–¹æ³•ï¼Œä½† xx.js åª `import {add} from math`,é‚£ `minus()` çš„æ–¹æ³•ä»£ç æ˜¯ä¸ä¼šæ‰“åŒ…çš„ã€‚å‰æï¼š
         1. å¿…é¡»ä½¿ç”¨ ES6 æ¨¡å—åŒ–ï¼ˆimportï¼Œexportï¼‰
         2. å¼€å¯ production ç¯å¢ƒ
      3. code split ä»£ç æ‹†åˆ†æ‰“åŒ…ï¼šå¯ä»¥å°† node_modules ä¸­ä»£ç å•ç‹¬æ‰“åŒ…ä¸€ä¸ª chunk æœ€ç»ˆè¾“å‡ºï¼Œæˆ–è‡ªåŠ¨åˆ†æå¤šå…¥å£ chunk ä¸­ï¼Œæœ‰æ²¡æœ‰å…¬å…±çš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰ä¼šæ‰“åŒ…æˆå•ç‹¬ä¸€ä¸ª chunkã€‚

         ```js
            // æœ€ä¼˜åŒ– /ËŒÉ‘Ëp.tÉ™.mÉ™ËˆzeÊƒÉ™n/
            optimization:{
               splitChunks:'all'
            }
         ```

      4. import åŠ¨æ€å¯¼å…¥(æ‡’åŠ è½½ã€é¢„åŠ è½½)ï¼šæŠŠæŸä¸€ä¸ªæ–‡ä»¶å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ª chunkã€‚ æ³¨ï¼š[import åŠ¨æ€å¯¼å…¥](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import#%E5%8A%A8%E6%80%81import)ï¼Œå°†è¿”å›ä¸€ä¸ª promise

         ```js
         document.getElementById('btn').onclick = function(){
         // æ‡’åŠ è½½~ï¼šå½“æ–‡ä»¶éœ€è¦ä½¿ç”¨æ—¶æ‰åŠ è½½~
         // é¢„åŠ è½½ prefetchï¼š ä¼šåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæå‰åŠ è½½jsæ–‡ä»¶ I
         // æ­£å¸¸åŠ è½½å¯ä»¥è®¤ä¸ºæ˜¯å¹¶è¡ŒåŠ è½½ï¼ˆåŒä¸€æ—¶é—´åŠ è½½å¤šä¸ªæ–‡ä»¶ï¼‰
         // é¢„åŠ è½½ prefetchï¼š ç­‰å…¶ä»–èµ„æºåŠ è½½å®Œæ¯•ï¼Œæµè§ˆå™¨ç©ºé—²äº†ï¼Œå†å·å·åŠ è½½èµ„æºï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜
            import(/* webpackChunkNameï¼š 'test'ï¼Œ webpackPrefetchï¼š true */'./test')
            .then(({ mul }) => {
               console.log(mul(4ï¼Œ5));
            });
         }ï¼›
         ```

      5. happypack æˆ–è€… thread-loader ï¼šå¤šè¿›ç¨‹æ‰“åŒ…ã€‚å®ƒæŠŠä»»åŠ¡åˆ†è§£ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘çš„æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œåå†æŠŠç»“æœå‘é€ç»™ä¸»è¿›ç¨‹ã€‚ç”±äº JavaScript æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œè¦æƒ³å‘æŒ¥å¤šæ ¸ CPU çš„èƒ½åŠ›ï¼Œåªèƒ½é€šè¿‡å¤šè¿›ç¨‹å»å®ç°ï¼Œè€Œæ— æ³•é€šè¿‡å¤šçº¿ç¨‹å®ç°ã€‚å“ªä¸ª loader éœ€è¦å¤šè¿›ç¨‹å¤„ç†ï¼Œç›´æ¥ loader é‡Œå†™ï¼ˆä¸€èˆ¬æ˜¯ babel-loader å’Œ eslint-loader éœ€è¦å¤šè¿›ç¨‹å¤„ç†ï¼‰ã€‚åœ¨å…·ä½“çš„æ³¨ï¼šéœ€æ‰“åŒ…çš„æ–‡ä»¶å¦‚æœä½“ç§¯å°ï¼Œæ‰“åŒ…çš„æ—¶å€™ä¼šæ¯”è¾ƒæ…¢(å¯åŠ¨è¿›ç¨‹éœ€è¦æ—¶é—´ï¼ˆ600msï¼‰ï¼Œè¿›ç¨‹ä¹‹é—´é€šä¿¡ä¹Ÿéœ€è¦æ—¶é—´)ï¼Œç”±äº HappyPack å¯¹ file-loaderã€url-loader æ”¯æŒçš„ä¸å‹å¥½ï¼Œæ‰€ä»¥ä¸å»ºè®®å¯¹è¯¥ loader ä½¿ç”¨ã€‚

      6. å¤§çš„åº“æ–‡ä»¶ä¸æ‰“åŒ…ï¼Œåˆ©ç”¨ `Externals`ï¼Œæ”¾åˆ° CDN ä¸ŠåŠ è½½

         ```js
            externals:[
               'jQuery':'$'
            ]
            modules:{
               noParse:/jQuery/, // ä¸ç¼–è¯‘
               ...
            }
         ```

      7. dll åŠ¨æ€é“¾æ¥åº“ï¼šæå–å…¬å…±çš„ jsï¼ˆjQueryï¼ŒVueï¼ŒVuexï¼ŒReactï¼ŒReact-Domï¼Œpolyfill ç­‰ï¼‰ï¼Œæ‰“åŒ…åç”Ÿæˆ js æ–‡ä»¶ä»¥åŠå¯¹åº”çš„ manifest.json åŠ¨æ€é“¾æ¥åº“é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•æ‰“åŒ…åæ–‡ä»¶çš„å…·ä½“åº“åä¸è·¯å¾„ã€‚DllPlugin æ’ä»¶è´Ÿè´£æ‰“åŒ…ï¼ŒDllReferencePlugin æ’ä»¶è´Ÿè´£å¼•å…¥æ‰“åŒ…çš„åçš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶å†…å®¹ã€‚åªéœ€è¦ç¼–è¯‘ä¸€æ¬¡ï¼Œä¸ä¼šé€ æˆé‡å¤æ‰“åŒ…ï¼Œä»–ä¼šå°†å¼•ç”¨ç›´æ¥æŒ‡å‘ dllã€‚ä¸ external ç›¸æ¯”æ›´ç¬¦åˆæ¨¡å—åŒ–æ€æƒ³ï¼Œä¼šç¼–è¯‘ä¸€æ¬¡ï¼Œexteranal ä¸ä¼šç¼–è¯‘ï¼Œåªæ˜¯ä¸€ä¸ªå¤–éƒ¨åº“ã€‚ç›¸åŒç‚¹éƒ½æ˜¯è®©æŸäº›åº“ä¸æ‰“åŒ…ã€‚

      8. IgnorePluginï¼šå¿½ç•¥æŸäº›æ–‡ä»¶ï¼Œå¦‚ moment.js æ—¶é—´æ’ä»¶å¼•å…¥çš„å¾ˆå¤šè¯­è¨€åŒ…ï¼Œ`new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/)`

   3. webpack è‡ªå¸¦çš„ä¼˜åŒ–ï¼š
      - scope-hoistingï¼šä½œç”¨åŸŸæå‡ï¼Œä»£ç å†…å®šä¹‰çš„ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœå˜é‡èƒ½ç›´æ¥è®¡ç®—å‡ºæ¥ç»“æœï¼Œå…¶è®¡ç®—è¿‡ç¨‹ä¸ä¼šæ‰“åŒ…åˆ°ä»£ç ï¼Œç›´æ¥æ‰“åŒ…å…¶ç»“æœã€‚ `let a = 10;let b = 20; console.log(a+b);`  æ‰“åŒ…åçš„æ–‡ä»¶ `console.log(30)`

## åç«¯

### è¿›ç¨‹ä¸çº¿ç¨‹

è¿›ç¨‹ï¼šCPU èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œæ‹¥æœ‰èµ„æºå’Œç‹¬ç«‹è¿è¡Œï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘ç”±ä¸€ä¸ªçº¿ç¨‹æ„æˆï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘ç”±ä¸€ä¸ªè¿›ç¨‹æ„æˆï¼Œè¿›ç¨‹ä¹‹é—´é€šä¿¡ï¼šIPC
çº¿ç¨‹ï¼šCPU èµ„æºè°ƒåº¦çš„æœ€å°å•ä½ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«æ”¹è¿›ç¨‹å†…å®¹ã€‚

å•çº¿ç¨‹æ–¹æ³•æ…¢ï¼šå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¡ç®—å¼‚æ­¥
å¤šçº¿ç¨‹æ–¹æ³•å¿«ï¼šå› ä¸ºå¤šä¸ªçº¿ç¨‹å¹¶å‘è®¡ç®—å¤šçº¿ç¨‹å°±æ˜¯ç”¨èµ„æºæ¢æ€§èƒ½ï¼Œä½†å¹¶ä¸æ˜¯çº¿æ€§å¢é•¿ï¼Œ1 ä¸ªçº¿ç¨‹ 13000ï¼Œ5 ä¸ªçº¿ç¨‹ 4269 æ€§èƒ½åªæœ‰ 3 å€æå‡

- å¤šçº¿ç¨‹çš„åè°ƒç®¡ç†é¢å¤–æˆæœ¬
- èµ„æºä¹Ÿæœ‰ä¸Šé™çš„--5è¾†è½¦åªæœ‰3æ¡é“

çº¿ç¨‹å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œå‘ï¼š

1. æ— åºæ€§ï¼šä¸å¯é¢„æµ‹æ€§ï¼Œå¯åŠ¨ã€ç»“æŸæ— åºï¼ˆCPU åˆ†ç‰‡ï¼‰
2. **å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜**

çº¿ç¨‹æ± ï¼ˆThreadpoolï¼‰
. Netframework2.0(æ–°çš„CLR) Threadpoolï¼šæ± åŒ–èµ„æºç®¡ç†è®¾è®¡æ€æƒ³ï¼Œçº¿ç¨‹æ˜¯ä¸€ç§èµ„æºï¼Œä¹‹å‰æ¯æ¬¡è¦ç”¨çº¿ç¨‹ï¼Œå°±å»ç”³è¯·ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿ç”¨å®Œä¹‹åï¼Œé‡Šæ”¾æ‰ï¼›**æ± åŒ–å°±æ˜¯åšä¸€ä¸ªå®¹å™¨**ï¼Œå®¹å™¨æå‰ç”³è¯·5ä¸ªçº¿ç¨‹ï¼Œç¨‹åºéœ€è¦ä½¿ç”¨çº¿ç¨‹ï¼Œç›´æ¥æ‰¾å®¹å™¨è·å–ï¼Œç”¨å®Œåå†æ”¾å›å®¹å™¨ï¼ˆæ§åˆ¶çŠ¶æ€ï¼‰ï¼Œ**é¿å…é¢‘ç¹çš„ç”³è¯·å’Œé”€æ¯**ï¼›å®¹å™¨è‡ªå·±è¿˜ä¼šæ ¹æ®é™åˆ¶çš„æ•°é‡å»ç”³è¯·å’Œé‡Šæ”¾

1. çº¿ç¨‹å¤ç”¨
2. å¯ä»¥é™åˆ¶æœ€å¤§çº¿ç¨‹æ•°é‡

Task.Run(Active)

è§£å†³æ— åºæ€§ï¼š

1. Task.WaitAll() \ Task.ContinueWhenAll() ä¸ Promise.all() ç”¨æ³•ä¸€è‡´
   Task.WaitAny() \ Task.ContinueWhenAny() ä¸ Promise.race() ç”¨æ³•ä¸€è‡´

2. ä½¿ç”¨ async/await åŒæ­¥çš„æ–¹å¼ç¼–å†™å¼‚æ­¥æ‰§è¡Œä»£ç ï¼Œä¹Ÿæ˜¯ä¸ªè¯­æ³•ç³– ILé‡Œé¢æ²¡æœ‰ async/å’Œ awaitï¼Œå°±æ˜¯å¸¸è§„ä»£ç 
çŠ¶æ€æœºçŠ¶æ€åˆ‡æ›+é€’å½’ï¼Œå°±èƒ½æ”¯æŒæ— é™å±‚çº§ await;é¦–å…ˆå®ä¾‹åŒ–çŠ¶æ€ï¼ŒçŠ¶æ€æ˜¯ -1ï¼Œç„¶åå»æ‰§è¡Œ task å‰é¢çš„ï¼Œå¯åŠ¨çº¿ç¨‹å»æ‰§è¡Œ taskï¼Œåˆ¤æ–­å®Œæˆæ²¡ï¼Œæ²¡æœ‰å°±æŠŠçŠ¶æ€é‡ç½®åˆ° 0,è®©çº¿ç¨‹é€’å½’è°ƒç”¨ä¸‹ï¼›è‡ªå·± returnäº†ï¼Œå›å»ç»§ç»­è‡ªå·±çš„ä½¿å‘½ï¼Œå­çº¿ç¨‹é€’å½’å›å»å†æ¬¡æ‰§è¡ŒçŠ¶æ€æœºåŠ¨ä½œï¼ŒåŒ…æ‹¬å®Œæˆè‡ªå·±çš„åç»­åŠ¨ä½œï¼Œå¦‚æœå†é‡åˆ° awaitï¼ŒåˆæŠŠçŠ¶æ€é‡ç½®ä¸º -1ï¼Œç„¶åå†ç»§ç»­ã€‚

å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼šä¸€æ®µä»£ç ï¼Œå•çº¿ç¨‹æ‰§è¡Œå’Œå¤šçº¿ç¨‹æ‰§è¡Œç»“æœä¸ä¸€è‡´ï¼Œå°±è¡¨æ˜æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜

å¤šçº¿ç¨‹å»è®¿é—®åŒä¸€ä¸ªé›†åˆï¼ˆå¯¹è±¡ï¼‰ï¼Œæœ‰é—®é¢˜å—ï¼Ÿ

```C#
List<int> intList = new List<int>();
for (int i=0: i<10000: i++)
{
   Task.Run(() => //å¤šçº¿ç¨‹ä¹‹åï¼Œç»“æœå°±å˜æˆå°äº10000-å°±æ˜¯æœ‰çš„æ•°æ®ä¸¢å¤±äº†
   {
      intList.Add(i)
   }
}
//Listæ˜¯ä¸ªæ•°ç»„ç»“æ„ï¼Œåœ¨å†…å­˜ä¸Šæ˜¯è¿ç»­æ‘†æ”¾çš„ï¼Œå‡å¦‚åŒä¸€æ—¶åˆ»ï¼Œå»å¢åŠ ä¸€ä¸ªæ•°æ®ï¼Œéƒ½æ˜¯æ“ä½œåŒä¸€ä¸ªå†…å­˜ä½ç½®ï¼Œ2ä¸ªcpuåŒæ—¶å‘äº†å‘½ä»¤ï¼Œå†…å­˜å…ˆæ‰§è¡Œä¸€ä¸ªå†æ‰§è¡Œä¸€ä¸ªï¼Œå°±å‡ºç°è¦†ç›–
Thread.Sleep (5000)
Console.Writeline(intList.Count)
```

è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š
lockï¼Œé”ï¼šè¯­æ³•ç³–ï¼Œç­‰ä»·äºç›‘è§†å™¨ï¼ˆMonitorï¼‰ï¼Œé”å®šä¸€ä¸ªå†…å­˜å¼•ç”¨åœ°å€ï¼Œæ‰€ä»¥ä¸èƒ½æ˜¯å€¼ç±»å‹ï¼Œä¹Ÿä¸èƒ½æ˜¯ null

   ```C#
   ...
   // å®˜æ–¹æ¨èå†™æ³•
   private static readonly object Lock=new object();
   for (int i=0: i<10000: i++)
   {
      Task.Run(() =>
      {
         // Lock è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå°±æ˜¯å•çº¿ç¨‹åŒ–ï¼ŒLock å°±æ˜¯ä¿è¯æ–¹æ³•å—å„¿ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å»ï¼Œå…¶ä»–çº¿ç¨‹å°±æ’é˜Ÿï¼ˆè¿™ä¸è„±è£¤å­æ”¾å±å˜›ã€‚ã€‚ï¼‰
         lock(Lock)
         {
         intList.Add(i)
         }

      }
   }
   ...
   ```

### æœåŠ¡å™¨

1. ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†ï¼Œåå‘ä»£ç†ï¼Ÿ

ç²¾è¾Ÿï¼Œæ­£å‘ä»£ç†éšè—çœŸå®å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†éšè—çœŸå®æœåŠ¡ç«¯ã€‚

1. Nginx è´Ÿè½½å‡è¡¡æ–¹å¼æœ‰å“ªäº›ï¼Ÿ

- è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ï¼šweightï¼ˆæ¥è®¾ç½®æƒé‡ï¼‰ï¼›
- url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰ï¼šæŒ‰è®¿é—® url çš„ hash ç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ª url å®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰æ•ˆï¼›
- fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰ï¼šæŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚

### `C#`

å…±æœ‰ + é™æ€ç±» + é™æ€æ–¹æ³• + ç¬¬ä¸€ä¸ªå‚æ•°å‰é¢åŠ ä¸ª this æ‰©å±•æ–¹æ³•

è£…ç®± å°±æ˜¯æŠŠâ€œå€¼ç±»å‹â€è½¬æ¢æˆâ€œå¼•ç”¨ç±»å‹â€(Object)ï¼›

æ‹†ç®± å°±æ˜¯æŠŠâ€œå¼•ç”¨ç±»å‹â€è½¬æ¢æˆâ€œå€¼ç±»å‹â€ï¼›

Stringï¼šä¸å¯å˜ï¼Œä¸€æ—¦èµ‹å€¼éƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ String ç±»å¯¹è±¡
StringBuilderï¼šåŠ¨æ€å¯¹è±¡ï¼Œå…è®¸æ‰©å……å®ƒæ‰€å°è£…çš„å­—ç¬¦ä¸²ä¸­ç¬¦çš„æ•°é‡

### å§”æ‰˜ï¼šJS å‡½æ•°å›è°ƒ

å§”æ‰˜æœ¬è´¨æ˜¯ä¸€ä¸ªç±»ï¼Œæ˜¯ C# å®ç°**å›è°ƒå‡½æ•°**çš„ä¸€ç§æœºåˆ¶ï¼Œå‡½æ•°æŒ‡é’ˆ

ä¼˜ç‚¹ï¼š

1. é€»è¾‘è§£è€¦ï¼Œä¿æŒç¨³å®š
2. ä»£ç å¤ç”¨ï¼Œå¯ä»¥ä¿è¯é¡¹ç›®çš„è§„èŒƒæ€§ï¼ˆé¿å…èœé¸Ÿå†™é”™äº†ï¼Œé›†ä¸­ç®¡ç†ï¼‰

å†…ç½®å§”æ‰˜ï¼ˆè¯­æ³•ç³–ï¼‰ï¼š16 ä¸ªé‡è½½ï¼Œ17 ä¸ªå‚æ•°

- Activeï¼šä¸å¸¦è¿”å›å€¼ï¼Œç”¨äºå›è°ƒæ–¹æ³•
- Funcï¼šå¸¦è¿”å›å€¼çš„å§”æ‰˜ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºè¿”å›å€¼ï¼Œç”¨äºæ¨¡æ¿æ–¹æ³•

Lambda ä¸€å¼€å§‹è¯ç”Ÿæ˜¯ä¸ºå§”æ‰˜æœåŠ¡çš„ï¼Œåé¢å°±åƒå˜ä¸‡åŒ–çš„

Linq:

- Whereï¼š åŸºäºå§”æ‰˜çš„ä»£ç å°è£…ï¼ŒæŠŠæ•°æ®**ç­›é€‰**çš„é€šç”¨é€»è¾‘å®Œæˆï¼ŒæŠŠ**åˆ¤æ–­**é€»è¾‘äº¤ç»™å§”æ‰˜ä¼ é€’
- Selectï¼šåŸºäºå§”æ‰˜çš„ä»£ç å°è£…ï¼ŒæŠŠæ•°æ®**è½¬æ¢**çš„é€šç”¨é€»è¾‘å®Œæˆï¼ŒæŠŠ**è½¬æ¢**é€»è¾‘äº¤ç»™å§”æ‰˜ä¼ é€’

Linq to object -- Enumerable -- æ•°æ®æºæ˜¯å†…å­˜é‡Œé¢çš„é›†åˆä¸€ä¸€ä¼ é€’çš„å§”æ‰˜åˆ¤æ–­
Linq to Sql-- Queryable-- æ•°æ®æºåœ¨ Sqlserver -- éœ€è¦ sql è¯­å¥ -- ä»**è¡¨è¾¾å¼ç›®å½•æ ‘**è€Œæ¥

List ä¸ IEnumerable åŒºåˆ«ï¼Œ
è¯­æ³•ç³–ä¸€å†™çš„æ—¶å€™åªéœ€è¦ IEnumerable + yield ,ä½†æ˜¯ç¼–è¯‘åä¼šäº§ç”Ÿå¾ˆå¤šä»£ç ï¼Œæ˜¯ä¸€ä¸ªçŠ¶æ€æœºæ¨¡å¼çš„

### å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰

- é™æ€å­—æ®µè¡¨ç¤º**ç±»**çŠ¶æ€
- æ™®é€šå­—æ®µè¡¨ç¤ºçš„æ˜¯**å®ä¾‹**çš„çŠ¶æ€
- é™æ€æ„é€ å™¨è¿è¡Œç¯å¢ƒåŠ è½½æ—¶æ‰§è¡Œï¼Œä¸”æ‰§è¡Œä¸€æ¬¡ï¼Œä¸€èˆ¬ä¸ºåªè¯»å­—æ®µèµ‹å€¼ã€‚
- å±æ€§ç”±å­—æ®µæ¼”å˜è€Œæ¥ï¼Œä¸ºå­—æ®µæ·»åŠ  getã€set è¯»å†™å™¨åç§°ä¸º**å±æ€§**ï¼Œè¯»å†™å™¨çº¦æŸå­—æ®µçš„è¡Œä¸º

### æšä¸¾

æšä¸¾ bit ä½ç”¨æ³•ï¼Œç”¨ä¸€ä¸ªå­—æ®µå±æ€§å¤šä¸ªçŠ¶æ€ï¼Œ**ç”¨ä¸€ç»„æ ‡è¯†ä»£è¡¨æ•°å­—ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜è°ƒè¯•ï¼Œç†è§£**ã€‚

### å•ä¾‹æ¨¡å¼

### å·¥å‚æ¨¡å¼

### è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒè®¢é˜…æ¨¡å¼

1. è§‚å¯Ÿè€…æ¨¡å¼ï¼šæˆ‘åŠäº†ä¸€ä¸ªè¡¥ä¹ ç­ï¼Œå­¦ç”Ÿæƒ³æ¥æˆ‘è¿™å­¦ä¹ ï¼Œ**å¿…é¡»å…ˆæŠ¥åï¼ˆæ³¨å†Œï¼‰**ã€‚æ”¶é½ä¸€å¸®å­¦ç”Ÿï¼Œå¼€å§‹æ•™å­¦ï¼Œ**å­¦ç”Ÿä»¬å¬äº†æˆ‘çš„è¯¾åŠæ—¶æ›´æ–°äº†è‡ªå·±çš„è®¤çŸ¥**ã€‚æˆ‘å’Œå­¦ç”Ÿä»¬æ˜¯æœ‰ç›¸è¿ï¼Œæ¯ä¸ªäººæˆ‘éƒ½è®¤è¯†ã€‚è¢«è§‚å¯Ÿå¾—æä¾›ä¸€ä¸ªæ¥å—è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼Œè§‚å¯Ÿè€…å¿…é¡»æä¾›è¢«è§‚å¯Ÿè€…é€šçŸ¥çš„æ–¹æ³•ï¼Œè¢«è§‚å¯Ÿè€…ä¿®æ”¹çŠ¶å°±å¾ªç¯è°ƒç”¨è§‚å¯Ÿè€…æä¾›ä¸ªé€šçŸ¥æ–¹æ³•ã€‚è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…æ˜¯**æ¾è€¦åˆ**çš„å…³ç³»ã€‚
2. å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šæˆ‘åœ¨æŸè§†é¢‘ç«™ä¸Šå¼€äº†ä¸€ä¸ªä¸“æ ï¼ŒæŠŠæˆ‘çš„è¯¾ä¸Šä¼ ä¸Šå»ï¼Œå–œæ¬¢çš„åŒå­¦è®¢é˜…ä¸‹ã€‚åç»­æˆ‘åªè¦æŠŠæœ€æ–°è¯¾ç¨‹ä¼ åˆ°è§†é¢‘ç«™ä¸Šå°±å¥½äº†ï¼Œå­¦ç”Ÿä»¬å¬äº†æˆ‘çš„è¯¾äº¦èƒ½åŠæ—¶æ–°äº†è‡ªå·±çš„è®¤çŸ¥ã€‚æˆ‘å’Œå­¦ç”Ÿä»¬çš„è”ç³»ä¸æ˜¯é‚£ä¹ˆå¤§äº†ã€‚æˆ‘ä¹Ÿä¸éœ€è¦è®¤è¯†ä»–ä»¬ã€‚å‘å¸ƒè€…å’Œè®¢é˜…è€…æ˜¯**å®Œå…¨è§£è€¦**å…³ç³»ã€‚

åŒºåˆ«ï¼šåè€…æ¯”å‰è€…å¤šäº†ä¸€ä¸ªç±»ä¼¼ä¸­è½¬ç«™çš„ä¸œè¥¿ï¼ˆå§‘ä¸”ç§°ä¸ºâ€œä¸­å°â€æˆ–ç§°ç»çºªäººã€Brokerã€‘ã€‚ï¼‰ï¼Œçœäº†æˆ‘å¥½å¤šäº‹ã€‚æœ‰å­¦ç”Ÿä¸æ„¿æ„å­¦äº†ï¼Œç›´æ¥æ‰¾ä¸­å°é€€è®¢å°±å¥½äº†ï¼Œä¸ç”¨æ‰¾æˆ‘è¯´ã€‚æˆ‘å‘å¸ƒçš„æ–°è¯¾ç¨‹ä¹Ÿç”±ä¸­å°åšå¹¿æ’­ï¼Œä¸ç”¨æˆ‘è‡ªå·±å†ä¸€ä¸ªä¸ªé€šçŸ¥ï¼Œä¸ä¼šå½±å“åˆ°æˆ‘è‡ªå·±å¹²å…¶ä»–å·¥ä½œã€‚ä¸¤ç§æ¨¡å¼æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸»è¦å…³é”®ç‚¹éƒ½åœ¨äºæ³¨å†Œï¼ˆæ·»åŠ åˆ°æ³¨å†Œæ•°ç»„ä¸­ï¼‰å’Œè§¦å‘ï¼ˆè§¦å‘æ³¨å†Œæ•°ç»„ä¸­çš„å†…å®¹ï¼‰

### ORM

é€šè¿‡å®ä¾‹å¯¹è±¡çš„è¯­æ³•ï¼Œå®Œæˆå…³ç³»å‹æ•°æ®åº“çš„æ“ä½œçš„æŠ€æœ¯ï¼Œæ˜¯"å¯¹è±¡-å…³ç³»æ˜ å°„"ï¼ˆObject/Relational Mappingï¼‰ çš„ç¼©å†™ã€‚

- Code First ä¼˜ç‚¹ï¼š
  - é¡¹ç›®ç»´æŠ¤æ–¹ä¾¿ï¼Œåªå†™ä»£ç å°±è¡Œ
  - æ›´æ¢æ•°æ®åº“æ–¹ä¾¿

EF: æŸ¥è¯¢å»¶è¿Ÿï¼Œæ˜¯ä¸ºäº†æ‹¼æ¥æœ€ç»ˆçš„ Sql è¯­å¥ï¼Œå¦‚ `ToList()` ä¾§æŸ¥è¯¢å…¨éƒ¨,`FirstOrDefault()` åˆ™æ·»åŠ  `top 1`;

`using(var xx = new XX()){ }` å°±æ˜¯æ‰§è¡Œ XX ç±»æä¾›çš„ `Dispose()`ï¼ˆå¤„ç†ï¼›éƒ¨ç½²ï¼›é‡Šæ”¾ï¼‰æ–¹æ³•

### AutoMapperä½œç”¨

AutoMapper çš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ï¼Œé¿å…æ¯æ¬¡éƒ½å»è½¬åŒ–ã€‚
ä½¿ç”¨ DTO å®ç°è¡¨ç°å±‚ä¸é¢†åŸŸ Model çš„è§£è€¦ï¼Œç”¨ AutoMapper æ¥å®ç° DTO ä¸ é¢†åŸŸ Model çš„ç›¸äº’è½¬æ¢

### .NET MVC

è·¯ç”±ï¼šç½‘ç«™å¯åŠ¨æ—¶ä¸€ä¼šæ‰§è¡Œä¸”åªæ‰§è¡Œä¸€æ¬¡ Application_Start â†’ æ³¨å†Œè·¯ç”± â†’ æ·»åŠ  URL è§„åˆ™ â†’ ç„¶åè¯·æ±‚è¢«æ­£åˆ™åŒ¹é…è½¬å‘åˆ°å¯¹åº”çš„æ§åˆ¶å™¨å’Œ Action

1. æ‰©å±•ä¸‹æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™ï¼Œå®ŒæˆåŸºç¡€æ‰©å±•
2. æ‰©å±•è·¯ç”±ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»ä½•çš„è¯·æ±‚ä¿¡æ¯å®Œæˆè·¯ç”±åŒ¹é…
3. æ‰©å±• MVCHandlerï¼Œ è·³å‡ºMVCçš„æ¡†æ¶æµç¨‹ï¼Œä¸ºæ‰€æ¬²ä¸º

### ç¼–ç¨‹æ€æƒ³

POPï¼šé¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œç¬¦åˆå¸¸è§„æ€ç»´ï¼Œä½†éšç€ä¸šåŠ¡å¤æ‚åº¦ä¸Šå»äº†ï¼Œéš¾ä»¥æ‰©å±•éœ€è¦ã€‚ç›´æ¥çš„ä¾‹å­å¦‚ï¼šæ€ä¹ˆæŠŠå¤§è±¡æ”¾å…¥å†°ç®±ã€‚
OOPï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç¡®åˆ‡çš„è¯´**å®ƒæ˜¯ä¸€ç§è€ƒè™‘é—®é¢˜çš„æ–¹å¼ï¼Œå…ˆè€ƒè™‘å“ªäº›å¯¹è±¡å‚ä¸å…¶ä¸­ï¼Œè€Œä¸æ˜¯å…ˆè€ƒè™‘æ­¥éª¤**ï¼›è¿˜æ˜¯æŠŠå¤§è±¡æ”¾å…¥å†°ç®±çš„ä¾‹å­ï¼š

OOP å…ˆè¦åšçš„æ˜¯è€ƒè™‘å‡ ä¸ªå¯¹è±¡ï¼š

- æŠŠå¤§è±¡æå–ç‰¹æ€§åˆ°ä¸€ä¸ªç±»ï¼Œå¦‚åŠ¨ç‰©ç±»ï¼›
- å†°ç®±æå–ç‰¹æ€§åˆ°ä¸€ä¸ªç±»ï¼Œå¦‚å®¶ç”µï¼›
- äººæå–ç‰¹æ€§åˆ°ä¸€ä¸ªç±»ï¼Œå¦‚å®æ–½è€…ç±»ï¼›

è¿™æ ·å°±éšç€ä¸šåŠ¡çš„å¤æ‚æ–¹ä¾¿çš„æ‰©å±•äº†ï¼Œæ¯”å¦‚æ¢æˆé•¿é¢ˆé¹¿æ”¾åˆ°å†°ç®±è¡Œä¸è¡Œï¼Ÿå¯ä»¥ï¼å®ä¾‹ä¸€ä¸ªé•¿é¢ˆé¹¿å°±å¯ä»¥äº†ã€‚ä¸‡ç‰©çš†å¯¹è±¡ï¼ä¸ç®¡åšå¤šå¤æ‚çš„ä¸šåŠ¡éƒ½æ˜¯ï¼Œæ‹†è§£å†æ‹†è§£ï¼Œæ‹†è§£åˆ°æœ€åéƒ½ä¸€ä¸ªä¸ªç±»ï¼Œå„ä¸ªç±»ä¹‹é—´çš„äº¤äº’å°±æ˜¯å®Œæˆå°åŠŸèƒ½ï¼Œå¤šä¸ªåŠŸèƒ½å åŠ å°±æ˜¯æ¨¡å—ï¼Œå¤šä¸ªæ¨¡å—å åŠ ï¼Œå°±æ˜¯ç³»ç»Ÿã€å¹³å°äº† â†’ **èšæ²™æˆå¡”**ã€‚ä½†æ˜¯è¯´åˆ°è¿™é‡Œä¹Ÿä¸èƒ½æŠŠ POP å…¨ç›˜å¦å®šï¼ŒOOP æ˜¯ç¨‹åºè®¾è®¡ï¼ŒPOP æ˜¯å†…éƒ¨å®ç°ï¼›å†æ—¥å¸¸å¼€å‘ä¸­ï¼Œç±»çš„å†…éƒ¨åŠ¨ä½œè¿˜æ˜¯ POP çš„ï¼Œè¿™æ˜¯ä¹Ÿæ˜¯å¾ˆæ­£å¸¸çš„ã€‚

å°è£…ã€ç»§æ‰¿ã€å¤šæ€å°±æ˜¯ OOP äº§ç”Ÿå‡ºæ¥çš„æ¨¡å¼

- å°è£…ï¼šç±»ï¼Œä¸€ç§æ•°æ®ç»“æ„ã€ç±»å‹ï¼ŒæŠ½è±¡è½½ä½“
- ç»§æ‰¿ï¼šå¤ç”¨
- å¤šæ€ï¼šåŸºäºé‡å†™æœºåˆ¶(virtual â†’ override)ï¼Œå‡½æ•°æˆå‘˜çš„å…·ä½“è¡Œä¸ºï¼ˆç‰ˆæœ¬ï¼‰ç”±å¯¹è±¡å†³å®šï¼›çˆ¶ç±»å®šä¹‰ä¸ªæ–¹æ³•ä¸å»å®ç°ï¼Œè®©ç»§æ‰¿å®ƒçš„å­ç±»å»å®ç°ï¼Œæ¯ä¸€ä¸ªå­ç±»æœ‰ä¸åŒçš„è¡¨ç°

- é‡å†™ï¼šç»§æ‰¿è¦†ç›–é‡å†™**çˆ¶ç±»**æ–¹æ³•ï¼Œå‚æ•°ä¸ªæ•°ã€è¿”å›ç±»å‹éƒ½ä¸€è‡´ï¼Œé‡å†™çˆ¶ç±»çš„æ–¹æ³•çš„å…·ä½“å®ç°ï¼›
- é‡è½½ï¼š**åŒä¸€ä¸ªç±»**ä¸­çš„æ–¹æ³•ä¸å¦ä¸€ä¸ªæ–¹æ³•åŒåï¼Œä½†æ˜¯å‚æ•°ã€è¿”å›å€¼ä¸åŒï¼Œè¿™ç§æ–¹æ³•ç§°ä¹‹ä¸ºé‡è½½æ–¹æ³•ã€‚

ä»€ä¹ˆæ˜¯æ¥å£å’ŒæŠ½è±¡ç±»ï¼Ÿ

å…·ä½“ç±» â†’ æŠ½è±¡ç±» â†’ æ¥å£ï¼šè¶Šæ¥è¶ŠæŠ½è±¡ï¼Œå†…éƒ¨å®ç°ä¸œè¥¿è¶Šæ¥è¶Šå°‘ã€‚

- æŠ½è±¡ç±»ä¸º**å¤ç”¨è€Œç”Ÿ**ï¼šä¸“é—¨ä½œä¸ºåŸºç±»æ¥ä½¿ç”¨ï¼Œä¹Ÿå…·æœ‰è§£è€¦åŠŸèƒ½ï¼Œå°è£…ç¡®å®šçš„ï¼Œå¼€æ”¾ä¸ç¡®å®šçš„ï¼Œæ¨è¿Ÿåˆ°é€‚åˆçš„å­ç±»å»å®ç°
- æ¥å£æ˜¯â€œçº¯è™šç±»â€æ˜¯ä¸€ä¸ªâ€œåçº¦â€ï¼Œåªæœ‰å‡½æ•°æˆå‘˜ï¼›ä¸º**è§£è€¦è€Œç”Ÿ**ï¼Œâ€œé«˜å†…èšï¼Œä½è€¦åˆï¼ˆä¾èµ–ï¼‰â€
- äºŒè€…éƒ½ä¸èƒ½å®ä¾‹åŒ–ï¼Œåªèƒ½ç”¨æ¥å£°æ˜å˜é‡ã€å¼•ç”¨å…·ä½“ç±»çš„å®ä¾‹

- æ¥å£éš”ç¦»åŸåˆ™ï¼šä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£æ¯”ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£è¦å¥½ï¼Œé¿å…ä½¿ç”¨èƒ–å€Ÿå£ï¼Œä¸€ä¸ªæ¥å£åªæœåŠ¡äºä¸€ä¸ªå­æ¨¡å—æˆ–ä¸šåŠ¡é€»è¾‘;
- å•ä¸€èŒè´£åŸåˆ™ï¼šå±æ€§ä¸è¡Œä¸ºåˆ†å¼€ã€‚

å®ç°åŸåˆ™æ¥å£ç²’åº¦è¦æ§åˆ¶å¥½ï¼Œè¿‡çŠ¹ä¸åŠã€‚

- ä½è€¦åˆï¼šå¯¹è±¡ä¹‹é—´**ä¾èµ–æ€§**
- é«˜å†…èšï¼šå†…èšæ ‡å¿—ä¸€ä¸ªæ¨¡å—å†…å„ä¸ªå…ƒç´ å½¼æ­¤ç»“åˆçš„ç´§å¯†ç¨‹åº¦ï¼Œæ˜¯ä»åŠŸèƒ½è§’åº¦æ¥åº¦é‡æ¨¡å—å†…çš„è”ç³»ï¼Œä¸€ä¸ªå¥½çš„å†…èšæ¨¡å—åº”å½“æ°å¥½åšä¸€ä»¶äº‹ã€‚
- **ç¨‹åºè®²ç©¶çš„æ˜¯ä½è€¦åˆï¼Œé«˜å†…èšã€‚å°±æ˜¯åŒä¸€ä¸ªæ¨¡å—å†…çš„å„ä¸ªå…ƒç´ ä¹‹é—´è¦é«˜åº¦ç´§å¯†ï¼Œä½†æ˜¯å„ä¸ªæ¨¡å—ä¹‹é—´çš„ç›¸äº’ä¾å­˜åº¦å´è¦ä¸é‚£ä¹ˆç´§å¯†ã€‚**å†…èšå’Œè€¦åˆæ˜¯å¯†åˆ‡ç›¸å…³çš„ï¼ŒåŒå…¶ä»–æ¨¡å—å­˜åœ¨é«˜è€¦åˆçš„æ¨¡å—æ„å‘³ç€ä½å†…èšï¼Œè€Œé«˜å†…èšçš„æ¨¡å—æ„å‘³ç€è¯¥æ¨¡å—åŒå…¶ä»–æ¨¡å—ä¹‹é—´æ˜¯ä½è€¦åˆã€‚

ç‰¹æ€§ï¼ˆAttributeï¼‰ç”¨äºæ·»åŠ **å…ƒæ•°æ®**ï¼Œå¦‚ç¼–è¯‘å™¨æŒ‡ä»¤å’Œæ³¨é‡Šã€æè¿°ã€æ–¹æ³•ã€ç±»ç­‰å…¶ä»–ä¿¡æ¯ï¼Œä¸€ä¸ªå£°æ˜æ€§æ ‡ç­¾æ˜¯é€šè¿‡æ”¾ç½®åœ¨å®ƒæ‰€åº”ç”¨çš„å…ƒç´ å‰é¢çš„æ–¹æ‹¬å·ï¼ˆ`[ ]`ï¼‰æ¥æè¿°çš„ã€‚

åå°„ï¼ˆé•œå­é‡Œçš„é•œåƒï¼‰ï¼Œç»™å®šä¸€ä¸ªå¯¹è±¡ï¼Œä¸ç”¨å®ä¾‹åŒ–ï¼ŒçŸ¥é“å…¶ç±»å‹ï¼Œåˆ›å»ºå‡ºåŒç±»å‹ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶è®¿é—®å…¶å±æ€§ï¼Œè¿›ä¸€æ­¥è§£è€¦ã€‚

- æ•°æ®åº“è¯»å– table ç”¨åå°„åˆ°å…·ä½“å®ä½“

   ```C#
   public static T DrToModel<T>(this DataRow dr){
      // è·å–æ³›å‹çš„çœŸå®ç±»å‹
      Type t = typeof(T);
      // å®ä¾‹åŒ– t ç±»å‹å˜é‡
      T md = (T)Activator.CreateInstance(t)
      // è·å–å¯¹è±¡ä¸­çš„å±æ€§
      var props = t.GetProperties();
      foreach(var prop in props){
         if(dr.Table.Columns.Contains(prop.Name)){
            prop.SetValue(md,dr[prop.Name])
         }
      }
      return md;
   }
   ```

ä¾èµ–å€’ç½®ï¼ˆåè½¬ï¼‰åŸåˆ™ï¼šé¢å‘å¯¹è±¡è¯­è¨€ç¨‹åºè®¾è®¡æ—¶ï¼Œé«˜å±‚æ¨¡å—ä¸è¦ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…åº”è¯¥é€šè¿‡æŠ½è±¡æ¥ä¾èµ–ï¼Œä¾èµ–æŠ½è±¡ï¼Œè€Œä¸æ˜¯ä¾èµ–ç»†èŠ‚

- æŠ½è±¡ï¼šæ¥å£-æŠ½è±¡ç±»ç»†èŠ‚ï¼šæ™®é€šç±»
- é¢å‘ç»†èŠ‚ï¼šå†™æ­»ä¾èµ–æŸä¸ªå…·ä½“ç±»å‹

é¢å‘æŠ½è±¡ï¼šå¯ä»¥æ»¡è¶³å¤šä¸ªç±»å‹çš„è¯‰æ±‚ï¼Œè€Œä¸”å¯ä»¥è®©é«˜å±‚ä¸å—åº•å±‚æ‰©å±•å½±å“ï¼Œç»†èŠ‚æ˜¯å¤šå˜çš„ï¼Œè€ŒæŠ½è±¡æ˜¯ç¨³å®šçš„ï¼ŒåŸºäºæŠ½è±¡æ­å»ºçš„æ¶æ„å°±ä¼šç›¸å¯¹ç¨³å®š

- IOCï¼ˆæ§åˆ¶åè½¬ï¼‰ï¼šç¨‹åºç¼–å†™çš„ç›®æ ‡ï¼šæŠŠé«˜å±‚å¯¹ä½å±‚çš„ä¾èµ–å»æ‰ï¼Œæ¢æˆå¯¹æŠ½è±¡çš„ä¾èµ–ï¼Œç»†èŠ‚äº¤ç»™ç¬¬ä¸‰æ–¹æ¥å†³å®šï¼ˆUnity å®¹å™¨ï¼ŒAutoFac å®¹å™¨ï¼‰ï¼Œè¿™å°±æ˜¯æ§åˆ¶åè½¬ï¼›åè½¬çš„ç›®çš„æ˜¯ä¸ºäº†é™ä½ä¾èµ–ï¼Œå¢å¼ºæ‰©å±•è¡Œï¼ŒIOC å®¹å™¨å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç¬¬ä¸‰æ–¹åˆ›å»ºå¯¹è±¡çš„å·¥å‚ï¼Œå®ç° IOC å®¹å™¨å¯ä»¥ä¸ç”¨é‡å¯ç«™ç‚¹ï¼ŒæŠŠå¯¹åº”æ–°ç‰ˆæœ¬ DLL å¯¼å…¥ç«™ç‚¹ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ç”Ÿæ•ˆã€‚
- DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼šæ˜¯å®ç° IOC çš„æ‰‹æ®µï¼›å®ç° IOC æ—¶ä¼šé‡åˆ°å¯¹è±¡ä¾èµ–çš„é—®é¢˜ï¼Œä¾èµ–æ³¨å…¥æ˜¯æŒ‡åœ¨ IOC åˆ›å»ºå¯¹è±¡æ—¶ï¼Œé€šè¿‡ä¸€å®šçš„æŠ€æœ¯æ‰‹æ®µï¼ˆå±æ€§æ ‡è®°ï¼‰ï¼Œå»è‡ªåŠ¨å®Œæˆä¾èµ–å¯¹è±¡çš„åˆ›å»ºå¹¶ä¼ å…¥ï¼ˆåˆ›å»º IBLL å±‚ä¼šå¼•ç”¨ IDAL å±‚ï¼Œç”¨äº† DI ä¼šè‡ªåŠ¨åˆ›å»º IDALå¹¶ä¼ å…¥ï¼‰ï¼

```C#
IBaseService service = UnityFactory.Create<IBaseService>();
SysUser user = service.Find<SysUser>(3);

// UnityFactory çš„ Create æ–¹æ³•å°±æ˜¯ å®ä¾‹åŒ– Unity å®¹å™¨ï¼Œè¯»å–é…ç½®æ–‡ä»¶ ç”Ÿæˆå¯¹åº”çš„å¯¹è±¡ã€‚
```

- Unity å®¹å™¨ï¼šè¿™é‡Œå®¹å™¨å°±æ˜¯ä¸ªå¯¹è±¡ç”Ÿæˆå™¨ï¼Œå°±æ˜¯ä¸ªç¬¬ä¸‰æ–¹åˆ›å»ºå¯¹è±¡çš„å·¥å‚
  - æ„é€ å‡½æ•°æ³¨å…¥ï¼š`[InjectionConstructor]`ï¼Œé»˜è®¤è°ƒç”¨å‚æ•°ä¸ªæ•°æœ€å¤šçš„,æ¨èä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå¯ä»¥ä¸ç”¨å£°æ˜ç‰¹æ€§ï¼Œå¯ä»¥åœ¨æœåŠ¡å±‚å»æ‰å¯¹å®¹å™¨çš„ä¾èµ–ï¼Œ.NetCore å†…ç½®å®¹å™¨ Servicecollection å°±åªæ”¯æŒæ„é€ å‡½æ•°æ³¨å…¥
  - å±æ€§æ³¨å…¥ï¼š`[Dependency]`
  - æ–¹æ³•æ³¨å…¥ï¼š`[InjectionMethod]`

Unity å®¹å™¨é…ç½®ï¼ˆ`Unity. Configuration` åŒ…ï¼‰ï¼šä¸€ä¸ªæ¥å£å®ç°å¤šä¸ªå®ä¾‹ï¼Œå°±ä½¿ç”¨åˆ«ååŒºåˆ†

AOPï¼šé¢å‘åˆ‡ç‰‡ç¼–ç¨‹ï¼Œä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œé¢å¤–æ‰©å±•åŠŸèƒ½ï¼›ç”¨æ¥**æŠ½å–å…¬ç”¨é€»è¾‘ï¼Œç®€åŒ–ä¸šåŠ¡ä»£ç çš„æ–¹å¼**ï¼Œçµæ´»ä½¿ç”¨ AOP å¯ä»¥è®©ä½ çš„ä¸šåŠ¡é€»è¾‘ä»£ç ä¸ä¼šè¿‡åº¦è‡ƒè‚¿ï¼Œä¹Ÿæ˜¯é™¤äº†ç»§æ‰¿ä¹‹å¤–å¦ä¸€ç§å¯å¤ç”¨ä»£ç çš„æ–¹å¼ï¼›æ˜¯å¯¹ OOP çš„ä¸€ç§è¡¥å……ï¼Œè§£å†³é¢å‘å¯¹è±¡è¯­è¨€çš„é™æ€é—®é¢˜ï¼Œèƒ½çªç ´ç±»çš„é™åˆ¶ï¼ŒåŠ¨æ€çš„æ‰©å±•ç±»çš„åŠŸèƒ½ã€‚ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†ç¦»ã€‚

- ä»»æ„æ‰©å±•åŠŸèƒ½ï¼Œèšç„¦ä¸šåŠ¡é€»è¾‘ï¼Œè®©ç¨‹åºæ›´ç®€å•
- ä»£ç å¤ç”¨ï¼Œé›†ä¸­ç®¡ç†ï¼Œå‡å°‘ä»£ç è‡ƒè‚¿ï¼Œä½†åªèƒ½æ‰©å±•é€šç”¨é€»è¾‘ï¼Œä¸èƒ½æ–°å¢ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚ï¼šéªŒè¯ç”¨æˆ·åˆæ³•ï¼Œæ€§èƒ½ã€æ—¥å¿—ç»Ÿè®¡ï¼Œäº‹ç‰©ã€å¼‚å¸¸ã€ç¼“å­˜ã€IP ç­‰å¤„ç†ã€‚
- AOP å¯¹äº .NET å¯ä»¥è¯´æ˜¯æ”¹å˜ç¼–ç¨‹ç†å¿µï¼Œä»¥å‰å†™ä¸ªç®€å•æŸ¥è¯¢å¿…é¡» `try...catch`ã€çƒ­ç‚¹æ•°æ®è¿˜å¾—å†™ç¼“å­˜ã€è¿˜å¾—å†™æ—¥å¿—ï¼Œä¸å†™çš„è¯å°±æ˜¯è£¸å¥”äº†ï¼Œä½†æœ‰äº† AOP åå°±ä¸ç”¨é‡ç‚¹å…³æ³¨è¿™äº›äº†ï¼Œä½ è´Ÿè´£å¥”å°±è¡Œäº†ï¼ŒAOP è´Ÿè´£ç»™ä½ ç©¿è¡£æœã€‚

- é™æ€å®ç°ï¼šä»£ç†æ¨¡å¼ || è£…é¥°å™¨æ¨¡å¼
- åŠ¨æ€å®ç°ï¼šdynamic proxy
- æœ€å¸¸ç”¨çš„ï¼šFilterï¼ŒIOC å®¹å™¨æ‰©å±•
  - .NET MVC ä¸»è¦æœ‰æˆæƒã€å¼‚å¸¸ã€Actionã€Result å››ä¸ª Filter
  - å®ç°åŸç†ï¼šåœ¨ Action è¢«æ‰§è¡Œä¹‹å‰ï¼Œä¸»åŠ¨æ£€æŸ¥æœ‰æ²¡æœ‰ Filter ç‰¹æ€§ï¼Œæœ‰çš„è¯å°±é™åˆ¶æ‰§è¡Œè¿™ä¸ªç‰¹æ€§ã€‚

æ³›å‹ï¼šæ³›åŒ–æ•°æ®ç±»å‹ï¼ˆå¬éŸ³ä¹å°±æ˜¯æ³›å‹ï¼Œå¬å‘¨æ°ä¼¦å°±æ˜¯å…·ä½“ï¼‰ï¼Œè¡¨ç¤ºç±»å‹çš„å˜é‡ï¼Œç”¨å®ƒæ¥ä»£æ›¿æŸä¸ªå®é™…çš„ç±»å‹ç”¨äºç¼–ç¨‹ï¼Œè€Œåé€šè¿‡å®é™…è°ƒç”¨æ—¶ä¼ å…¥æˆ–æ¨å¯¼çš„ç±»å‹æ¥å¯¹å…¶è¿›è¡Œæ›¿æ¢ï¼Œä»¥è¾¾åˆ°ä¸€æ®µä½¿ç”¨æ³›å‹ç¨‹åºå¯ä»¥å®é™…é€‚åº”ä¸åŒç±»å‹çš„ç›®çš„

### åˆ†å¸ƒå¼å¼‚æ­¥é˜Ÿåˆ—

ç½‘ç«™æµè§ˆé‡å•ä½ï¼š

- PV: page view é¡µé¢æµè§ˆé‡
- UVï¼šç‹¬ç«‹è®¿å®¢ï¼ˆcookieè¯†åˆ«çš„ï¼‰
- IPï¼šè®¿é—®è€… IP

ç½‘ç«™è¯·æ±‚æ˜¯å¹¶å‘å¼ï¼Œ100ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªè¯·æ±‚éœ€è¦1sï¼Œååé‡ï¼š100 QPS,æµ‹è¯•æ–¹æ³•ï¼šè‡ªå·±å†™ä¸ªçˆ¬è™«ï¼Œå¤šçº¿ç¨‹æµ‹è¯•ä¸€ä¸‹ï¼Œloadrunner å·¥å…·ã€‚

ç³»ç»Ÿæ‰©å®¹è¿‡ç¨‹ï¼šå› äº‹æˆäººï¼Œè§£å†³é—®é¢˜

1. ç¨‹åºï¼Œæ•°æ®åº“ï¼Œæ–‡ä»¶æœåŠ¡å™¨ï¼ˆåˆ†å¸ƒå¼å‘æ–‡ä»¶ç³»ç»Ÿï¼šTFS,GFS,NFSï¼‰åˆ†å¼€
2. ç¼“å­˜ï¼šä½¿ç”¨ç®€å•ï¼Œæ•ˆæœæ˜æ˜¾ï¼Œé€‚ç”¨å¹¿ï¼Œå¼Šç«¯æ˜¯å®æ—¶æ€§ç­‰ï¼Œæ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥ã€‚
3. é›†ç¾¤ï¼ˆæ°´å¹³æ‰©å±•ï¼‰ï¼šå¤šå°æœåŠ¡å™¨å®Œæˆä¸€å°æœåŠ¡å™¨çš„äº‹å„¿ï¼Œå…±åŒæ‰¿æ‹…ï¼ŒNginx åå‘ä»£ç†
4. é›†ç¾¤ï¼ˆå‚ç›´åˆ‡åˆ†ï¼‰ï¼šä¸šåŠ¡ï¼ˆä¸»ç«™ï¼Œè®ºå›ï¼‰æ‹†åˆ†åˆ°å¤šå°æœåŠ¡å™¨ä¸Šã€‚
   1. æ•°æ®å…±äº«é—®é¢˜ï¼šç”¨æˆ·çŠ¶æ€ï¼šå•ç‚¹ç™»å½•ï¼ŒIndetitiyServer4
   2. A ç³»ç»Ÿçš„æ•°æ® B ç³»ç»Ÿè¦ç”¨ â†’ æ¥å£æœåŠ¡
   3. A ç³»ç»Ÿ æ­¥éª¤1 B ç³»ç»Ÿ æ­¥éª¤ 2 Cç³»ç»Ÿæ­¥éª¤ 3 â†’ é˜Ÿåˆ—
5. åˆ†å¸ƒå¼ï¼šä»¥å‰ä¸€å°ç”µè„‘å®Œæˆå¤šä¸ªæ­¥éª¤åˆ†åˆ°ä¸åŒçš„æœåŠ¡å™¨å…±åŒå®Œæˆ
   1. åˆ†å¸ƒå¼æ¶æ„ï¼šæœåŠ¡æ¨¡å—çš„é‡ç”¨æœåŠ¡è¿˜èƒ½åšå¥½é«˜å¯ç”¨ï¼Œä¼¸ç¼©
   2. åˆ†å¸ƒå¼è®¾è®¡çš„ç¬¬ä¸€è¦åŠ¡å°±æ˜¯ä¸è¦åˆ†å¸ƒå¼
      - ä¸€æ¬¡è¯·æ±‚éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡ï¼Œé£é™©å°±æ˜¯æŒ‡æ•°çº§
      - æ•°æ®ä¸€è‡´æ€§
      - è°ƒç”¨å¤æ‚æ€§ï¼Œä»£ç å¤æ‚æ€§
   3. æ‰€è°“çš„åˆ†å¸ƒå¼æœåŠ¡è°ƒåº¦æ¡†æ¶å°±æ˜¯è§£å†³è¿™äº›é—®é¢˜ï¼šdubbo zookeeper
6. å¾®æœåŠ¡ï¼šç§°ä¹‹ä¸ºå¹³å°æ¶æ„çš„é£æ ¼ï¼Œæ˜¯åˆ†å¸ƒå¼çš„è¿›åŒ–ç‰ˆï¼Œåˆ†å¸ƒå¼æ¶æ„æ˜¯è¢«è¿«çš„ï¼Œå¾®æœåŠ¡æ˜¯ä¸»åŠ¨å¼çš„ï¼Œç²’åº¦æ›´ç»†ï¼šåˆ†å¸ƒå¼äº‹åŠ¡+åˆ†å¸ƒå¼é”+å®¹å™¨ï¼ˆ dockerï¼‰

è¯¥å¦‚ä½•åº”å¯¹å¤§æ•°æ®é«˜å¹¶å‘ï¼Ÿ

1. æ ¹æ®å®é™…æƒ…å†µåˆ†æï¼Œæ‰èƒ½ç»™å‡ºè§£æ±ºæ–¹æ¡ˆ
2. æ ¹æ®ç°æœ‰çš„æ°´å‡†å†è¿›åŒ–,é’ˆå¯¹æ€§æ¥è§£å†³

#### åˆ†å¸ƒå¼

é›†ä¸­å¼ç³»ç»Ÿä¸­æ•´ä¸ªé¡¹ç›®å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œæ•´ä¸ªåº”ç”¨ä¹Ÿå°±æ˜¯æ•´ä¸ªé¡¹ç›®,æ‰€æœ‰çš„ä¸œè¥¿éƒ½åœ¨ä¸€ä¸ªåº”ç”¨é‡Œé¢ã€‚

åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œ**åŸæ¥ç”±ä¸€å°è®¡ç®—æœºå®Œæˆçš„äº‹å„¿ï¼Œç°åœ¨ç”±å¤šå°è®¡ç®—æœºåˆ†æ­¥éª¤ï¼Œåˆä½œå®Œæˆã€‚**è¿™é‡Œå¾—æ³¨æ„åŒºåˆ†ä¸é›†ç¾¤çš„åŒºåˆ«ï¼šç‹­ä¹‰ä¸Šé›†ç¾¤æ˜¯**åŸæ¥ç”±ä¸€å°è®¡ç®—æœºå®Œæˆçš„äº‹å„¿ï¼Œç°åœ¨ç”±å¤šå°è®¡ç®—æœºå…±åŒæ‰¿è½½ï¼Œæ¯å°æœåŠ¡å™¨éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚**å¹¿ä¹‰ä¸Šé›†ç¾¤ä¹Ÿæ˜¯åˆ†å¸ƒå¼ã€‚

åˆ†å¸ƒå¼æ˜¯ç³»ç»Ÿæ¶æ„æ¼”åŒ–å¿…ç„¶åˆ°è¾¾çš„ï¼Œåº”å¯¹**å¤§æ•°æ®ã€é«˜å¹¶å‘**å¿…å¤‡çš„

> å¤‡æ³¨ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¬¬ä¸€è¦åŠ¡å°±æ˜¯ä¸è¦åˆ†å¸ƒå¼!

##### CAP å®šç†ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸‰ä¸ªæŒ‡æ ‡

- **C**onsistency ä¸€è‡´æ€§ï¼šå†™æ“ä½œä¹‹åçš„è¯»æ“ä½œï¼Œå¿…é¡»è¿”å›è¯¥å€¼ï¼›
- **A**vailability å¯ç”¨æ€§ï¼šåªè¦æ”¶åˆ°ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±å¿…é¡»ç»™å‡ºå›åº”ï¼›
- **P**artition tolerance åˆ†åŒºå®¹é”™ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ï¼Œç½‘ç»œæ˜¯ä¸å¯é çš„ã€‚

> æ€ä¹ˆä¿è¯ä¸€è‡´æ€§ï¼Ÿé‚£å°±å¾—é”æ•°æ®äº†ï¼Œé”ä½äº†æ•°æ®æ²¡æœ‰äº†å¯ç”¨æ€§ã€‚æ‰€ä»¥åªè¦ç”¨äº†åˆ†å¸ƒå¼ï¼ŒP æ€»æ˜¯æˆç«‹çš„ï¼Œå‰©ä¸‹çš„ C å’Œ A æ— æ³•åŒæ—¶åšåˆ°ï¼Œè¿™å°±å¾—æ ¹æ®ä¸šåŠ¡éœ€æ±‚å–èˆäº†ï¼›ä½†æ˜¯åˆ†å¸ƒå¼ä¸‹**å¯ç”¨æ€§**æ‰æ˜¯æœ€æ€»è¦ï¼Œå¯¹äºå¤§å¤šæ•°ç³»ç»Ÿæ¥è¯´å¯ç”¨æ€§æ˜¯åŸºçŸ³ã€‚

##### Base ç†è®º

BASEï¼šå…¨ç§°ï¼šBasically Available(åŸºæœ¬å¯ç”¨)ï¼ŒSoft stateï¼ˆè½¯çŠ¶æ€ï¼‰,å’Œ Eventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ï¼Œæ¥è‡ª ebay çš„æ¶æ„å¸ˆæå‡ºã€‚

- åŸºæœ¬å¯ç”¨ï¼ˆä¸èƒ½é˜»å¡ï¼‰ï¼šç³»ç»Ÿï¼Œå‡ºç°äº†ä¸å¯é¢„çŸ¥çš„æ•…éšœï¼Œä½†**ä¸èƒ½é˜»å¡**ï¼Œè¿˜æ˜¯èƒ½ç”¨ï¼š
  - å“åº”æ—¶é—´ä¸Šçš„æŸå¤±ï¼šæ­£å¸¸æƒ…å†µä¸‹ 0.5 ç§’è¿”å›ç»“æœï¼Œè€ŒåŸºæœ¬å¯ç”¨çš„å¯ä»¥åœ¨ 1 ç§’ä½œç”¨è¿”å›ç»“æœã€‚
  - åŠŸèƒ½ä¸Šçš„æŸå¤±ï¼šç”µå•†ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥é¡ºåˆ©å®Œæˆæ¯ä¸€ç¬”è®¢å•ï¼Œä½†æ˜¯åˆ°äº†å¤§ä¿ƒæœŸé—´ï¼Œä¸ºäº†ä¿æŠ¤è´­ç‰©ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé™çº§é¡µé¢ã€‚
- è½¯çŠ¶æ€ï¼ˆä¸­é—´çŠ¶æ€ï¼‰ï¼šç›¸å¯¹äºåŸå­æ€§è€Œè¨€ï¼Œè¦æ±‚å¤šä¸ªèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯ä¸€ç§ â€œç¡¬çŠ¶æ€â€ã€‚è½¯çŠ¶æ€æŒ‡çš„æ˜¯ï¼šå…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨**ä¸­é—´çŠ¶æ€**ï¼Œå¹¶è®¤ä¸ºè¯¥çŠ¶æ€ä¸å½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿåœ¨å¤šä¸ªä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬å­˜åœ¨æ•°æ®å»¶æ—¶ã€‚
- æœ€ç»ˆä¸€è‡´æ€§ï¼šæ•°æ®ä¸å¯èƒ½ä¸€ç›´æ˜¯è½¯çŠ¶æ€ï¼Œåœ¨æœŸé™è¿‡åï¼Œåº”å½“ä¿è¯æ‰€æœ‰å‰¯æœ¬ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚ä»è€Œè¾¾åˆ°**æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§**ã€‚è¿™ä¸ªæ—¶é—´æœŸé™å–å†³äºç½‘ç»œå»¶æ—¶ï¼Œç³»ç»Ÿè´Ÿè½½ï¼Œæ•°æ®å¤åˆ¶æ–¹æ¡ˆè®¾è®¡ç­‰ç­‰å› ç´ ã€‚

BASE ç†è®ºé¢å‘çš„æ˜¯å¤§å‹é«˜å¯ç”¨å¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå’Œä¼ ç»Ÿäº‹åŠ¡çš„ ACID æ˜¯ç›¸åçš„ï¼Œå®ƒå®Œå…¨ä¸åŒäº ACID çš„å¼ºä¸€è‡´æ€§æ¨¡å‹ï¼Œè€Œæ˜¯é€šè¿‡ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥è·å¾—å¯ç”¨æ€§ï¼Œå¹¶å…è®¸æ•°æ®åœ¨ä¸€æ®µæ—¶é—´æ˜¯ä¸ä¸€è‡´çš„ã€‚

###### åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹ CP æ¨¡å¼ï¼Œå¼ºä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ

- 2PCï¼ˆtwo-phase commit protocolï¼‰ æ—¢åˆ†ä¸¤ä¸ªé˜¶æ®µæäº¤ï¼Œä¾é ç¬¬ä¸‰æ–¹åè°ƒè€…ï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰ï¼š

   1. æŠ•ç¥¨é˜¶æ®µï¼ˆvoting phaseï¼‰ï¼šå„å‚ä¸è€…ä¼šå¤„ç†å„è‡ªäº‹åŠ¡ï¼Œæ¨¡æ‹Ÿå‡ºé›¶æ—¶æ•°æ®ã€æ—¥å¿—ï¼Œå¹¶é”ä½æ“ä½œæ•°æ®ï¼Œå°†æ“ä½œç»“æœé€šçŸ¥åè°ƒè€…ï¼›

   2. æäº¤é˜¶æ®µï¼ˆcommit phaseï¼‰ï¼šæ”¶åˆ°å‚ä¸è€…çš„é€šçŸ¥åï¼Œåè°ƒè€…å†å‘å‚ä¸è€…å‘å‡ºé€šçŸ¥ï¼Œæ ¹æ®åé¦ˆæƒ…å†µå†³å®šå„å‚ä¸è€…æ˜¯å¦è¦æäº¤è¿˜æ˜¯å›æ»šï¼›

   ```C#
   using(TransactionScope ts = new TransactionScope())
   {
      // æŠ•ç¥¨é˜¶æ®µ  ä¸¤å°ä¸åŒæ•°æ®åº“
      sqlHelper1.TransferAdd(10000);
      sqlHelper2.TransferRedcue(10000);
      // æ­¤æ—¶æ•°æ®è¢«é”ä½é˜»å¡ï¼Œæ”¾å¼ƒäº†å¯ç”¨æ€§

   // æäº¤é˜¶æ®µ
      ts.Complete();
   }
   ```

   ç¼ºç‚¹ï¼šå¾ˆå¤šï¼Œæœ€è‡´å‘½ç¼ºç‚¹ï¼šåè°ƒè€…æäº¤é˜¶æ®µï¼Œåªæœ‰ä¸€éƒ¨åˆ†å‚ä¸è€…æ¥å—åˆ°äº† commit è¯·æ±‚ï¼Œå‡ºç°äº†æ•°æ®ä¸ä¸€è‡´æ€§çš„ç°è±¡ã€‚

- 3PCï¼ˆthree phase commitï¼‰

å³ä¸‰é˜¶æ®µæäº¤ï¼Œæ˜¯2é˜¶æ®µæäº¤çš„æ”¹è¿›ç‰ˆï¼Œå…¶å°†äºŒé˜¶æ®µæäº¤åè®®çš„â€œå‡†å¤‡é˜¶æ®µâ€ä¸€ä»½ä¸ºäºŒï¼Œå½¢æˆäº†cancommitï¼Œprecommitï¼Œdo commitä¸‰ä¸ªé˜¶æ®µã€‚

#### åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹ AP æ¨¡å¼ åˆ†å¸ƒå¼äº‹åŠ¡ï¼šåŸºäº MQ åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§

##### äº‹åŠ¡

1. **A**tomicity åŸå­æ€§ ä¸€ä¸ªäº‹åŠ¡å¿…é¡»æ˜¯ä¸å¯åˆ†å‰²æœ€å°å•å…ƒï¼Œè¦ä¹ˆå…¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨å›æ»šå¤±è´¥ï¼›
2. **C**onsistency ä¸€è‡´æ€§ï¼šæ•°æ®çŠ¶æ€ä¸€è‡´æ€§ï¼ŒA é“¶è¡Œæ‰£äº†é’±ï¼ŒB é“¶è¡Œå¿…é¡»å¾—æ”¶åˆ°é’±ï¼›
3. **I**solation éš”ç¦»æ€§ï¼šå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¸èƒ½äº’ç›¸å¹²æ‰°ï¼Œåˆ†çº§åˆ«ï¼Œå‚çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼›
4. **D**urability æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåˆ™å…¶æ‰€åšçš„ä¿®æ”¹å°±ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå¦‚æœè¿˜æ²¡å†™å…¥ç£ç›˜ï¼Œå°±å®•æœºäº†ï¼Œä¹Ÿå¯ä»¥æ¢å¤æ•°æ®ã€‚

é“¶è¡Œçš„è·¨è¡Œè½¬è´¦å°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡

1. ä¸Šæœ‰æŠ•é€’æ¶ˆæ¯
2. ä¸‹æ¸¸è·å–æ¶ˆæ¯
3. ä¸Šæœ‰æŠ•é€’ç¨³å®šæ€§
4. ä¸‹æ¸¸æ¥å—ç¨³å®šæ€§

#### å¼‚æ­¥é˜Ÿåˆ—

ä¸»è¦å¤„ç†é«˜å¹¶å‘ï¼Œæ•°æ®åº“å‹åŠ›å¤§ï¼ˆä¸€èˆ¬å°±æ˜¯ æ•°æ®çš„ IO ç“¶é¢ˆï¼Œå¯¼è‡´å®•æœºï¼‰ï¼Œå…¨æ°‘é»‘å®¢ï¼ˆæŠ¢ç¥¨ã€åˆ·ç¥¨ï¼‰DDos æ”»å‡»ã€‚

æµç¨‹è§£æï¼šä»å®¢æˆ·ç«¯ç›´æ¥è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†å†è¿”å›ç»“æœå˜æˆ è¯·æ±‚ â†’ è¿”å›ç­‰å¾…ä¿¡æ¯ â†’ å…¥é˜Ÿ â†’ å¤„ç† â†’ å†æŸ¥è¯¢ â†’ å¾—åˆ°ç»“æœ

ä¼˜åŠ¿ï¼šåŒæ­¥å˜å¼‚æ­¥

1. å¤„ç†é€Ÿåº¦å¿«ï¼Œèµ·ç åƒå€æå‡ååé‡ï¼Œ**è§£å†³æµé‡çˆ†å‘é—®é¢˜** - **å‰Šå³°**
2. **é«˜å¯ç”¨**ï¼Œç³»ç»Ÿä¸ä¼šæŒ‚æ‰ï¼ˆä¼ä¸šçš„ç”Ÿå‘½çº¿ï¼‰
3. æ˜“æ‰©å±•ï¼Œç‰©ç†è§£è€¦ï¼ŒæŠŠæ¥å—è¯·æ±‚å’Œå¤„ç†è¯·æ±‚å®Œå…¨åˆ†å¼€
4. é‡è¯•æœºåˆ¶ â†’ åˆ†å¸ƒå¼äº‹åŠ¡

ç¼ºé™·ï¼šå¼‚æ­¥å°±æ˜¯å¼‚æ­¥ï¼Œæ²¡æœ‰åŒæ­¥çš„ä½“éªŒ

é˜Ÿåˆ—æ¡†æ¶ï¼š

1. RabbitMQï¼šå¼€æºã€è½»é‡çº§ã€å¼€ç®±å³ç”¨ã€æ˜“éƒ¨ç½²ã€æ˜“é›†ç¾¤ï¼›
2. Redis-List
3. RocketMQ: é˜¿é‡Œçš„ï¼Œä¸»è¦æ˜¯ Java
4. Kafkaï¼šä¸é€‚åˆåšä¸šåŠ¡ï¼Œåšå¤§æ•°æ®ï¼Œäººå·¥æ™ºèƒ½
5. MSMQï¼šå¾®è½¯çš„ï¼Œç¬¨é‡ï¼Œä¸æ”¯æŒè·¨å¹³å°

é˜Ÿåˆ—ä¸¤ç§æ¨¡å¼ï¼š

- ç”Ÿäº§æ¶ˆè´¹è€…ï¼šä¸€ä¸ªæ¶ˆæ¯ä¸€æ¬¡å¤„ç†ï¼Œå¦‚ï¼šæŠ¢ç¥¨ï¼Œç§’æ€ï¼ˆéš”ç¦»è¯·æ±‚ä¸æ•°æ®åº“ï¼‰
- å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šä¸€ä¸ªæ¶ˆæ¯è®¢é˜…è€…å„å¤„ç†ä¸€æ¬¡ï¼Œå¦‚ï¼šæŠ¢çº¢åŒ…

é˜Ÿåˆ—è¿˜èƒ½å¹²å•¥ï¼Ÿ

1. å¯¹æ¥ï¼šä¸¤ä¸ªç³»ç»Ÿé—´ï¼Œå¤¸è¿›ç¨‹é€šä¿¡ï¼Œé‡è¯•æœºåˆ¶ï¼Œå¤±è´¥å¯å†è¯• â†’ åˆ†å¸ƒå¼äº‹åŠ¡ï¼›
2. é¡ºåºæ‰§è¡Œå¹¶å‘ä»»åŠ¡ï¼Œå¦‚ï¼šå‘é‚®ä»¶ï¼Œå®šæ—¶ä»»åŠ¡ï¼ˆè®¢å• 24 å°æ—¶å–æ¶ˆï¼‰
3. ç®¡é“é€šä¿¡ï¼Œå¦‚ï¼šIIS è¯·æ±‚å°±æ˜¯ Queue â†’ æœ€å¤§è¿æ¥æ•°æ¦‚å¿µ

### è´Ÿè½½å‡è¡¡

å› ä¸ºé›†ç¾¤ï¼Œéœ€è¦å…¥å£ï¼Œç„¶åè½¬å‘ï¼Œæ‰€ä»¥è´Ÿè½½å‡è¡¡

#### DNS è´Ÿè½½å‡è¡¡

ä¼˜ç‚¹ï¼šé«˜æ•ˆï¼Œå°±è¿‘åŸåˆ™
ç¼ºç‚¹ï¼šåªèƒ½å¯»è½®ï¼Œç‹¬ç«‹ IP è´µï¼Œé”™è¯¯éš¾å‘ç°

#### ç¡¬ä»¶è´Ÿè½½å‡è¡¡

F5ã€Arrayã€Netscaleç­‰ï¼Œç¡¬ä»¶ + è½¯ä»¶æ‰“åŒ…
ä¼˜ç‚¹ï¼šæ€§èƒ½é«˜ï¼Œç¨³å®šå¥½ï¼Œå‚å•†æ”¯æŒ
ç¼ºç‚¹ï¼šçœå¿ƒä¸çœé’±ï¼Œéš¾ä»¥æ‰©å±•ï¼Œä¸€èˆ¬å£•å…¬å¸ç”¨

#### è½¯ä»¶è´Ÿè½½å‡è¡¡

LVSï¼šLinux Virtual Server åŸºäºç½‘ç»œåè®®ç¬¬ 4 å±‚ï¼ˆä¼ è¾“å±‚ï¼‰åè®®ï¼ˆip + portï¼‰è½®è¯¢è½¬å‘(ä¸èƒ½æ ¹æ®æŠ¥æ–‡ä¿¡æ¯è½¬å‘)ï¼Œæ›´åº•å±‚æ›´é«˜æ•ˆï¼Œé…ç½®å¾ˆéš¾

HAProxy åŸºäºç½‘ç»œåè®®ç¬¬ 4 å±‚ / 7å±‚ï¼ˆåº”ç”¨å±‚ï¼‰Http åè®® Http ä¿¡æ¯ï¼ˆheaderï¼‰ï¼Œè½¬å‘å°±æ›´çµæ´»äº†ï¼Œéå¸¸å¼ºå¤§ï¼Œä¹Ÿä¸å¤ªå¥½é…

#### Nginx è´Ÿè½½å‡è¡¡ï¼ˆä¸»æµï¼‰

æ”¯æŒç­–ç•¥ï¼š

- è½®è¯¢ï¼ˆé»˜è®¤ï¼‰
- åŠ æƒè½®è¯¢ï¼ˆweightï¼‰
- ip hashï¼šåŒä¸€ï¼ŒIP åœ°å€è¯»å–åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¯ä»¥å¾ˆå¥½åˆ©ç”¨ç¼“å­˜ï¼ˆSessionï¼‰ï¼Œå…¬å¸å†…éƒ¨ä¸æ¨èä½¿ç”¨
- fairï¼šæ ¹æ®æœåŠ¡å™¨å“åº”æƒ…å†µåšåˆ†é…ï¼Œä¸æ¨èï¼Œä¸ç¨³å®š
- url hashï¼šå•ç‚¹ç™»å½•å¯ä»¥ç”¨åˆ°

ç”¨æˆ·æŒä¹…åŒ–ï¼š

- IP-Haseï¼šå±€é™æ€§å¼º
- Seesion å…±äº«ï¼šInproc / StateServer / **SqlServer / Redis**(ä¸“é—¨æœ‰ä¸ª Redis-Session æ‰©å±•)
- åŸºäº HTTPHeaderï¼šCookie / Tokenï¼ˆJWT/IdentiryServer 4ï¼‰

### åˆ†å¸ƒå¼å¸¦æ¥é—®é¢˜åŠåº”ç”¨åœºæ™¯

é—®é¢˜

1. åˆ†å¸ƒå¼é”
   å•è¿›ç¨‹ä¸‹ï¼Œå¤šçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç”¨ lock é”ä¿è¯åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½è¿›å…¥ï¼›
   å¤šè¿›ç¨‹ï¼ˆåˆ†å¸ƒå¼ï¼‰ä¸‹ï¼Œå¦‚ä½•ä¿è¯è¯¥å¯¹è±¡åœ¨ä»»æ„æ—¶åˆ»åªèƒ½ä¸€ä¸ªçº¿ç¨‹è¿›å…¥å‘¢ï¼Ÿ
   å˜é‡ A æ˜¯æœ‰çŠ¶æ€çš„ï¼Œ**ä¸åŒæœåŠ¡å™¨è¿›ç¨‹å†…è·¨è¿›ç¨‹çš„äº’æ–¥æœºåˆ¶æ¥æ§åˆ¶å…±äº«èµ„æºçš„è®¿é—®**ï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼é”

   ![åˆ†å¸ƒå¼é”](https://cdn.jsdelivr.net/gh/w3ctim/picBed/blog/back/20200515154639.png)

   å®ç°ï¼šå¿…é¡»ä¾èµ–ç¬¬ä¸‰æ–¹
   - åŸºäºæ•°æ®åº“å®ç°ï¼ˆç°åœ¨åŸºæœ¬ä¸ç”¨äº†ï¼‰
      1. åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè¡¨
      2. è¡¨ä¸­åŒ…å«è¯¦ç»†æè¿°æ–¹æ³•çš„å­—æ®µ
      3. åˆ›å»ºå”¯ä¸€ç´ å¼•
      4. æ‰§è¡ŒæŸä¸ªæ–¹æ³•ï¼Œå…ˆæ’å…¥æ•°æ®ï¼ŒæˆåŠŸæ’å…¥åˆ™è·å–é”5æ‰§è¡Œå®Œæˆååˆ é™¤å¯¹åº”çš„è¡Œæ•°æ®é‡Šæ”¾é”
   - åŸºäºRedså®ç°
     1. `setnx(key, valueï¼‰`è·å–é”
     2. `expiret` å‘½ä»¤ä¸ºé”æ·»åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´
     3. `delete(keyï¼‰` é‡Šæ”¾é”
      é—®é¢˜ï¼š
        1. setnxï¼Œexpiret æœ‰é—´éš”ï¼Œ
        2. A åŠ é”ï¼Œæ‰§è¡Œæ…¢ï¼Œè¶…è¿‡ï¼Œé”è‡ªåŠ¨é‡Šæ”¾ï¼Œè¿™æ—¶ B ä¹Ÿè·å–é”ï¼ŒAåˆè·‘æ¥æŠŠé”é‡Šæ”¾äº†ï¼Œvalue åšæˆ guidï¼Œè¦æ¯”è¾ƒå† deleteï¼Œåœ¨æ‰§è¡Œï¼ŒBä¹Ÿåœ¨æ‰§è¡Œï¼Œè¿èƒŒäº†é”çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ³•æ˜¯ç»­ç§Ÿï¼Œ A å†æ¥ä¸ªçº¿ç¨‹å»ç»­å‘½ã€‚
2. ä¿è¯æ¨¡å—ç¨³å®šæ€§ä¸ä¼¸ç¼©æ€§
   å®ç°ï¼šé›†ç¾¤ï¼ŒæœåŠ¡æ³¨å†Œå‘ç°ï¼ˆConsulï¼‰
3. å…¨æ–‡æœç´¢
   æœç´¢å°‘ä¸äº†çš„ï¼Œè€Œä¸”æ˜¯éè§„èŒƒæ€§æœç´¢ä¸æ˜¯ä¸¥æ ¼åŒ¹é…æ•°æ®åº“çš„æ•°æ®æˆ‘çˆ±æˆ‘çš„å®¶-->æˆ‘çˆ±æˆ‘å®¶
   å…³ç³»å‹æ•°æ®åº“ä¹Ÿèƒ½åšåˆ°ï¼Œ`Iikeâ€œ%æˆ‘%â€or`

   å…¨æ–‡æ£€ç´¢æŠ€æœ¯ï¼Œ**åˆ†è¯å»ºç´¢å¼•**ï¼Œæ‹† 3 ä¸ªè¯å­˜å‚¨èµ·æ¥ï¼Œæœç´¢æ—¶ä¹Ÿåˆ†è¯ï¼Œ4 ä¸ªè¯è¿›è¡Œæœç´¢ï¼Œèƒ½åŒ¹é…ï¼Œä¸è¦æ±‚å®Œå…¨åŒ¹é…ï¼Œå°±èƒ½æœ€å¤§ç¨‹åº¦ä¸Šæœç´¢å‡ºç›¸å…³ç»“æœï¼Œå…·ä½“è§£å†³æ–¹æ¡ˆï¼š

   - Lucene å®šåˆ¶
   - Solr
   - **ES** ç”¨çš„æœ€å¤š

åº”ç”¨åœºæ™¯

1. ç§’æ€ç³»ç»Ÿ
   åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¹¶å‘æ›´æ–°åº“å­˜ï¼Œå¯¼è‡´åº“å­˜ä¸ºè´Ÿçš„æƒ…å†µ - **è¶…å–**é—®é¢˜
   1. åŸºäºæ•°æ®åº“çš„é”ï¼šæ‚²è§‚é”ï¼Œæ— æ³•æ»¡è¶³é«˜å¹¶å‘
   2. ä¹è§‚é”ï¼šversionï¼Œå¤šä¸ªå¹¶å‘åªæœ‰ä¸€ä¸ªæˆåŠŸä¸€ä¸ä¼šè¶…å–ï¼Œæ•°æ®åº“å‹åŠ›å¤§ï¼

   é™æµï¼šé™åˆ¶è¯·æ±‚åˆ°è¾¾æ•°æ®åº“
   é˜²è¶…å–ï¼šä¸èƒ½å‡ºç°åº“å­˜ä¸å¤Ÿæ€§èƒ½é«˜
   è§£å†³æ–¹æ¡ˆï¼šRedisï¼šRemote Dictionary Server--è¿œç¨‹å­—å…¸æœåŠ¡å™¨ï¼Œå­˜åœ¨å†…å­˜å¿«é€Ÿè¯»å†™
   å•çº¿ç¨‹å¤šè¿›ç¨‹æ¨¡å‹ï¼šåªæœ‰ä¸€ä¸ªæ‰§è¡Œæµï¼Œåªæœ‰ä¸€ä¸ªäººåŠäº‹å„¿ï¼Œ10wQPS/ç§’ ä¸€æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ˆåŸå­æ€§ï¼‰
   æ•°æ®åº“ 100 ä¸ªå•†å“ä¸€å¯¼å…¥ Redis ï¼Œè¯·æ±‚å…ˆèµ° Redisï¼ˆæ€§èƒ½é«˜ï¼‰ï¼Œæ²¡æœ‰å°±ç›´æ¥å¤±è´¥äº†ï¼ˆé™æµï¼‰- incr-decr(+1è¿”å›ä½™é¢-1è¿”å›ä½™é¢ï¼‰ï¼ˆåŸå­æ€§é˜²æ­¢è¶…å–ï¼‰

2. åˆ·æ¦œ
   ç›´æ’­é—´åˆ·ç¤¼ç‰©ï¼Œå®æ—¶ç»Ÿè®¡æ’è¡Œï¼›ç»Ÿè®¡æµæ°´ï¼Œéœ€è¦çœ‹æˆ¿é—´æ’åç¬¬
   å¼ ä¸‰-æˆ¿é—´-æ€»æ•°-å¤©/å‘¨/æœˆ/å¹´-ä¸»æ’­æ¦œ-ä¸å¯èƒ½åŒæ­¥æ›´æ–°ï¼Œäº‹åç»Ÿè®¡å®æ—¶ï¼Œå¿…é¡»å®æ—¶ï¼Œå®æ—¶æ’è¡Œé—®é¢˜
   Redis-(Webä¹‹å‹ï¼Œå¤šç§æ•°æ®ç»“æ„ï¼Œéƒ½æ˜¯ä¸ºå…·ä½“çš„Webé—´é¢˜è€Œç”Ÿï¼‰zSet -- æœ‰åºçš„åˆ—è¡¨ï¼Œ1 ä¸ª key å¯¹ä¸€ç»„æ•°ç»„ -- åˆ·ç¤¼ç‰©å°±å¢åŠ ä¸‹  key--values+score

### å¾®æœåŠ¡æ¶æ„ï¼ˆ Microservice Architectureï¼‰

å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ä¸ªç”¨åˆ†å¸ƒå¼æœåŠ¡æ‹†åˆ†ä¸šåŠ¡é€»è¾‘ï¼Œå®Œæˆè§£è€¦çš„æ¶æ„æ¨¡å¼ã€‚

#### SOA é¢å‘æœåŠ¡æ¶æ„

Service-Oriented Architecture é¢å‘æœåŠ¡æ¶æ„ï¼šæ˜¯ä¸€ä¸ªç»„ä»¶æ¨¡å‹ï¼Œå®ƒå°†åº”ç”¨
ç¨‹åºçš„ä¸åŒåŠŸèƒ½å•å…ƒï¼ˆç§°ä¸ºæœåŠ¡ï¼‰è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶é€šè¿‡è¿™äº›æœåŠ¡ä¹‹é—´å®šä¹‰è‰¯å¥½çš„æ¥å£å’Œåè®®è”ç³»èµ·æ¥ã€‚
SOA æ˜¯å¯¹ç°æœ‰ç³»ç»Ÿçš„å‡çº§æ”¹è¿›æ•´åˆï¼Œé€šè¿‡æ•°æ®æ€»çº¿ä¸²è”èµ·æ¥ã€‚

SOA VS Micro Service

1. SOA æ˜¯ä¸ºé‡ç”¨ï¼Œå¾®æœåŠ¡æ˜¯ä¸ºäº†é‡å†™
2. SOA æ›´æ°´å¹³ï¼Œå¾®æœåŠ¡æ˜¯å‚ç›´çš„
3. SOA è‡ªä¸Šè€Œä¸‹ï¼Œå¾®æœåŠ¡è‡ªä¸‹è€Œä¸Š

### docker

ä¼˜ç‚¹ï¼š

1. è¿è¡Œç¯å¢ƒä¸€è‡´ï¼Œä¸ä¼šå‡ºç°â€œè¿™æ®µä»£ç åœ¨æˆ‘æœºå™¨ä¸Šè¿è¡Œæ²¡é—®é¢˜å•Šâ€çš„æƒ…å†µï¼›
2. é«˜æ•ˆåˆ©ç”¨ç³»ç»Ÿèµ„æºï¼›
   - oldï¼šä¸»æœº â†’ ä¸»æœºæ“ä½œç³»ç»Ÿ â†’ è™šæ‹Ÿ
   æœº â†’ å¤šä¸ªè™šæ‹Ÿæœº â†’ åº”ç”¨ï¼›
   - dockerï¼šä¸»æœº â†’ æ“ä½œç³»ç»Ÿ â†’ dockerï¼ˆå¼•æ“ï¼‰ â†’ åº”ç”¨ã€‚
3. æ›´è½»æ¾çš„è¿ç§»ï¼Œæ— è®ºæ˜¯ç‰©ç†æœºã€è™šæ‹Ÿæœºã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘å…¶è¿è¡Œç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼›

## æ•°æ®åº“ & è¯»å†™åˆ†ç¦»è´Ÿè½½å‡è¡¡

å…ƒæ•°æ®ï¼šæè¿°æ•°æ®çš„æ•°æ®ã€‚ä¸ªäººä¿¡æ¯æ˜¯è¢«æè¿°çš„å¯¹è±¡ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„å®ä½“æ•°æ®ï¼Œè€Œå§“åã€æ€§åˆ«ã€é•¿ç›¸ã€æ€§æ ¼ã€ä½å€å°±æ˜¯æè¿°å°èŠ³è¿™ä¸ªäººçš„å…ƒæ•°æ®ã€‚
ä¸»æ•°æ®ï¼ˆMaster Dataï¼‰æŒ‡ç³»ç»Ÿé—´å…±äº«æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œå®¢æˆ·ã€ä¾›åº”å•†ã€è´¦æˆ·å’Œç»„ç»‡éƒ¨é—¨ç›¸å…³æ•°æ®ï¼‰

### äº‹åŠ¡éš”ç¦»çº§åˆ«

éš”ç¦»æ€§çº§åˆ«ï¼šéš”ç¦»çº§åˆ«è¶Šé«˜,è¯»æ“ä½œçš„è¯·æ±‚é”å®šå°±è¶Šä¸¥æ ¼,é”çš„æŒæœ‰æ—¶é—´ä¹…è¶Šé•¿;æ‰€ä»¥éš”ç¦»çº§åˆ«è¶Šé«˜,ä¸€è‡´æ€§å°±è¶Šé«˜,å¹¶å‘æ€§å°±è¶Šä½,åŒæ—¶æ€§èƒ½ä¹Ÿç›¸å¯¹å½±å“è¶Šå¤§

- è„è¯»ï¼šäº‹åŠ¡ A æ’å…¥æˆ–ä¿®æ”¹ä¸€æ¡æ•°æ®ï¼Œä½†è¿˜æœªåšæäº¤æˆ–å›æ»šå¤„ç†ï¼ŒB äº‹åŠ¡å´å¯ä»¥è¯»å–è¯¥æ¡æ•°æ®ï¼Œè¿™æ¡æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚
- ä¸å¯é‡å¤è¯»ï¼šäº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡ B åœ¨äº‹åŠ¡ A å¤šæ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ä½œäº†æ›´æ–°å¹¶æäº¤ï¼Œå¯¼è‡´äº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœä¸ä¸€è‡´ã€‚
- å¹»è¯»ï¼šç³»ç»Ÿç®¡ç†å‘˜Aå°†æ•°æ®åº“ä¸­æ‰€æœ‰å­¦ç”Ÿçš„æˆç»©ä»å…·ä½“åˆ†æ•°æ”¹ä¸ºABCDEç­‰çº§ï¼Œä½†æ˜¯ç³»ç»Ÿç®¡ç†å‘˜Bå°±åœ¨è¿™ä¸ªæ—¶å€™æ’å…¥äº†ä¸€æ¡å…·ä½“åˆ†æ•°çš„è®°å½•ï¼Œå½“ç³»ç»Ÿç®¡ç†å‘˜Aæ”¹ç»“æŸåå‘ç°è¿˜æœ‰ä¸€æ¡è®°å½•æ²¡æœ‰æ”¹è¿‡æ¥ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œè¿™å°±å«å¹»è¯»ã€‚

> ä¸å¯é‡å¤è¯»çš„å’Œå¹»è¯»å¾ˆå®¹æ˜“æ··æ·†ï¼Œä¸å¯é‡å¤è¯»ä¾§é‡äºä¿®æ”¹ï¼Œå¹»è¯»ä¾§é‡äºæ–°å¢æˆ–åˆ é™¤ã€‚è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜åªéœ€é”ä½æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè§£å†³å¹»è¯»éœ€è¦é”è¡¨

| äº‹åŠ¡éš”ç¦»çº§åˆ«                 | è„è¯» | ä¸å¯é‡å¤è¯» | å¹»è¯» | è¯´æ˜                                                                                                                                          |
| ---------------------------- | ---- | ---------- | ---- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| è¯»æœªæäº¤ï¼ˆread-uncommittedï¼‰ | æ˜¯   | æ˜¯         | æ˜¯   | æœ€ä½çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«åˆ«çš„äº‹åŠ¡çœ‹åˆ°                                                                          |
| ä¸å¯é‡å¤è¯»ï¼ˆread-committedï¼‰ | å¦   | æ˜¯         | æ˜¯   | ä¿è¯ä¸€ä¸ªäº‹ç‰©æäº¤åæ‰èƒ½è¢«å¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»å–ã€‚å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¸èƒ½è¯»å–è¯¥äº‹ç‰©æœªæäº¤çš„æ•°æ®                                                              |
| å¯é‡å¤è¯»ï¼ˆrepeatable-readï¼‰  | å¦   | å¦         | æ˜¯   | å¤šæ¬¡è¯»å–åŒä¸€èŒƒå›´çš„æ•°æ®ä¼šè¿”å›ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„å¿«ç…§ï¼Œå³ä½¿å…¶ä»–äº‹åŠ¡å¯¹è¯¥æ•°æ®åšäº†æ›´æ–°ä¿®æ”¹ã€‚äº‹åŠ¡åœ¨æ‰§è¡ŒæœŸé—´çœ‹åˆ°çš„æ•°æ®å‰åå¿…é¡»æ˜¯ä¸€è‡´çš„ã€‚Sql Server é»˜è®¤çº§åˆ« |
| ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰       | å¦   | å¦         | å¦   | å¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„å‘ç”Ÿã€‚èŠ±è´¹æœ€é«˜ä»£ä»·ä½†æœ€å¯é çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚                                                                      |

### é”

> äº‹åŠ¡ Aã€B å…ˆåä¿®æ”¹ä¸€æ¡æ•°æ®ï¼ŒA å…ˆä¿®æ”¹ï¼Œä½†æœªæäº¤ï¼Œè¿™è¡Œæ•°æ®å°±è¢«é”å®šäº†ï¼ŒB è¦ä¿®æ”¹å¿…é¡»ç­‰å¾… A æäº¤æˆ–å›æ»šå³é‡Šæ”¾é”ï¼›äº‹åŠ¡ A ä¿®æ”¹æ•°æ®æ£€ç´¢å­—æ®µ å¦‚æœåŠ äº†ç´¢å¼•å°±é”è¡Œï¼Œå¦åˆ™é”è¡¨ã€‚

- è¡Œçº§é”ï¼šå¼€é”€å¤§ï¼Œé”è¡¨æ…¢ï¼Œé«˜å¹¶å‘ä¸‹å¯å¹¶è¡Œå¤„ç†ï¼Œæ€§èƒ½æ›´é«˜ã€‚
- è¡¨çº§é”ï¼šé”è¡¨å¿«ï¼Œæ€§èƒ½ä½ã€‚

- æ‚²è§‚é”ï¼ˆæ•°æ®åº“æä¾›åŠŸèƒ½ï¼‰ï¼šç›¸ä¿¡å¹¶å‘æ˜¯ç»å¤§éƒ¨åˆ†çš„ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¿…é¡»è¦è¾¾åˆ°ç›®çš„çš„ï¼Œä¿è¯è‡ªæŸ¥è¯¢èµ·ç›´åˆ°äº‹åŠ¡ç»“æŸä¸ä¼šè¢«å…¶ä»–äº‹åŠ¡è¯»å–ä¿®æ”¹ï¼Œé¿å…äº§ç”Ÿè„æ•°æ®ï¼›ä¸€å®šæˆåŠŸï¼Œä½†åœ¨å¹¶å‘é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ä¼šé€ æˆå¾ˆé•¿å µå¡ç”šè‡³è¶…æ—¶ï¼Œä»…é€‚åˆå°å¹¶å‘çš„æƒ…å†µã€‚
  - å…±äº«é”ï¼ˆè¯»/Sé”ï¼‰ï¼šå…¶å®ƒç”¨æˆ·å¯ä»¥å¹¶å‘è¯»å–ï¼ŒæŸ¥è¯¢æ•°æ®ï¼Œä½†ä¸èƒ½å¢åˆ æ”¹æ•°æ®ã€‚
  - æ’ä»–é”ï¼ˆå†™/Xé”ï¼‰ï¼šå…¶ä»–äº‹ç‰©å¯¹å·²åŠ é”æ•°æ®ï¼Œä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™

   ```sql
   declare @count as int
   begin tran
      select @count=count from tb WITH(UPDLOCK)
   ã€€ã€€ WAITFOR DELAY '00:00:05' --æ¨¡æ‹Ÿå¹¶å‘ï¼Œæ•…æ„å»¶è¿Ÿ5ç§’
      update tb set count=@count-1
   commit tran
   ```

- ä¹è§‚é”ï¼ˆäººä¸ºæ§åˆ¶åŠŸèƒ½ï¼‰ï¼šç›¸ä¿¡å¹¶å‘æ˜¯æå°‘æ•°çš„ï¼Œå‡è®¾è¿æ°”ä¸å¥½é‡åˆ°äº†ï¼Œå°±æ”¾å¼ƒå¹¶è¿”å›ä¿¡æ¯å‘Šè¯‰å®ƒå†æ¬¡å°è¯•ï¼Œå› ä¸ºå®ƒæ˜¯æå°‘æ•°å‘ç”Ÿçš„ï¼›ä¸ä¸€å®šæ¯æ¬¡éƒ½ä¿®æ”¹æˆåŠŸï¼Œä½†èƒ½å……åˆ†åˆ©ç”¨ç³»ç»Ÿçš„å¹¶å‘å¤„ç†æœºåˆ¶ï¼Œåœ¨å¤§å¹¶å‘é‡çš„æ—¶å€™æ•ˆç‡è¦é«˜å¾ˆå¤šã€‚
è§£å†³æ–¹å¼æ˜¯ï¼Œåœ¨è¡¨é‡ŒåŠ ä¸€åˆ—æ—¶é—´æˆ³æˆ–è€…ç‰ˆæœ¬å·å­—æ®µï¼Œæ¯æ¬¡ä¿®æ”¹å‰å…ˆæŸ¥è¯¢å‡ºæ—¶é—´æˆ³ï¼Œå†æŠŠä¿®æ”¹æ¡ä»¶åŠ ä¸Šæ—¶é—´æˆ³ã€‚

   ```sql
   --é¦–å…ˆç»™è¡¨åŠ ä¸€åˆ—timestamp
   ALTER TABLE ttt ADD timesFlag TIMESTAMP NOT null

   ç„¶åæ›´æ–°æ—¶åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦è¢«ä¿®æ”¹
   declare @count as int
   DECLARE @flag AS TIMESTAMP
   DECLARE @rowCount AS int
   begin tran
      select @count=COUNT,@flag=timesflag from ttt
      WAITFOR DELAY '00:00:05' --æ¨¡æ‹Ÿå¹¶å‘ï¼Œæ•…æ„å»¶è¿Ÿ5ç§’
      update ttt set count=@count-1 WHERE timesflag=@flag --è¿™é‡ŒåŠ äº†æ¡ä»¶
      SET @rowcount=@@ROWCOUNT  --è·å–è¢«ä¿®æ”¹çš„è¡Œæ•°
   commit TRAN

   --å¯¹è¡Œæ•°è¿›è¡Œåˆ¤æ–­å³å¯
   IF @rowCount=1
      PRINT 'æ›´æ–°æˆåŠŸ'
   ELSE
      PRINT 'æ›´æ–°å¤±è´¥'
   ```

### è¯»å†™åˆ†ç¦»ï¼Œè´Ÿè½½å‡è¡¡

æ•°æ®åº“ä¸€èˆ¬æ˜¯æ•´ä¸ªç³»ç»Ÿä¸­çš„å†³å®šæœ¨æ¡¶æœ€çŸ­é‚£å—æ¿ï¼Œæ ¹æ® 2 / 8 åŸåˆ™è¯»å–åˆ†ç¦»ã€‚

è¯»å†™åˆ†ç¦»ï¼Œè´Ÿè½½å‡è¡¡ï¼›Sql Server ä¸»è¦ä¸‰ä¸ªå¯¹è±¡ï¼Œä¸»åº“ï¼ˆå†™ï¼‰ï¼Œä»åº“ï¼ˆè¯»ï¼Œå¯å¤šä¸ªï¼‰ï¼Œåˆ†å‘æœåŠ¡ï¼›

- åˆ†å‘æœåŠ¡å™¨ï¼šå‘å¸ƒè®¢é˜…å½¢å¼ï¼Œä¸»åº“å†™å®ŒæŠŠ**æ—¥å¿—**å¯¹æ¨åˆ°å‘å¸ƒæœåŠ¡å™¨ï¼Œä¸»åº“ä»»åŠ¡å°±å®Œæˆäº†ï¼Œç„¶ååˆ†å‘æœåŠ¡å™¨æŸ¥çœ‹é‚£äº›ä»åº“è®¢é˜…äº†ï¼Œå³æ¨é€æ›´æ”¹æ¶ˆæ¯ã€‚
  - å¿«ç…§å‘å¸ƒï¼šå¿«ç…§å¤åˆ¶æŒ‡åœ¨æŸä¸€æ—¶åˆ»ï¼Œæœ‰å»¶è¿Ÿï¼›
  - äº‹åŠ¡å‘å¸ƒï¼šå‡ ä¹æ— å»¶è¿Ÿï¼Œç§’çº§ï¼Œçœ‹ç½‘ç»œæœåŠ¡å™¨æƒ…å†µ

- ä»åº“è°ƒåº¦ç­–ç•¥ï¼š
  - è½®è¯¢ï¼šå®šä¹‰ä¸€ä¸ªè‡ªåŠ ä¸€çš„æ•°ï¼Œå–ä½™ä»åº“ä¸ªæ•°ï¼›`i++ % æ•°æ®åº“.count`
  - æƒé‡ï¼šæŒ‰ç…§æƒé‡ç”Ÿæˆéšæœºæ•°ï¼ŒåŠ æƒéšæœºç®—æ³•; '6:3:1' `6 : 0 <= Math.random() < 0.6; 3 : 0.6 <= Math.random() < 0.7;...`

- éšç€ä¸šåŠ¡ä¸æ–­å¢åŠ ï¼Œåªæœ‰ä¸€ä¸ªä¸»åº“å†™çš„ä»»åŠ¡è¶Šæ¥è¶Šé‡ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ
  - åˆ†æ²»æ€æƒ³
    - åˆ†åº“ï¼šä¸€åº“å˜å¤šåº“
      - å‚ç›´åˆ†åº“ï¼šæŒ‰ä¸šåŠ¡æ‹†åˆ†ï¼Œå¦‚ï¼šé—®ç­”ï¼Œè®ºå›ï¼Œåšå®¢ï¼Œæ–°é—»
      - æ°´å¹³åˆ†åº“ï¼šæŒ‰æ•°æ®æ‹†åˆ†ï¼Œå¤šä¸ªåº“ç»“æ„ä¸€æ¨¡ä¸€æ ·ï¼Œå¦‚ï¼šåˆ†åœ°åŒºã€ç±»åˆ«ã€æ—¶é—´å­˜å‚¨
    - è¡¨åˆ†åŒºï¼Œè§£å†³å•è¡¨æ•°æ®é‡å¤§é—®é¢˜ï¼ˆä½†ä¸å¥½ç®¡ç†ï¼‰
      - å‚ç›´åˆ†è¡¨ï¼šå¸¸è¯»å†™çš„å­—æ®µåˆ†ä¸€ä¸ªè¡¨ï¼Œä¸å¸¸å†™ä½†å†…å®¹å¤§å­—æ®µåˆ†ä¸€ä¸ªè¡¨ï¼Œå¦‚ï¼šæ–°é—»æ ‡é¢˜ä¸å†…å®¹
      - æ°´å¹³åˆ†è¡¨ï¼šå¤šè¡¨ç»“æ„ä¸€æ¨¡ä¸€æ ·ï¼ŒæŒ‰æ—¶é—´æ‹†åˆ†

- åˆ†åº“åˆ†è¡¨åï¼Œè·¨åº“è·¨è¡¨æ€ä¹ˆæŸ¥è¯¢ï¼Ÿ
  1. é¿å…è·¨åº“è·¨è¡¨ï¼šè®¾è®¡è¦æ³¨æ„ï¼ˆç§Ÿæˆ¿ç½‘è‚¯å®šåˆ†åœ°åŒºï¼Œç”µå•†å¾—æŒ‰æ—¶é—´ï¼‰
  2. é¿å…ä¸äº†å‘¢ï¼Ÿ é¦–å…ˆä¸å…è®¸ link
     1. è€æ¿å–œæ¬¢çœ‹æŠ¥è¡¨ï¼Œç»Ÿæ½å…¨å±€ï¼Œå†æä¸ªæ€»åº“ï¼Œæ™šä¸ŠåŒæ­¥ä¸€å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„
     2. å°±æä¾›æœåŠ¡è·å–ï¼Œä¸è¦ç›´è¿æ•°æ®åº“
     3. åˆ†é¡µæ€»æ•° Nosql ç»Ÿè®¡æ•°æ® / å…¶ä»–æŠ€æœ¯(æœç´¢å¼•æ“) / ä¸šåŠ¡å¦¥åï¼ˆé¦–é¡µä¸åˆ†é¡µï¼Œæ˜¾ç¤ºæ›´å¤šæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®åå†åˆ†é¡µï¼‰
  3. ä¸šåŠ¡å¦¥åï¼šæŠ€æœ¯è·Ÿä¸šåŠ¡æ˜¯è¦åä½œçš„ï¼ˆå‡åä¸€ä¸‹ï¼šæ¶æ„å¸ˆå°±æ˜¯è§£å†³é—®é¢˜çš„ï¼Œå¦‚æœ‰æ— æ­¢å¢ƒçš„é—®é¢˜ï¼Œé’±èƒ½è§£å†³å°±ç”¨é’±ï¼Œé’±è§£å†³ä¸äº†å°±ç”¨æŠ€æœ¯ï¼ŒæŠ€æœ¯ä¸èƒ½å®ç°çš„å°±åªèƒ½ä¸šåŠ¡å¦¥åï¼‰

### ç´¢å¼•ï¼ˆç›®å½•ï¼‰

å»ºç´¢å¼•çš„åŸåˆ™ï¼šç»å¸¸ä¸ºæŸ¥è¯¢æ¡ä»¶ã€æ’åºã€ä¸å…¶ä»–è¡¨å…³è”å­—æ®µçš„ï¼›ç›¸åï¼šç»å¸¸æ›´æ–°å­—æ®µï¼Œæˆ–é‡å¤æ•°æ®å€¼ï¼ˆæ€§åˆ«ï¼‰ä¸å»ºç«‹ç´¢å¼•

å¦‚æœä»¥å­˜å‚¨ç»“æ„ç»“æ„æ¥åŒºåˆ†ï¼Œæœ‰èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ï¼›å¦‚æœä»¥æ•°æ®çš„å”¯ä¸€æ€§æ¥åŒºåˆ†ï¼Œåˆ™æœ‰å”¯ä¸€ç´¢å¼•å’Œéå”¯ä¸€ç´¢å¼•ï¼›è‹¥ä»¥é”®åˆ—ä¸ªæ•°æ¥åŒºåˆ†ï¼Œæœ‰å•åˆ—ç´¢å¼•ä¸å¤šåˆ—ç´¢å¼•ç­‰ã€‚

- æ™®é€šç´¢å¼•ï¼šä¸€ä¸ªç´¢å¼•å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¤šä¸ªå•åˆ—ç´¢å¼•
- å”¯ä¸€ç´¢å¼•ï¼šè®¾ä¸ºå”¯ä¸€çº¦æŸè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œç´¢å¼•åˆ—å€¼å¿…é¡»å”¯ä¸€ï¼Œå…è®¸ä¸º null
- ä¸»é”®ç´¢å¼•ï¼šè®¾ä¸ºä¸»é”®å°±è‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œä¸èƒ½ä¸º null
- å¤æ ¸ç´¢å¼•ï¼šä¸€ä¸ªç´¢å¼•åŒ…å«å¤šåˆ—
- èšé›†ç´¢å¼•ï¼ˆCLUSTEREDï¼‰ï¼šèšé›†ç´¢å¼•å°±ç›¸å½“äºä½¿ç”¨å­—å…¸çš„æ‹¼éŸ³æŸ¥æ‰¾ï¼Œå› ä¸ºèšé›†ç´¢å¼•å­˜å‚¨è®°å½•æ˜¯ç‰©ç†ä¸Šè¿ç»­å­˜åœ¨çš„ï¼Œå³æ‹¼éŸ³ a è¿‡äº†åé¢è‚¯å®šæ˜¯ b ä¸€æ ·ã€‚
- éèšé›†ç´¢å¼•ï¼ˆNONCLUSTEREDï¼‰ï¼šéèšé›†ç´¢å¼•å°±ç›¸å½“äºä½¿ç”¨å­—å…¸çš„éƒ¨é¦–æŸ¥æ‰¾ï¼Œéèšé›†ç´¢å¼•æ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ï¼Œç‰©ç†å­˜å‚¨å¹¶ä¸è¿ç»­ã€‚

æ•°æ®åº“ä¼˜åŒ–ï¼š

å°è¡¨é©±åŠ¨å¤§è¡¨

å·¦è¿æ¥:left on, ä¾æ¬¡éå†å·¦è¾¹è¿™ä¸ªè¡¨ï¼ŒæŸ¥è¯¢åœ¨å³è¡¨ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„è®°å½•,å¦‚æœæœ‰å¯¹åº”è®°å½•,åˆ™åŒ¹é…,å¦åˆ™æ˜¾ç¤ºnull

è®¾è®¡æ•°æ®åº“ä¸‰å¤§èŒƒå¼ï¼šå‡å°‘å†—ä½™

- ç¬¬ä¸€èŒƒå¼ï¼šæ¯ä¸€åˆ—éƒ½æ˜¯å•ä¸€å±æ€§æ•°æ®é¡¹ï¼Œå¦‚ï¼š`å®¶åº­ä¿¡æ¯`å­—æ®µï¼šâ€œ3å£äººï¼ŒåŒ—äº¬â€ï¼Œæ˜¯è¦æ‹†åˆ†ä¸º`äººå£`ï¼Œ`åœ°å€`åˆ†åˆ«å­˜å‚¨
- ç¬¬äºŒèŒƒå¼ï¼šè¡¨ä¸­åªèƒ½æœ‰ä¸€ä¸ªä¸šåŠ¡ä¸»é”®ï¼Œæ¯ä¸€åˆ—éƒ½å’Œä¸»é”®ç›¸å…³ï¼Œè€Œä¸èƒ½åªä¸ä¸»é”®çš„æŸä¸€éƒ¨åˆ†ç›¸å…³ï¼›å¦‚ï¼šè®¢å•è¡¨ï¼Œè®¢å•IDï¼Œè®¢å•æ—¶é—´ã€é‡‘é¢ï¼Œè®¢å•äº§å“ã€‚
- ç¬¬ä¸‰èŒƒå¼ï¼šè¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éä¸»å…³é”®å­—ä¿¡æ¯ï¼Œéƒ¨é—¨ä¿¡æ¯è¡¨ï¼šåŒ…å«ç”¨æˆ·IDï¼Œä¸èƒ½å†å­˜ç”¨æˆ·å§“åã€‚

é€‚å½“åœ°åèŒƒå¼ï¼Œä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦ã€‚

åˆ†é¡µï¼š

```sql
select top @pagesize * from (
ã€€ã€€ã€€ã€€select *, ROW_NUMBER() OVER(Order by id) AS RowNumber from table_name
ã€€ã€€) as t
ã€€ã€€where RowNumber >ï¼ˆ@pageNum-1ï¼‰* @pageSize

-- or

-- limitï¼šä»ç¬¬ N æ¡å¼€å§‹è¯» â€œï¼Œâ€ åˆ†å¼€åä¸ºè¯»å–å¤šå°‘è¡Œ
select * from tablename limit (@pageNum-1)*pageSize,@pageSize
```

### Redis æœ‰å“ªäº›å¥½å¤„

1. é€Ÿåº¦å¿«ï¼Œå› ä¸ºæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äº HashMapï¼ŒHashMap çš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)
2. æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹ï¼Œæ”¯æŒ stringï¼Œlistï¼Œsetï¼Œsorted setï¼Œhash
3. æ”¯æŒäº‹åŠ¡ï¼Œæ“ä½œéƒ½æ˜¯åŸå­æ€§ï¼Œæ‰€è°“çš„åŸå­æ€§å°±æ˜¯å¯¹æ•°æ®çš„æ›´æ”¹è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ
4. ä¸°å¯Œçš„ç‰¹æ€§ï¼šå¯ç”¨äºç¼“å­˜ï¼Œæ¶ˆæ¯ï¼ŒæŒ‰ key è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåå°†ä¼šè‡ªåŠ¨åˆ é™¤

Redis æŒ‚äº†æ€ä¹ˆåŠ:

- å“¨å…µæ¨¡å¼ï¼š
- Redis Cluster: åˆ†ç‰‡å­˜å‚¨ï¼Œä¸»ä»æ•°æ®åº“

## æ‰‹å†™ & ç®—æ³•

1. ajax

   ```js
   function ajax(){
     return new Promise((resolve,reject) => {
         let xhr = new XMLHttpRequest()
         xhr.open('POST', '/xxxx')
         xhr.send('a=1&b=2');
         xhr.onload = function(){
            if(xhr.readyState === 4 && xhr.status === 200){
               resolve(xhr.response);
            }
            else{
               reject("åŠ è½½å¤±è´¥");
            }
         }
         xhr.onerror = function(){
            reject(this);
         }
      })
   }
   ```

1. URL å‚æ•°

   ```js
   const url = 'https://www.baidu.com/s?ie=UTF-8&wd=asdf';
   const obj ={};
   url.replace(/([^?=&]+)=([^?=&#]+)/g,function(match,p1,p2){
      // match ä¸ºæ¯æ¬¡åŒ¹é…çš„å†…å®¹
      // p1 ä¸ºç¬¬ä¸€ä¸ªåˆ†ç»„ï¼ˆå°æ‹¬å·ï¼‰åŒ¹é…å†…å®¹ï¼Œp2 ä¸ºç¬¬äºŒä¸ªåˆ†ç»„åŒ¹é…å†…å®¹...å¯ä»¥ä¾æ¬¡ç±»æ¨
      obj[p1]=p2;
   });
   ```

1. promise

1. å®ç° newï¼Œapply,call,bind

1. å®ç° after å‡½æ•°ï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°å¤šå°‘æ¬¡ä¹‹åå†æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œä¸€èˆ¬å¤„ç†å¼‚æ­¥

```js
function after(num,callback){
   num=num||0;
   return function(){
      if(--num<1){
         callback();
      }
   }
}
let fn = after(3,function(){console.log('afert')});
fn()
fn()
fn()
```

1. å®ç° æŸ¯é‡ŒåŒ– add(1)(2)(3) // â†’ 6

```js
// ğŸŒ° é€šè¿‡é—­åŒ…ï¼Œç›´æ¥å­˜å‚¨ç»“æœ
function add(...args){
    // ç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°ç”Ÿæˆä¸€ä¸ªé—­åŒ…æ¥å‚¨å­˜ç»“æœ
    let res = 0;
    let fn = function(...args){
        args.forEach(n => res += n);
        return fn;
    }
    fn.toString = function(){
        return res;
    }
    return fn(...args);
}

// å‚¨å­˜æ¯ä¸ªå‚æ•°
function add(...arg){
    // æ”¶é›†çš„æ‰€æœ‰å‚æ•°
    let res = [...arg];
    // æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ª ä¾›ä¸‹æ¬¡è°ƒç”¨çš„æ–¹æ³•
    let next = function(...arg){
        // æ±‡é›†å‚æ•°ï¼Œä¾›å…¶ä»–å¤„ç†
        let totalArg = [...res,...arg];
        return add.apply(null,totalArg);
    }
    // åˆ©ç”¨ toString è¿”å›ç»“æœ
    // å¦‚æœ‰å…¶ä»–éœ€æ±‚å¯åœ¨ next å†åšåˆ¤æ–­
    next.toString = function(){
        return res.reduce((a,c)=>a+c);
    }
    return next;
}
```

1. æ‰‹å†™å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€å¿«æ’ï¼ˆäºŒåˆ†å››è·¯ï¼‰ã€è®¡æ•°æ’åºã€æ’å…¥æ’åºã€å½’å¹¶æ’åºã€æ—¶é—´å¤åˆ¶åº¦ï¼Ÿ ç¿»è½¬äºŒå‰æ ‘ã€‚

```js
   // å†’æ³¡
  function bubbleSort(arr) {
      let len = arr.length,temp=null;
      // å¤–å±‚å¾ªç¯ i æ§åˆ¶æ¯”è¾ƒçš„è½®æ•°
      for (let i = 0; i < len - 1; i++) {
            // é‡Œå±‚å¾ªç¯æ§åˆ¶æ¯ä¸€è½®æ¯”è¾ƒçš„æ¬¡æ•° j  â€˜- iâ€™ å°±æ˜¯å¾ªç¯äº†å‡ æ¬¡ï¼Œæœ€å¤§å·²æ”¾å…¥æœ€åï¼Œæ— é¡»å†æ’
            for (let j = 0; j < len - 1 - i; j++) {
               if (arr[j] > arr[j+1]) {        // ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯”
                  // å½“å‰é¡¹å¤§äºåä¸€é¡¹ å…ƒç´ äº¤æ¢
                  // temp = arr[j+1];
                  // arr[j+1] = arr[j];
                  // arr[j] = temp;
                  // ES6 è§£æ„èµ‹å€¼å†™æ³•
                     [arr[j],arr[j+1]] = [arr[j+1],arr[j]];
               }
            }
      }
      return arr;
   }
```

1. ç»™å®šä¸¤ç»„æ•°ï¼Œåˆ†åˆ«ä»¥é“¾è¡¨æ–¹å¼å­˜å‚¨ï¼Œæ±‚å’Œï¼Ÿæ³¨æ„è¿›ä½

1. æ•°ç»„å»é‡ï¼Ÿ

   ```js
   var arr = Array.from({length:20},(n,i)=> n = Math.floor(Math.random() * 10))
   // 1
   var newArr = [];
   for(let i=0;i<arr.length;i++){
   if(newArr.indexOf(arr[i])==-1){
      newArr.push(arr[i])
   }
   }
   // 2
   arr.reduce((a,c)=>(!a.includes(c)?a.push(c):null,a),[])
   // 3
   [...new Set(arr)]
   ```

1. æ–æ³¢æ‹‰å¥‘æ•°åˆ—

   ```js
   function fibo(count){
      if(count<=1){
         return 1;
      }
      let arr = [1,1];
      let i = count - 2;
      while(i>=0){
         arr.push(arr[arr.length-1]+arr[arr.length-2])
         i--;
      }
      console.log(arr,arr[count])
   }
   fibo(7)// â†’ [1, 1, 2, 3, 5, 8, 13, 21], 21
   ```

## TypeScript

- public ï¼šå…¬æœ‰ åœ¨å½“å‰ç±»é‡Œé¢ã€å­ç±» ç±»å¤–é¢éƒ½å¯ä»¥è®¿é—®
- protectedï¼šä¿æŠ¤ç±»å‹ åœ¨å½“å‰ç±»é‡Œé¢ã€å­ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œåœ¨ç±»å¤–éƒ¨æ²¡æ³•è®¿é—®
- private ï¼š ç§æœ‰ åœ¨å½“å‰ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œå­ç±»ã€ç±»å¤–éƒ¨éƒ½æ²¡æ³•è®¿é—®
- å±æ€§å¦‚æœä¸åŠ ä¿®é¥°ç¬¦é»˜è®¤å°±æ˜¯å…¬æœ‰ï¼ˆpublicï¼‰

æ•°æ®ç±»å‹ï¼š

- å…ƒç»„ï¼šç‰¹æ®Šçš„æ•°ç»„ï¼Œå¿…é¡»æŒ‡å®šç»„æ•°å…ƒç´ ä¸ªæ•°ï¼ŒåŠæ¯ä¸ªå…ƒç´ ç±»å‹å³ä¸ºå…ƒç»„ï¼›
- anyï¼šä»»æ„ç±»å‹ï¼Œä¸€èˆ¬ç”¨äºè·å– DOM æˆ–æ¥å—ä¸ç¡®å®šç±»å‹å€¼ï¼›
- voidï¼šæ— è¿”å›å€¼ç±»å‹
- neverï¼šä¸å­˜åœ¨çš„ç±»å‹ï¼šç”¨äºæŠ›å‡ºå¼‚å¸¸å’Œæ— çº¿å¾ªç¯çš„å‡½æ•°è¿”å›ç±»å‹

å±æ€§å€Ÿå£ï¼šçº¦æŸå‚æ•°

å‘½åç©ºé—´å’Œæ¨¡å—çš„åŒºåˆ«ï¼š

- å‘½åç©ºé—´ï¼šå†…éƒ¨æ¨¡å—ï¼Œä¸»è¦ç”¨äºç»„ç»‡ä»£ç ï¼Œé¿å…å‘½åå†²çªã€‚
- æ¨¡   å—ï¼šts çš„å¤–éƒ¨æ¨¡å—çš„ç®€ç§°ï¼Œä¾§é‡ä»£ç çš„å¤ç”¨ï¼Œä¸€ä¸ªæ¨¡å—é‡Œå¯èƒ½ä¼šæœ‰å¤šä¸ªå‘½åç©ºé—´ï¼Œä¸ ES6 æ¨¡å—å·®ä¸å¤šä¸€è‡´ã€‚

è£…é¥°å™¨ï¼šè£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ï¼Œæ–¹æ³•ï¼Œå±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸ºã€‚é€šä¿—çš„è®²è£…é¥°å™¨å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ³¨å…¥åˆ°ç±»ã€æ–¹æ³•ã€å±æ€§å‚æ•°ä¸Šæ¥æ¨ªå‘æ‰©å±•ç±»ã€å±æ€§ã€æ–¹æ³•ã€å‚æ•°çš„åŠŸèƒ½ã€‚
å¸¸è§çš„è£…é¥°å™¨æœ‰ï¼šç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨ã€å‚æ•°è£…é¥°å™¨

è£…é¥°å™¨çš„å†™æ³•ï¼šæ™®é€šè£…é¥°å™¨ï¼ˆæ— æ³•ä¼ å‚ï¼‰ã€è£…é¥°å™¨å·¥å‚ ï¼ˆå¯ä¼ å‚ï¼‰
è£…é¥°å™¨æ˜¯è¿‡å»å‡ å¹´ä¸­ JS æœ€å¤§çš„æˆå°±ä¹‹ä¸€ï¼Œå·²æ˜¯ ES7 çš„æ ‡å‡†ç‰¹æ€§ä¹‹ä¸€ã€‚

è£…é¥°å™¨æ‰§è¡Œé¡ºåºï¼šå±æ€§ â†’ æ–¹æ³• â†’ æ–¹æ³•å‚æ•° â†’ ç±»
å¦‚æœæœ‰å¤šä¸ªåŒæ ·çš„è£…é¥°å™¨ï¼Œå®ƒä¼šå…ˆæ‰§è¡Œåé¢çš„ã€‚
